var xu=Object.defineProperty;var Ys=e=>{throw TypeError(e)};var _u=(e,t,n)=>t in e?xu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var U=(e,t,n)=>_u(e,typeof t!="symbol"?t+"":t,n),jo=(e,t,n)=>t.has(e)||Ys("Cannot "+n);var L=(e,t,n)=>(jo(e,t,"read from private field"),n?n.call(e):t.get(e)),X=(e,t,n)=>t.has(e)?Ys("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),F=(e,t,n,r)=>(jo(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),re=(e,t,n)=>(jo(e,t,"access private method"),n);var Yc;typeof window<"u"&&((Yc=window.__svelte??(window.__svelte={})).v??(Yc.v=new Set)).add("5");const Au=1,Bu=2,Xc=4,Su=8,Tu=16,Iu=1,$u=2,pe=Symbol(),Lu="http://www.w3.org/1999/xhtml",wi=!1;var Jc=Array.isArray,ku=Array.prototype.indexOf,vo=Array.from,Qc=Object.defineProperty,En=Object.getOwnPropertyDescriptor,Uu=Object.getOwnPropertyDescriptors,Nu=Object.prototype,Ru=Array.prototype,ea=Object.getPrototypeOf,Xs=Object.isExtensible;function fr(e){return typeof e=="function"}const Gt=()=>{};function ta(e){for(var t=0;t<e.length;t++)e[t]()}function na(){var e,t,n=new Promise((r,o)=>{e=r,t=o});return{promise:n,resolve:e,reject:t}}const ge=2,Xi=4,Ji=8,Ou=1<<24,St=16,Tt=32,kn=64,mo=128,Ge=512,ye=1024,Le=2048,It=4096,Oe=8192,Yt=16384,Qi=32768,Bn=65536,Js=1<<17,ra=1<<18,tr=1<<19,Cu=1<<20,mt=1<<25,Sn=32768,yi=1<<21,es=1<<22,Xt=1<<23,wr=Symbol("$state"),Hu=Symbol("legacy props"),Mu=Symbol(""),Pn=new class extends Error{constructor(){super(...arguments);U(this,"name","StaleReactionError");U(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function oa(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Pu(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function qu(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Vu(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Du(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ju(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function zu(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Fu(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ku(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Zu(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function Wu(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ia(e){return e===this.v}function sa(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ca(e){return!sa(e,this.v)}let Gu=!1,ke=null;function Wn(e){ke=e}function Yu(e,t=!1,n){ke={p:ke,i:!1,c:null,e:null,s:e,x:null,l:null}}function Xu(e){var t=ke,n=t.e;if(n!==null){t.e=null;for(var r of n)Sa(r)}return t.i=!0,ke=t.p,{}}function aa(){return!0}let fn=[];function fa(){var e=fn;fn=[],ta(e)}function nr(e){if(fn.length===0&&!yr){var t=fn;queueMicrotask(()=>{t===fn&&fa()})}fn.push(e)}function Ju(){for(;fn.length>0;)fa()}function la(e){var t=ee;if(t===null)return Y.f|=Xt,e;if((t.f&Qi)===0){if((t.f&mo)===0)throw e;t.b.error(e)}else Gn(e,t)}function Gn(e,t){for(;t!==null;){if((t.f&mo)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Rr=new Set;let G=null,qr=null,se=null,Fe=[],Eo=null,bi=!1,yr=!1;var zn,Fn,pn,wn,Br,Kn,Zn,fe,vi,on,mi,ua,da;const wo=class wo{constructor(){X(this,fe);U(this,"committed",!1);U(this,"current",new Map);U(this,"previous",new Map);X(this,zn,new Set);X(this,Fn,new Set);X(this,pn,0);X(this,wn,0);X(this,Br,null);X(this,Kn,[]);X(this,Zn,[]);U(this,"skipped_effects",new Set);U(this,"is_fork",!1)}is_deferred(){return this.is_fork||L(this,wn)>0}process(t){var r;Fe=[],qr=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const o of t)re(this,fe,vi).call(this,o,n);this.is_fork||re(this,fe,ua).call(this),this.is_deferred()?(re(this,fe,on).call(this,n.effects),re(this,fe,on).call(this,n.render_effects),re(this,fe,on).call(this,n.block_effects)):(qr=this,G=null,Qs(n.render_effects),Qs(n.effects),qr=null,(r=L(this,Br))==null||r.resolve()),se=null}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&Xt)===0&&(this.current.set(t,t.v),se==null||se.set(t,t.v))}activate(){G=this,this.apply()}deactivate(){G===this&&(G=null,se=null)}flush(){if(this.activate(),Fe.length>0){if(ha(),G!==null&&G!==this)return}else L(this,pn)===0&&this.process([]);this.deactivate()}discard(){for(const t of L(this,Fn))t(this);L(this,Fn).clear()}increment(t){F(this,pn,L(this,pn)+1),t&&F(this,wn,L(this,wn)+1)}decrement(t){F(this,pn,L(this,pn)-1),t&&F(this,wn,L(this,wn)-1),this.revive()}revive(){for(const t of L(this,Kn))me(t,Le),Tn(t);for(const t of L(this,Zn))me(t,It),Tn(t);F(this,Kn,[]),F(this,Zn,[]),this.flush()}oncommit(t){L(this,zn).add(t)}ondiscard(t){L(this,Fn).add(t)}settled(){return(L(this,Br)??F(this,Br,na())).promise}static ensure(){if(G===null){const t=G=new wo;Rr.add(G),yr||wo.enqueue(()=>{G===t&&t.flush()})}return G}static enqueue(t){nr(t)}apply(){}};zn=new WeakMap,Fn=new WeakMap,pn=new WeakMap,wn=new WeakMap,Br=new WeakMap,Kn=new WeakMap,Zn=new WeakMap,fe=new WeakSet,vi=function(t,n){var u;t.f^=ye;for(var r=t.first;r!==null;){var o=r.f,i=(o&(Tt|kn))!==0,s=i&&(o&ye)!==0,c=s||(o&Oe)!==0||this.skipped_effects.has(r);if((r.f&mo)!==0&&((u=r.b)!=null&&u.is_pending())&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!c&&r.fn!==null){i?r.f^=ye:(o&Xi)!==0?n.effects.push(r):$r(r)&&((r.f&St)!==0&&n.block_effects.push(r),xr(r));var a=r.first;if(a!==null){r=a;continue}}var f=r.parent;for(r=r.next;r===null&&f!==null;)f===n.effect&&(re(this,fe,on).call(this,n.effects),re(this,fe,on).call(this,n.render_effects),re(this,fe,on).call(this,n.block_effects),n=n.parent),r=f.next,f=f.parent}},on=function(t){for(const n of t)((n.f&Le)!==0?L(this,Kn):L(this,Zn)).push(n),re(this,fe,mi).call(this,n.deps),me(n,ye)},mi=function(t){if(t!==null)for(const n of t)(n.f&ge)===0||(n.f&Sn)===0||(n.f^=Sn,re(this,fe,mi).call(this,n.deps))},ua=function(){if(L(this,wn)===0){for(const t of L(this,zn))t();L(this,zn).clear()}L(this,pn)===0&&re(this,fe,da).call(this)},da=function(){var i;if(Rr.size>1){this.previous.clear();var t=se,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Rr){if(s===this){n=!1;continue}const c=[];for(const[f,u]of this.current){if(s.current.has(f))if(n&&u!==s.current.get(f))s.current.set(f,u);else continue;c.push(f)}if(c.length===0)continue;const a=[...s.current.keys()].filter(f=>!this.current.has(f));if(a.length>0){var o=Fe;Fe=[];const f=new Set,u=new Map;for(const l of c)ga(l,a,f,u);if(Fe.length>0){G=s,s.apply();for(const l of Fe)re(i=s,fe,vi).call(i,l,r);s.deactivate()}Fe=o}}G=null,se=t}this.committed=!0,Rr.delete(this)};let Et=wo;function Qu(e){var t=yr;yr=!0;try{for(var n;;){if(Ju(),Fe.length===0&&(G==null||G.flush(),Fe.length===0))return Eo=null,n;ha()}}finally{yr=t}}function ha(){var e=_n;bi=!0;var t=null;try{var n=0;for(Gr(!0);Fe.length>0;){var r=Et.ensure();if(n++>1e3){var o,i;ed()}r.process(Fe),Jt.clear()}}finally{bi=!1,Gr(e),Eo=null}}function ed(){try{ju()}catch(e){Gn(e,Eo)}}let Ze=null;function Qs(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Yt|Oe))===0&&$r(r)&&(Ze=new Set,xr(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?$a(r):r.fn=null),(Ze==null?void 0:Ze.size)>0)){Jt.clear();for(const o of Ze){if((o.f&(Yt|Oe))!==0)continue;const i=[o];let s=o.parent;for(;s!==null;)Ze.has(s)&&(Ze.delete(s),i.push(s)),s=s.parent;for(let c=i.length-1;c>=0;c--){const a=i[c];(a.f&(Yt|Oe))===0&&xr(a)}}Ze.clear()}}Ze=null}}function ga(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const o of e.reactions){const i=o.f;(i&ge)!==0?ga(o,t,n,r):(i&(es|St))!==0&&(i&Le)===0&&pa(o,t,r)&&(me(o,Le),Tn(o))}}function pa(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const o of e.deps){if(t.includes(o))return!0;if((o.f&ge)!==0&&pa(o,t,n))return n.set(o,!0),!0}return n.set(e,!1),!1}function Tn(e){for(var t=Eo=e;t.parent!==null;){t=t.parent;var n=t.f;if(bi&&t===ee&&(n&St)!==0&&(n&ra)===0)return;if((n&(kn|Tt))!==0){if((n&ye)===0)return;t.f^=ye}}Fe.push(t)}function td(e){let t=0,n=In(0),r;return()=>{mr()&&(ct(n),_o(()=>(t===0&&(r=Un(()=>e(()=>br(n)))),t+=1,()=>{nr(()=>{t-=1,t===0&&(r==null||r(),r=void 0,br(n))})})))}}var nd=Bn|tr|mo;function rd(e,t,n){new od(e,t,n)}var qe,Ve,Yi,tt,yn,nt,De,Be,rt,yt,Ft,bn,Kt,vn,Zt,yo,ue,id,sd,Ei,Vr,Dr,xi;class od{constructor(t,n,r){X(this,ue);U(this,"parent");X(this,qe,!1);X(this,Ve);X(this,Yi,null);X(this,tt);X(this,yn);X(this,nt);X(this,De,null);X(this,Be,null);X(this,rt,null);X(this,yt,null);X(this,Ft,null);X(this,bn,0);X(this,Kt,0);X(this,vn,!1);X(this,Zt,null);X(this,yo,td(()=>(F(this,Zt,In(L(this,bn))),()=>{F(this,Zt,null)})));F(this,Ve,t),F(this,tt,n),F(this,yn,r),this.parent=ee.b,F(this,qe,!!L(this,tt).pending),F(this,nt,Ao(()=>{ee.b=this;{var o=re(this,ue,Ei).call(this);try{F(this,De,Ke(()=>r(o)))}catch(i){this.error(i)}L(this,Kt)>0?re(this,ue,Dr).call(this):F(this,qe,!1)}return()=>{var i;(i=L(this,Ft))==null||i.remove()}},nd))}is_pending(){return L(this,qe)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!L(this,tt).pending}update_pending_count(t){re(this,ue,xi).call(this,t),F(this,bn,L(this,bn)+t),L(this,Zt)&&Yn(L(this,Zt),L(this,bn))}get_effect_pending(){return L(this,yo).call(this),ct(L(this,Zt))}error(t){var n=L(this,tt).onerror;let r=L(this,tt).failed;if(L(this,vn)||!n&&!r)throw t;L(this,De)&&(Ie(L(this,De)),F(this,De,null)),L(this,Be)&&(Ie(L(this,Be)),F(this,Be,null)),L(this,rt)&&(Ie(L(this,rt)),F(this,rt,null));var o=!1,i=!1;const s=()=>{if(o){Wu();return}o=!0,i&&Zu(),Et.ensure(),F(this,bn,0),L(this,rt)!==null&&xn(L(this,rt),()=>{F(this,rt,null)}),F(this,qe,this.has_pending_snippet()),F(this,De,re(this,ue,Vr).call(this,()=>(F(this,vn,!1),Ke(()=>L(this,yn).call(this,L(this,Ve)))))),L(this,Kt)>0?re(this,ue,Dr).call(this):F(this,qe,!1)};var c=Y;try{Se(null),i=!0,n==null||n(t,s),i=!1}catch(a){Gn(a,L(this,nt)&&L(this,nt).parent)}finally{Se(c)}r&&nr(()=>{F(this,rt,re(this,ue,Vr).call(this,()=>{Et.ensure(),F(this,vn,!0);try{return Ke(()=>{r(L(this,Ve),()=>t,()=>s)})}catch(a){return Gn(a,L(this,nt).parent),null}finally{F(this,vn,!1)}}))})}}qe=new WeakMap,Ve=new WeakMap,Yi=new WeakMap,tt=new WeakMap,yn=new WeakMap,nt=new WeakMap,De=new WeakMap,Be=new WeakMap,rt=new WeakMap,yt=new WeakMap,Ft=new WeakMap,bn=new WeakMap,Kt=new WeakMap,vn=new WeakMap,Zt=new WeakMap,yo=new WeakMap,ue=new WeakSet,id=function(){try{F(this,De,Ke(()=>L(this,yn).call(this,L(this,Ve))))}catch(t){this.error(t)}F(this,qe,!1)},sd=function(){const t=L(this,tt).pending;t&&(F(this,Be,Ke(()=>t(L(this,Ve)))),Et.enqueue(()=>{var n=re(this,ue,Ei).call(this);F(this,De,re(this,ue,Vr).call(this,()=>(Et.ensure(),Ke(()=>L(this,yn).call(this,n))))),L(this,Kt)>0?re(this,ue,Dr).call(this):(xn(L(this,Be),()=>{F(this,Be,null)}),F(this,qe,!1))}))},Ei=function(){var t=L(this,Ve);return L(this,qe)&&(F(this,Ft,At()),L(this,Ve).before(L(this,Ft)),t=L(this,Ft)),t},Vr=function(t){var n=ee,r=Y,o=ke;ft(L(this,nt)),Se(L(this,nt)),Wn(L(this,nt).ctx);try{return t()}catch(i){return la(i),null}finally{ft(n),Se(r),Wn(o)}},Dr=function(){const t=L(this,tt).pending;L(this,De)!==null&&(F(this,yt,document.createDocumentFragment()),L(this,yt).append(L(this,Ft)),Ua(L(this,De),L(this,yt))),L(this,Be)===null&&F(this,Be,Ke(()=>t(L(this,Ve))))},xi=function(t){var n;if(!this.has_pending_snippet()){this.parent&&re(n=this.parent,ue,xi).call(n,t);return}F(this,Kt,L(this,Kt)+t),L(this,Kt)===0&&(F(this,qe,!1),L(this,Be)&&xn(L(this,Be),()=>{F(this,Be,null)}),L(this,yt)&&(L(this,Ve).before(L(this,yt)),F(this,yt,null)))};function cd(e,t,n,r){const o=ts;if(n.length===0&&e.length===0){r(t.map(o));return}var i=G,s=ee,c=ad();function a(){Promise.all(n.map(f=>fd(f))).then(f=>{c();try{r([...t.map(o),...f])}catch(u){(s.f&Yt)===0&&Gn(u,s)}i==null||i.deactivate(),Zr()}).catch(f=>{Gn(f,s)})}e.length>0?Promise.all(e).then(()=>{c();try{return a()}finally{i==null||i.deactivate(),Zr()}}):a()}function ad(){var e=ee,t=Y,n=ke,r=G;return function(i=!0){ft(e),Se(t),Wn(n),i&&(r==null||r.activate())}}function Zr(){ft(null),Se(null),Wn(null)}function ts(e){var t=ge|Le,n=Y!==null&&(Y.f&ge)!==0?Y:null;return ee!==null&&(ee.f|=tr),{ctx:ke,deps:null,effects:null,equals:ia,f:t,fn:e,reactions:null,rv:0,v:pe,wv:0,parent:n??ee,ac:null}}function fd(e,t){let n=ee;n===null&&Pu();var r=n.b,o=void 0,i=In(pe),s=!Y,c=new Map;return Ed(()=>{var d;var a=na();o=a.promise;try{Promise.resolve(e()).then(a.resolve,a.reject).then(()=>{f===G&&f.committed&&f.deactivate(),Zr()})}catch(h){a.reject(h),Zr()}var f=G;if(s){var u=!r.is_pending();r.update_pending_count(1),f.increment(u),(d=c.get(f))==null||d.reject(Pn),c.delete(f),c.set(f,a)}const l=(h,p=void 0)=>{if(f.activate(),p)p!==Pn&&(i.f|=Xt,Yn(i,p));else{(i.f&Xt)!==0&&(i.f^=Xt),Yn(i,h);for(const[g,y]of c){if(c.delete(g),g===f)break;y.reject(Pn)}}s&&(r.update_pending_count(-1),f.decrement(u))};a.promise.then(l,h=>l(null,h||"unknown"))}),rs(()=>{for(const a of c.values())a.reject(Pn)}),new Promise(a=>{function f(u){function l(){u===o?a(i):f(o)}u.then(l,l)}f(o)})}function hb(e){const t=ts(e);return Na(t),t}function ld(e){const t=ts(e);return t.equals=ca,t}function wa(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ie(t[n])}}function ud(e){for(var t=e.parent;t!==null;){if((t.f&ge)===0)return(t.f&Yt)===0?t:null;t=t.parent}return null}function ns(e){var t,n=ee;ft(ud(e));try{e.f&=~Sn,wa(e),t=Ha(e)}finally{ft(n)}return t}function ya(e){var t=ns(e);if(e.equals(t)||(G!=null&&G.is_fork||(e.v=t),e.wv=Oa()),!rr)if(se!==null)(mr()||G!=null&&G.is_fork)&&se.set(e,t);else{var n=(e.f&Ge)===0?It:ye;me(e,n)}}let _i=new Set;const Jt=new Map;let ba=!1;function In(e,t){var n={f:0,v:e,reactions:null,equals:ia,rv:0,wv:0};return n}function Rt(e,t){const n=In(e);return Na(n),n}function va(e,t=!1,n=!0){const r=In(e);return t||(r.equals=ca),r}function zt(e,t,n=!1){Y!==null&&(!st||(Y.f&Js)!==0)&&aa()&&(Y.f&(ge|St|es|Js))!==0&&!(xe!=null&&xe.includes(e))&&Ku();let r=n?hr(t):t;return Yn(e,r)}function Yn(e,t){if(!e.equals(t)){var n=e.v;rr?Jt.set(e,t):Jt.set(e,n),e.v=t;var r=Et.ensure();r.capture(e,n),(e.f&ge)!==0&&((e.f&Le)!==0&&ns(e),me(e,(e.f&Ge)!==0?ye:It)),e.wv=Oa(),ma(e,Le),ee!==null&&(ee.f&ye)!==0&&(ee.f&(Tt|kn))===0&&(Pe===null?Ad([e]):Pe.push(e)),!r.is_fork&&_i.size>0&&!ba&&dd()}return t}function dd(){ba=!1;var e=_n;Gr(!0);const t=Array.from(_i);try{for(const n of t)(n.f&ye)!==0&&me(n,It),$r(n)&&xr(n)}finally{Gr(e)}_i.clear()}function br(e){zt(e,e.v+1)}function ma(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,o=0;o<r;o++){var i=n[o],s=i.f,c=(s&Le)===0;if(c&&me(i,t),(s&ge)!==0){var a=i;se==null||se.delete(a),(s&Sn)===0&&(s&Ge&&(i.f|=Sn),ma(a,It))}else c&&((s&St)!==0&&Ze!==null&&Ze.add(i),Tn(i))}}function hr(e){if(typeof e!="object"||e===null||wr in e)return e;const t=ea(e);if(t!==Nu&&t!==Ru)return e;var n=new Map,r=Jc(e),o=Rt(0),i=An,s=c=>{if(An===i)return c();var a=Y,f=An;Se(null),rc(i);var u=c();return Se(a),rc(f),u};return r&&n.set("length",Rt(e.length)),new Proxy(e,{defineProperty(c,a,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&zu();var u=n.get(a);return u===void 0?u=s(()=>{var l=Rt(f.value);return n.set(a,l),l}):zt(u,f.value,!0),!0},deleteProperty(c,a){var f=n.get(a);if(f===void 0){if(a in c){const u=s(()=>Rt(pe));n.set(a,u),br(o)}}else zt(f,pe),br(o);return!0},get(c,a,f){var h;if(a===wr)return e;var u=n.get(a),l=a in c;if(u===void 0&&(!l||(h=En(c,a))!=null&&h.writable)&&(u=s(()=>{var p=hr(l?c[a]:pe),g=Rt(p);return g}),n.set(a,u)),u!==void 0){var d=ct(u);return d===pe?void 0:d}return Reflect.get(c,a,f)},getOwnPropertyDescriptor(c,a){var f=Reflect.getOwnPropertyDescriptor(c,a);if(f&&"value"in f){var u=n.get(a);u&&(f.value=ct(u))}else if(f===void 0){var l=n.get(a),d=l==null?void 0:l.v;if(l!==void 0&&d!==pe)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return f},has(c,a){var d;if(a===wr)return!0;var f=n.get(a),u=f!==void 0&&f.v!==pe||Reflect.has(c,a);if(f!==void 0||ee!==null&&(!u||(d=En(c,a))!=null&&d.writable)){f===void 0&&(f=s(()=>{var h=u?hr(c[a]):pe,p=Rt(h);return p}),n.set(a,f));var l=ct(f);if(l===pe)return!1}return u},set(c,a,f,u){var $;var l=n.get(a),d=a in c;if(r&&a==="length")for(var h=f;h<l.v;h+=1){var p=n.get(h+"");p!==void 0?zt(p,pe):h in c&&(p=s(()=>Rt(pe)),n.set(h+"",p))}if(l===void 0)(!d||($=En(c,a))!=null&&$.writable)&&(l=s(()=>Rt(void 0)),zt(l,hr(f)),n.set(a,l));else{d=l.v!==pe;var g=s(()=>hr(f));zt(l,g)}var y=Reflect.getOwnPropertyDescriptor(c,a);if(y!=null&&y.set&&y.set.call(u,f),!d){if(r&&typeof a=="string"){var m=n.get("length"),I=Number(a);Number.isInteger(I)&&I>=m.v&&zt(m,I+1)}br(o)}return!0},ownKeys(c){ct(o);var a=Reflect.ownKeys(c).filter(l=>{var d=n.get(l);return d===void 0||d.v!==pe});for(var[f,u]of n)u.v!==pe&&!(f in c)&&a.push(f);return a},setPrototypeOf(){Fu()}})}var ec,Ea,xa,_a;function hd(){if(ec===void 0){ec=window,Ea=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;xa=En(t,"firstChild").get,_a=En(t,"nextSibling").get,Xs(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Xs(n)&&(n.__t=void 0)}}function At(e=""){return document.createTextNode(e)}function Wr(e){return xa.call(e)}function Ir(e){return _a.call(e)}function gb(e,t){return Wr(e)}function pb(e,t=!1){{var n=Wr(e);return n instanceof Comment&&n.data===""?Ir(n):n}}function wb(e,t=1,n=!1){let r=e;for(;t--;)r=Ir(r);return r}function gd(e){e.textContent=""}function Aa(){return!1}let tc=!1;function pd(){tc||(tc=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function xo(e){var t=Y,n=ee;Se(null),ft(null);try{return e()}finally{Se(t),ft(n)}}function Ba(e,t,n,r=n){e.addEventListener(t,()=>xo(n));const o=e.__on_r;o?e.__on_r=()=>{o(),r(!0)}:e.__on_r=()=>r(!0),pd()}function wd(e){ee===null&&(Y===null&&Du(),Vu()),rr&&qu()}function yd(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function $t(e,t,n){var r=ee;r!==null&&(r.f&Oe)!==0&&(e|=Oe);var o={ctx:ke,deps:null,nodes:null,f:e|Le|Ge,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{xr(o),o.f|=Qi}catch(c){throw Ie(o),c}else t!==null&&Tn(o);var i=o;if(n&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&tr)===0&&(i=i.first,(e&St)!==0&&(e&Bn)!==0&&i!==null&&(i.f|=Bn)),i!==null&&(i.parent=r,r!==null&&yd(i,r),Y!==null&&(Y.f&ge)!==0&&(e&kn)===0)){var s=Y;(s.effects??(s.effects=[])).push(i)}return o}function mr(){return Y!==null&&!st}function rs(e){const t=$t(Ji,null,!1);return me(t,ye),t.teardown=e,t}function bd(e){wd();var t=ee.f,n=!Y&&(t&Tt)!==0&&(t&Qi)===0;if(n){var r=ke;(r.e??(r.e=[])).push(e)}else return Sa(e)}function Sa(e){return $t(Xi|Cu,e,!1)}function vd(e){Et.ensure();const t=$t(kn|tr,e,!0);return(n={})=>new Promise(r=>{n.outro?xn(t,()=>{Ie(t),r(void 0)}):(Ie(t),r(void 0))})}function md(e){return $t(Xi,e,!1)}function Ed(e){return $t(es|tr,e,!0)}function _o(e,t=0){return $t(Ji|t,e,!0)}function yb(e,t=[],n=[],r=[]){cd(r,t,n,o=>{$t(Ji,()=>e(...o.map(ct)),!0)})}function Ao(e,t=0){var n=$t(St|t,e,!0);return n}function Ke(e){return $t(Tt|tr,e,!0)}function Ta(e){var t=e.teardown;if(t!==null){const n=rr,r=Y;nc(!0),Se(null);try{t.call(null)}finally{nc(n),Se(r)}}}function Ia(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const o=n.ac;o!==null&&xo(()=>{o.abort(Pn)});var r=n.next;(n.f&kn)!==0?n.parent=null:Ie(n,t),n=r}}function xd(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Tt)===0&&Ie(t),t=n}}function Ie(e,t=!0){var n=!1;(t||(e.f&ra)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(_d(e.nodes.start,e.nodes.end),n=!0),Ia(e,t&&!n),Yr(e,0),me(e,Yt);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();Ta(e);var o=e.parent;o!==null&&o.first!==null&&$a(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function _d(e,t){for(;e!==null;){var n=e===t?null:Ir(e);e.remove(),e=n}}function $a(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function xn(e,t,n=!0){var r=[];La(e,r,!0);var o=()=>{n&&Ie(e),t&&t()},i=r.length;if(i>0){var s=()=>--i||o();for(var c of r)c.out(s)}else o()}function La(e,t,n){if((e.f&Oe)===0){e.f^=Oe;var r=e.nodes&&e.nodes.t;if(r!==null)for(const c of r)(c.is_global||n)&&t.push(c);for(var o=e.first;o!==null;){var i=o.next,s=(o.f&Bn)!==0||(o.f&Tt)!==0&&(e.f&St)!==0;La(o,t,s?n:!1),o=i}}}function os(e){ka(e,!0)}function ka(e,t){if((e.f&Oe)!==0){e.f^=Oe,(e.f&ye)===0&&(me(e,Le),Tn(e));for(var n=e.first;n!==null;){var r=n.next,o=(n.f&Bn)!==0||(n.f&Tt)!==0;ka(n,o?t:!1),n=r}var i=e.nodes&&e.nodes.t;if(i!==null)for(const s of i)(s.is_global||t)&&s.in()}}function Ua(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var o=n===r?null:Ir(n);t.append(n),n=o}}let _n=!1;function Gr(e){_n=e}let rr=!1;function nc(e){rr=e}let Y=null,st=!1;function Se(e){Y=e}let ee=null;function ft(e){ee=e}let xe=null;function Na(e){Y!==null&&(xe===null?xe=[e]:xe.push(e))}let Ee=null,Ne=0,Pe=null;function Ad(e){Pe=e}let Ra=1,Er=0,An=Er;function rc(e){An=e}function Oa(){return++Ra}function $r(e){var t=e.f;if((t&Le)!==0)return!0;if(t&ge&&(e.f&=~Sn),(t&It)!==0){var n=e.deps;if(n!==null)for(var r=n.length,o=0;o<r;o++){var i=n[o];if($r(i)&&ya(i),i.wv>e.wv)return!0}(t&Ge)!==0&&se===null&&me(e,ye)}return!1}function Ca(e,t,n=!0){var r=e.reactions;if(r!==null&&!(xe!=null&&xe.includes(e)))for(var o=0;o<r.length;o++){var i=r[o];(i.f&ge)!==0?Ca(i,t,!1):t===i&&(n?me(i,Le):(i.f&ye)!==0&&me(i,It),Tn(i))}}function Ha(e){var p;var t=Ee,n=Ne,r=Pe,o=Y,i=xe,s=ke,c=st,a=An,f=e.f;Ee=null,Ne=0,Pe=null,Y=(f&(Tt|kn))===0?e:null,xe=null,Wn(e.ctx),st=!1,An=++Er,e.ac!==null&&(xo(()=>{e.ac.abort(Pn)}),e.ac=null);try{e.f|=yi;var u=e.fn,l=u(),d=e.deps;if(Ee!==null){var h;if(Yr(e,Ne),d!==null&&Ne>0)for(d.length=Ne+Ee.length,h=0;h<Ee.length;h++)d[Ne+h]=Ee[h];else e.deps=d=Ee;if(mr()&&(e.f&Ge)!==0)for(h=Ne;h<d.length;h++)((p=d[h]).reactions??(p.reactions=[])).push(e)}else d!==null&&Ne<d.length&&(Yr(e,Ne),d.length=Ne);if(aa()&&Pe!==null&&!st&&d!==null&&(e.f&(ge|It|Le))===0)for(h=0;h<Pe.length;h++)Ca(Pe[h],e);return o!==null&&o!==e&&(Er++,Pe!==null&&(r===null?r=Pe:r.push(...Pe))),(e.f&Xt)!==0&&(e.f^=Xt),l}catch(g){return la(g)}finally{e.f^=yi,Ee=t,Ne=n,Pe=r,Y=o,xe=i,Wn(s),st=c,An=a}}function Bd(e,t){let n=t.reactions;if(n!==null){var r=ku.call(n,e);if(r!==-1){var o=n.length-1;o===0?n=t.reactions=null:(n[r]=n[o],n.pop())}}n===null&&(t.f&ge)!==0&&(Ee===null||!Ee.includes(t))&&(me(t,It),(t.f&Ge)!==0&&(t.f^=Ge,t.f&=~Sn),wa(t),Yr(t,0))}function Yr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Bd(e,n[r])}function xr(e){var t=e.f;if((t&Yt)===0){me(e,ye);var n=ee,r=_n;ee=e,_n=!0;try{(t&(St|Ou))!==0?xd(e):Ia(e),Ta(e);var o=Ha(e);e.teardown=typeof o=="function"?o:null,e.wv=Ra;var i;wi&&Gu&&(e.f&Le)!==0&&e.deps}finally{_n=r,ee=n}}}async function Sd(){await Promise.resolve(),Qu()}function ct(e){var t=e.f,n=(t&ge)!==0;if(Y!==null&&!st){var r=ee!==null&&(ee.f&Yt)!==0;if(!r&&!(xe!=null&&xe.includes(e))){var o=Y.deps;if((Y.f&yi)!==0)e.rv<Er&&(e.rv=Er,Ee===null&&o!==null&&o[Ne]===e?Ne++:Ee===null?Ee=[e]:Ee.includes(e)||Ee.push(e));else{(Y.deps??(Y.deps=[])).push(e);var i=e.reactions;i===null?e.reactions=[Y]:i.includes(Y)||i.push(Y)}}}if(rr){if(Jt.has(e))return Jt.get(e);if(n){var s=e,c=s.v;return((s.f&ye)===0&&s.reactions!==null||Pa(s))&&(c=ns(s)),Jt.set(s,c),c}}else n&&(!(se!=null&&se.has(e))||G!=null&&G.is_fork&&!mr())&&(s=e,$r(s)&&ya(s),_n&&mr()&&(s.f&Ge)===0&&Ma(s));if(se!=null&&se.has(e))return se.get(e);if((e.f&Xt)!==0)throw e.v;return e.v}function Ma(e){if(e.deps!==null){e.f^=Ge;for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&ge)!==0&&(t.f&Ge)===0&&Ma(t)}}function Pa(e){if(e.v===pe)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Jt.has(t)||(t.f&ge)!==0&&Pa(t))return!0;return!1}function Un(e){var t=st;try{return st=!0,e()}finally{st=t}}const Td=-7169;function me(e,t){e.f=e.f&Td|t}const qa=new Set,Ai=new Set;function Id(e,t,n,r={}){function o(i){if(r.capture||gr.call(t,i),!i.cancelBubble)return xo(()=>n==null?void 0:n.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?nr(()=>{t.addEventListener(e,o,r)}):t.addEventListener(e,o,r),o}function bb(e,t,n,r,o){var i={capture:r,passive:o},s=Id(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&rs(()=>{t.removeEventListener(e,s,i)})}function vb(e){for(var t=0;t<e.length;t++)qa.add(e[t]);for(var n of Ai)n(e)}let oc=null;function gr(e){var y;var t=this,n=t.ownerDocument,r=e.type,o=((y=e.composedPath)==null?void 0:y.call(e))||[],i=o[0]||e.target;oc=e;var s=0,c=oc===e&&e.__root;if(c){var a=o.indexOf(c);if(a!==-1&&(t===document||t===window)){e.__root=t;return}var f=o.indexOf(t);if(f===-1)return;a<=f&&(s=a)}if(i=o[s]||e.target,i!==t){Qc(e,"currentTarget",{configurable:!0,get(){return i||n}});var u=Y,l=ee;Se(null),ft(null);try{for(var d,h=[];i!==null;){var p=i.assignedSlot||i.parentNode||i.host||null;try{var g=i["__"+r];g!=null&&(!i.disabled||e.target===i)&&g.call(i,e)}catch(m){d?h.push(m):d=m}if(e.cancelBubble||p===t||p===null)break;i=p}if(d){for(let m of h)queueMicrotask(()=>{throw m});throw d}}finally{e.__root=t,delete e.currentTarget,Se(u),ft(l)}}}function $d(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Xr(e,t){var n=ee;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function mb(e,t){var n=(t&Iu)!==0,r=(t&$u)!==0,o,i=!e.startsWith("<!>");return()=>{o===void 0&&(o=$d(i?e:"<!>"+e),n||(o=Wr(o)));var s=r||Ea?document.importNode(o,!0):o.cloneNode(!0);if(n){var c=Wr(s),a=s.lastChild;Xr(c,a)}else Xr(s,s);return s}}function Eb(e=""){{var t=At(e+"");return Xr(t,t),t}}function xb(){var e=document.createDocumentFragment(),t=document.createComment(""),n=At();return e.append(t,n),Xr(t,n),e}function _b(e,t){e!==null&&e.before(t)}const Ld=["touchstart","touchmove"];function kd(e){return Ld.includes(e)}function Ab(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function Bb(e,t){return Ud(e,t)}const On=new Map;function Ud(e,{target:t,anchor:n,props:r={},events:o,context:i,intro:s=!0}){hd();var c=new Set,a=l=>{for(var d=0;d<l.length;d++){var h=l[d];if(!c.has(h)){c.add(h);var p=kd(h);t.addEventListener(h,gr,{passive:p});var g=On.get(h);g===void 0?(document.addEventListener(h,gr,{passive:p}),On.set(h,1)):On.set(h,g+1)}}};a(vo(qa)),Ai.add(a);var f=void 0,u=vd(()=>{var l=n??t.appendChild(At());return rd(l,{pending:()=>{}},d=>{if(i){Yu({});var h=ke;h.c=i}o&&(r.$$events=o),f=e(d,r)||{},i&&Xu()}),()=>{var p;for(var d of c){t.removeEventListener(d,gr);var h=On.get(d);--h===0?(document.removeEventListener(d,gr),On.delete(d)):On.set(d,h)}Ai.delete(a),l!==n&&((p=l.parentNode)==null||p.removeChild(l))}});return Nd.set(f,u),f}let Nd=new WeakMap;var We,ot,Re,mn,Sr,Tr,bo;class Va{constructor(t,n=!0){U(this,"anchor");X(this,We,new Map);X(this,ot,new Map);X(this,Re,new Map);X(this,mn,new Set);X(this,Sr,!0);X(this,Tr,()=>{var t=G;if(L(this,We).has(t)){var n=L(this,We).get(t),r=L(this,ot).get(n);if(r)os(r),L(this,mn).delete(n);else{var o=L(this,Re).get(n);o&&(L(this,ot).set(n,o.effect),L(this,Re).delete(n),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[i,s]of L(this,We)){if(L(this,We).delete(i),i===t)break;const c=L(this,Re).get(s);c&&(Ie(c.effect),L(this,Re).delete(s))}for(const[i,s]of L(this,ot)){if(i===n||L(this,mn).has(i))continue;const c=()=>{if(Array.from(L(this,We).values()).includes(i)){var f=document.createDocumentFragment();Ua(s,f),f.append(At()),L(this,Re).set(i,{effect:s,fragment:f})}else Ie(s);L(this,mn).delete(i),L(this,ot).delete(i)};L(this,Sr)||!r?(L(this,mn).add(i),xn(s,c,!1)):c()}}});X(this,bo,t=>{L(this,We).delete(t);const n=Array.from(L(this,We).values());for(const[r,o]of L(this,Re))n.includes(r)||(Ie(o.effect),L(this,Re).delete(r))});this.anchor=t,F(this,Sr,n)}ensure(t,n){var r=G,o=Aa();if(n&&!L(this,ot).has(t)&&!L(this,Re).has(t))if(o){var i=document.createDocumentFragment(),s=At();i.append(s),L(this,Re).set(t,{effect:Ke(()=>n(s)),fragment:i})}else L(this,ot).set(t,Ke(()=>n(this.anchor)));if(L(this,We).set(r,t),o){for(const[c,a]of L(this,ot))c===t?r.skipped_effects.delete(a):r.skipped_effects.add(a);for(const[c,a]of L(this,Re))c===t?r.skipped_effects.delete(a.effect):r.skipped_effects.add(a.effect);r.oncommit(L(this,Tr)),r.ondiscard(L(this,bo))}else L(this,Tr).call(this)}}We=new WeakMap,ot=new WeakMap,Re=new WeakMap,mn=new WeakMap,Sr=new WeakMap,Tr=new WeakMap,bo=new WeakMap;function Rd(e){ke===null&&oa(),bd(()=>{const t=Un(e);if(typeof t=="function")return t})}function Sb(e){ke===null&&oa(),Rd(()=>()=>Un(e))}function Tb(e,t,n=!1){var r=new Va(e),o=n?Bn:0;function i(s,c){r.ensure(s,c)}Ao(()=>{var s=!1;t((c,a=!0)=>{s=!0,i(a,c)}),s||i(!1,null)},o)}function Ib(e,t){return t}function Od(e,t,n){for(var r=[],o=t.length,i,s=t.length,c=0;c<o;c++){let l=t[c];xn(l,()=>{if(i){if(i.pending.delete(l),i.done.add(l),i.pending.size===0){var d=e.outrogroups;Bi(vo(i.done)),d.delete(i),d.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var a=r.length===0&&n!==null;if(a){var f=n,u=f.parentNode;gd(u),u.append(f),e.items.clear()}Bi(t,!a)}else i={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(i)}function Bi(e,t=!0){for(var n=0;n<e.length;n++)Ie(e[n],t)}var ic;function $b(e,t,n,r,o,i=null){var s=e,c=new Map,a=(t&Xc)!==0;if(a){var f=e;s=f.appendChild(At())}var u=null,l=ld(()=>{var m=n();return Jc(m)?m:m==null?[]:vo(m)}),d,h=!0;function p(){y.fallback=u,Cd(y,d,s,t,r),u!==null&&(d.length===0?(u.f&mt)===0?os(u):(u.f^=mt,pr(u,null,s)):xn(u,()=>{u=null}))}var g=Ao(()=>{d=ct(l);for(var m=d.length,I=new Set,$=G,M=Aa(),P=0;P<m;P+=1){var N=d[P],O=r(N,P),C=h?null:c.get(O);C?(C.v&&Yn(C.v,N),C.i&&Yn(C.i,P),M&&$.skipped_effects.delete(C.e)):(C=Hd(c,h?s:ic??(ic=At()),N,O,P,o,t,n),h||(C.e.f|=mt),c.set(O,C)),I.add(O)}if(m===0&&i&&!u&&(h?u=Ke(()=>i(s)):(u=Ke(()=>i(ic??(ic=At()))),u.f|=mt)),!h)if(M){for(const[H,q]of c)I.has(H)||$.skipped_effects.add(q.e);$.oncommit(p),$.ondiscard(()=>{})}else p();ct(l)}),y={effect:g,items:c,outrogroups:null,fallback:u};h=!1}function Cd(e,t,n,r,o){var q,_,x,b,E,w,v,A,S;var i=(r&Su)!==0,s=t.length,c=e.items,a=e.effect.first,f,u=null,l,d=[],h=[],p,g,y,m;if(i)for(m=0;m<s;m+=1)p=t[m],g=o(p,m),y=c.get(g).e,(y.f&mt)===0&&((_=(q=y.nodes)==null?void 0:q.a)==null||_.measure(),(l??(l=new Set)).add(y));for(m=0;m<s;m+=1){if(p=t[m],g=o(p,m),y=c.get(g).e,e.outrogroups!==null)for(const B of e.outrogroups)B.pending.delete(y),B.done.delete(y);if((y.f&mt)!==0)if(y.f^=mt,y===a)pr(y,null,n);else{var I=u?u.next:a;y===e.effect.last&&(e.effect.last=y.prev),y.prev&&(y.prev.next=y.next),y.next&&(y.next.prev=y.prev),Ot(e,u,y),Ot(e,y,I),pr(y,I,n),u=y,d=[],h=[],a=u.next;continue}if((y.f&Oe)!==0&&(os(y),i&&((b=(x=y.nodes)==null?void 0:x.a)==null||b.unfix(),(l??(l=new Set)).delete(y))),y!==a){if(f!==void 0&&f.has(y)){if(d.length<h.length){var $=h[0],M;u=$.prev;var P=d[0],N=d[d.length-1];for(M=0;M<d.length;M+=1)pr(d[M],$,n);for(M=0;M<h.length;M+=1)f.delete(h[M]);Ot(e,P.prev,N.next),Ot(e,u,P),Ot(e,N,$),a=$,u=N,m-=1,d=[],h=[]}else f.delete(y),pr(y,a,n),Ot(e,y.prev,y.next),Ot(e,y,u===null?e.effect.first:u.next),Ot(e,u,y),u=y;continue}for(d=[],h=[];a!==null&&a!==y;)(f??(f=new Set)).add(a),h.push(a),a=a.next;if(a===null)continue}(y.f&mt)===0&&d.push(y),u=y,a=y.next}if(e.outrogroups!==null){for(const B of e.outrogroups)B.pending.size===0&&(Bi(vo(B.done)),(E=e.outrogroups)==null||E.delete(B));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||f!==void 0){var O=[];if(f!==void 0)for(y of f)(y.f&Oe)===0&&O.push(y);for(;a!==null;)(a.f&Oe)===0&&a!==e.fallback&&O.push(a),a=a.next;var C=O.length;if(C>0){var H=(r&Xc)!==0&&s===0?n:null;if(i){for(m=0;m<C;m+=1)(v=(w=O[m].nodes)==null?void 0:w.a)==null||v.measure();for(m=0;m<C;m+=1)(S=(A=O[m].nodes)==null?void 0:A.a)==null||S.fix()}Od(e,O,H)}}i&&nr(()=>{var B,k;if(l!==void 0)for(y of l)(k=(B=y.nodes)==null?void 0:B.a)==null||k.apply()})}function Hd(e,t,n,r,o,i,s,c){var a=(s&Au)!==0?(s&Tu)===0?va(n,!1,!1):In(n):null,f=(s&Bu)!==0?In(o):null;return{v:a,i:f,e:Ke(()=>(i(t,a??n,f??o,c),()=>{e.delete(r)}))}}function pr(e,t,n){if(e.nodes)for(var r=e.nodes.start,o=e.nodes.end,i=t&&(t.f&mt)===0?t.nodes.start:n;r!==null;){var s=Ir(r);if(i.before(r),r===o)return;r=s}}function Ot(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function Lb(e,t,n){var r=new Va(e);Ao(()=>{var o=t()??null;r.ensure(o,o&&(i=>n(i,o)))},Bn)}function Da(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Da(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Md(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Da(e))&&(r&&(r+=" "),r+=t);return r}function kb(e){return typeof e=="object"?Md(e):e??""}function Pd(e,t,n){var r=e==null?"":""+e;return t&&(r=r?r+" "+t:t),r===""?null:r}function qd(e,t){return e==null?null:String(e)}function Ub(e,t,n,r,o,i){var s=e.__className;if(s!==n||s===void 0){var c=Pd(n,r);c==null?e.removeAttribute("class"):e.className=c,e.__className=n}return i}function Nb(e,t,n,r){var o=e.__style;if(o!==t){var i=qd(t);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}return r}const Vd=Symbol("is custom element"),Dd=Symbol("is html");function Rb(e,t){var n=is(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Ob(e,t){var n=is(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function Cb(e,t,n,r){var o=is(e);o[t]!==(o[t]=n)&&(t==="loading"&&(e[Mu]=n),n==null?e.removeAttribute(t):typeof n!="string"&&jd(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function is(e){return e.__attributes??(e.__attributes={[Vd]:e.nodeName.includes("-"),[Dd]:e.namespaceURI===Lu})}var sc=new Map;function jd(e){var t=e.getAttribute("is")||e.nodeName,n=sc.get(t);if(n)return n;sc.set(t,n=[]);for(var r,o=e,i=Element.prototype;i!==o;){r=Uu(o);for(var s in r)r[s].set&&n.push(s);o=ea(o)}return n}function Hb(e,t,n=t){var r=new WeakSet;Ba(e,"input",async o=>{var i=o?e.defaultValue:e.value;if(i=zo(e)?Fo(i):i,n(i),G!==null&&r.add(G),await Sd(),i!==(i=t())){var s=e.selectionStart,c=e.selectionEnd,a=e.value.length;if(e.value=i??"",c!==null){var f=e.value.length;s===c&&c===a&&f>a?(e.selectionStart=f,e.selectionEnd=f):(e.selectionStart=s,e.selectionEnd=Math.min(c,f))}}}),Un(t)==null&&e.value&&(n(zo(e)?Fo(e.value):e.value),G!==null&&r.add(G)),_o(()=>{var o=t();if(e===document.activeElement){var i=qr??G;if(r.has(i))return}zo(e)&&o===Fo(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function Mb(e,t,n=t){Ba(e,"change",r=>{var o=r?e.defaultChecked:e.checked;n(o)}),Un(t)==null&&n(e.checked),_o(()=>{var r=t();e.checked=!!r})}function zo(e){var t=e.type;return t==="number"||t==="range"}function Fo(e){return e===""?null:+e}function cc(e,t){return e===t||(e==null?void 0:e[wr])===t}function Pb(e={},t,n,r){return md(()=>{var o,i;return _o(()=>{o=i,i=[],Un(()=>{e!==n(...i)&&(t(e,...i),o&&cc(n(...o),e)&&t(null,...o))})}),()=>{nr(()=>{i&&cc(n(...i),e)&&t(null,...i)})}}),e}function ss(e,t,n){if(e==null)return t(void 0),n&&n(void 0),Gt;const r=Un(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Cn=[];function zd(e,t){return{subscribe:Fd(e,t).subscribe}}function Fd(e,t=Gt){let n=null;const r=new Set;function o(c){if(sa(e,c)&&(e=c,n)){const a=!Cn.length;for(const f of r)f[1](),Cn.push(f,e);if(a){for(let f=0;f<Cn.length;f+=2)Cn[f][0](Cn[f+1]);Cn.length=0}}}function i(c){o(c(e))}function s(c,a=Gt){const f=[c,a];return r.add(f),r.size===1&&(n=t(o,i)||Gt),c(e),()=>{r.delete(f),r.size===0&&n&&(n(),n=null)}}return{set:o,update:i,subscribe:s}}function qb(e,t,n){const r=!Array.isArray(e),o=r?[e]:e;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return zd(n,(s,c)=>{let a=!1;const f=[];let u=0,l=Gt;const d=()=>{if(u)return;l();const p=t(r?f[0]:f,s,c);i?s(p):l=typeof p=="function"?p:Gt},h=o.map((p,g)=>ss(p,y=>{f[g]=y,u&=~(1<<g),a&&d()},()=>{u|=1<<g}));return a=!0,d(),function(){ta(h),l(),a=!1}})}function Kd(e){let t;return ss(e,n=>t=n)(),t}let Si=Symbol();function Vb(e,t,n){const r=n[t]??(n[t]={store:null,source:va(void 0),unsubscribe:Gt});if(r.store!==e&&!(Si in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Gt;else{var o=!0;r.unsubscribe=ss(e,i=>{o?r.source.v=i:zt(r.source,i)}),o=!1}return e&&Si in n?Kd(e):ct(r.source)}function Db(){const e={};function t(){rs(()=>{for(var n in e)e[n].unsubscribe();Qc(e,Si,{enumerable:!1,value:!0})})}return[e,t]}const Zd={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(fr(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let o=e.props[r];fr(o)&&(o=o());const i=En(o,t);if(i&&i.set)return i.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(fr(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const o=En(r,t);return o&&!o.configurable&&(o.configurable=!0),o}}},has(e,t){if(t===wr||t===Hu)return!1;for(let n of e.props)if(fr(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(fr(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function jb(...e){return new Proxy({props:e},Zd)}function zb(e,t,n,r){var o=r,i=!0,s=()=>(i&&(i=!1,o=r),o),c;c=e[t],c===void 0&&r!==void 0&&(c=s());var a;return a=()=>{var f=e[t];return f===void 0?s():(i=!0,f)},a}function ac(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function ja(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Wd(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ac(e.outputLen),ac(e.blockLen)}function Jr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Gd(e,t){ja(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Ko=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const za=e=>e instanceof Uint8Array,Zo=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Xe=(e,t)=>e<<32-t|e>>>t,Yd=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Yd)throw new Error("Non little-endian hardware is not supported");function Xd(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function cs(e){if(typeof e=="string"&&(e=Xd(e)),!za(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Jd(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!za(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}let Fa=class{clone(){return this._cloneInto()}};function Qd(e){const t=r=>e().update(cs(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Ka(e=32){if(Ko&&typeof Ko.getRandomValues=="function")return Ko.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function eh(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),c=Number(n&i),a=r?4:0,f=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+f,c,r)}let th=class extends Fa{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Zo(this.buffer)}update(t){Jr(this);const{view:n,buffer:r,blockLen:o}=this;t=cs(t);const i=t.length;for(let s=0;s<i;){const c=Math.min(o-this.pos,i-s);if(c===o){const a=Zo(t);for(;o<=i-s;s+=o)this.process(a,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Jr(this),Gd(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:i}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(r,0),s=0);for(let l=s;l<o;l++)n[l]=0;eh(r,o-8,BigInt(this.length*8),i),this.process(r,0);const c=Zo(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=a/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<f;l++)c.setUint32(4*l,u[l],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:i,destroyed:s,pos:c}=this;return t.length=o,t.pos=c,t.finished=i,t.destroyed=s,o%n&&t.buffer.set(r),t}};const nh=(e,t,n)=>e&t^~e&n,rh=(e,t,n)=>e&t^e&n^t&n,oh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ct=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ht=new Uint32Array(64);let ih=class extends th{constructor(){super(64,32,8,!1),this.A=Ct[0]|0,this.B=Ct[1]|0,this.C=Ct[2]|0,this.D=Ct[3]|0,this.E=Ct[4]|0,this.F=Ct[5]|0,this.G=Ct[6]|0,this.H=Ct[7]|0}get(){const{A:t,B:n,C:r,D:o,E:i,F:s,G:c,H:a}=this;return[t,n,r,o,i,s,c,a]}set(t,n,r,o,i,s,c,a){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=c|0,this.H=a|0}process(t,n){for(let l=0;l<16;l++,n+=4)Ht[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const d=Ht[l-15],h=Ht[l-2],p=Xe(d,7)^Xe(d,18)^d>>>3,g=Xe(h,17)^Xe(h,19)^h>>>10;Ht[l]=g+Ht[l-7]+p+Ht[l-16]|0}let{A:r,B:o,C:i,D:s,E:c,F:a,G:f,H:u}=this;for(let l=0;l<64;l++){const d=Xe(c,6)^Xe(c,11)^Xe(c,25),h=u+d+nh(c,a,f)+oh[l]+Ht[l]|0,g=(Xe(r,2)^Xe(r,13)^Xe(r,22))+rh(r,o,i)|0;u=f,f=a,a=c,c=s+h|0,s=i,i=o,o=r,r=h+g|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,c=c+this.E|0,a=a+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(r,o,i,s,c,a,f,u)}roundClean(){Ht.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Ti=Qd(()=>new ih);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Za=BigInt(0),Bo=BigInt(1),sh=BigInt(2),So=e=>e instanceof Uint8Array,ch=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Xn(e){if(!So(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=ch[e[n]];return t}function Wa(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function as(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Jn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,i=e.slice(o,o+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function $e(e){return as(Xn(e))}function fs(e){if(!So(e))throw new Error("Uint8Array expected");return as(Xn(Uint8Array.from(e).reverse()))}function en(e,t){return Jn(e.toString(16).padStart(t*2,"0"))}function ls(e,t){return en(e,t).reverse()}function ah(e){return Jn(Wa(e))}function we(e,t,n){let r;if(typeof t=="string")try{r=Jn(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(So(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function $n(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!So(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function fh(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function lh(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function uh(e){let t;for(t=0;e>Za;e>>=Bo,t+=1);return t}function dh(e,t){return e>>BigInt(t)&Bo}const hh=(e,t,n)=>e|(n?Bo:Za)<<BigInt(t),us=e=>(sh<<BigInt(e-1))-Bo,Wo=e=>new Uint8Array(e),fc=e=>Uint8Array.from(e);function Ga(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Wo(e),o=Wo(e),i=0;const s=()=>{r.fill(1),o.fill(0),i=0},c=(...l)=>n(o,r,...l),a=(l=Wo())=>{o=c(fc([0]),l),r=c(),l.length!==0&&(o=c(fc([1]),l),r=c())},f=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const d=[];for(;l<t;){r=c();const h=r.slice();d.push(h),l+=r.length}return $n(...d)};return(l,d)=>{s(),a(l);let h;for(;!(h=d(f()));)a();return s(),h}}const gh={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Lr(e,t,n={}){const r=(o,i,s)=>{const c=gh[i];if(typeof c!="function")throw new Error(`Invalid validator "${i}", expected function`);const a=e[o];if(!(s&&a===void 0)&&!c(a,e))throw new Error(`Invalid param ${String(o)}=${a} (${typeof a}), expected ${i}`)};for(const[o,i]of Object.entries(t))r(o,i,!1);for(const[o,i]of Object.entries(n))r(o,i,!0);return e}const ph=Object.freeze(Object.defineProperty({__proto__:null,bitGet:dh,bitLen:uh,bitMask:us,bitSet:hh,bytesToHex:Xn,bytesToNumberBE:$e,bytesToNumberLE:fs,concatBytes:$n,createHmacDrbg:Ga,ensureBytes:we,equalBytes:fh,hexToBytes:Jn,hexToNumber:as,numberToBytesBE:en,numberToBytesLE:ls,numberToHexUnpadded:Wa,numberToVarBytesBE:ah,utf8ToBytes:lh,validateObject:Lr},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const le=BigInt(0),ie=BigInt(1),cn=BigInt(2),wh=BigInt(3),Ii=BigInt(4),lc=BigInt(5),uc=BigInt(8);BigInt(9);BigInt(16);function he(e,t){const n=e%t;return n>=le?n:t+n}function yh(e,t,n){if(n<=le||t<le)throw new Error("Expected power/modulo > 0");if(n===ie)return le;let r=ie;for(;t>le;)t&ie&&(r=r*e%n),e=e*e%n,t>>=ie;return r}function He(e,t,n){let r=e;for(;t-- >le;)r*=r,r%=n;return r}function $i(e,t){if(e===le||t<=le)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=he(e,t),r=t,o=le,i=ie;for(;n!==le;){const c=r/n,a=r%n,f=o-i*c;r=n,n=a,o=i,i=f}if(r!==ie)throw new Error("invert: does not exist");return he(o,t)}function bh(e){const t=(e-ie)/cn;let n,r,o;for(n=e-ie,r=0;n%cn===le;n/=cn,r++);for(o=cn;o<e&&yh(o,t,e)!==e-ie;o++);if(r===1){const s=(e+ie)/Ii;return function(a,f){const u=a.pow(f,s);if(!a.eql(a.sqr(u),f))throw new Error("Cannot find square root");return u}}const i=(n+ie)/cn;return function(c,a){if(c.pow(a,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let f=r,u=c.pow(c.mul(c.ONE,o),n),l=c.pow(a,i),d=c.pow(a,n);for(;!c.eql(d,c.ONE);){if(c.eql(d,c.ZERO))return c.ZERO;let h=1;for(let g=c.sqr(d);h<f&&!c.eql(g,c.ONE);h++)g=c.sqr(g);const p=c.pow(u,ie<<BigInt(f-h-1));u=c.sqr(p),l=c.mul(l,p),d=c.mul(d,u),f=h}return l}}function vh(e){if(e%Ii===wh){const t=(e+ie)/Ii;return function(r,o){const i=r.pow(o,t);if(!r.eql(r.sqr(i),o))throw new Error("Cannot find square root");return i}}if(e%uc===lc){const t=(e-lc)/uc;return function(r,o){const i=r.mul(o,cn),s=r.pow(i,t),c=r.mul(o,s),a=r.mul(r.mul(c,cn),s),f=r.mul(c,r.sub(a,r.ONE));if(!r.eql(r.sqr(f),o))throw new Error("Cannot find square root");return f}}return bh(e)}const mh=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Eh(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=mh.reduce((r,o)=>(r[o]="function",r),t);return Lr(e,n)}function xh(e,t,n){if(n<le)throw new Error("Expected power > 0");if(n===le)return e.ONE;if(n===ie)return t;let r=e.ONE,o=t;for(;n>le;)n&ie&&(r=e.mul(r,o)),o=e.sqr(o),n>>=ie;return r}function _h(e,t){const n=new Array(t.length),r=t.reduce((i,s,c)=>e.is0(s)?i:(n[c]=i,e.mul(i,s)),e.ONE),o=e.inv(r);return t.reduceRight((i,s,c)=>e.is0(s)?i:(n[c]=e.mul(i,n[c]),e.mul(i,s)),o),n}function Ya(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Ah(e,t,n=!1,r={}){if(e<=le)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:i}=Ya(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=vh(e),c=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:us(o),ZERO:le,ONE:ie,create:a=>he(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof a}`);return le<=a&&a<e},is0:a=>a===le,isOdd:a=>(a&ie)===ie,neg:a=>he(-a,e),eql:(a,f)=>a===f,sqr:a=>he(a*a,e),add:(a,f)=>he(a+f,e),sub:(a,f)=>he(a-f,e),mul:(a,f)=>he(a*f,e),pow:(a,f)=>xh(c,a,f),div:(a,f)=>he(a*$i(f,e),e),sqrN:a=>a*a,addN:(a,f)=>a+f,subN:(a,f)=>a-f,mulN:(a,f)=>a*f,inv:a=>$i(a,e),sqrt:r.sqrt||(a=>s(c,a)),invertBatch:a=>_h(c,a),cmov:(a,f,u)=>u?f:a,toBytes:a=>n?ls(a,i):en(a,i),fromBytes:a=>{if(a.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${a.length}`);return n?fs(a):$e(a)}});return Object.freeze(c)}function Xa(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Ja(e){const t=Xa(e);return t+Math.ceil(t/2)}function Bh(e,t,n=!1){const r=e.length,o=Xa(t),i=Ja(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const s=n?$e(e):fs(e),c=he(s,t-ie)+ie;return n?ls(c,o):en(c,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sh=BigInt(0),Go=BigInt(1);function Th(e,t){const n=(o,i)=>{const s=i.negate();return o?s:i},r=o=>{const i=Math.ceil(t/o)+1,s=2**(o-1);return{windows:i,windowSize:s}};return{constTimeNegate:n,unsafeLadder(o,i){let s=e.ZERO,c=o;for(;i>Sh;)i&Go&&(s=s.add(c)),c=c.double(),i>>=Go;return s},precomputeWindow(o,i){const{windows:s,windowSize:c}=r(i),a=[];let f=o,u=f;for(let l=0;l<s;l++){u=f,a.push(u);for(let d=1;d<c;d++)u=u.add(f),a.push(u);f=u.double()}return a},wNAF(o,i,s){const{windows:c,windowSize:a}=r(o);let f=e.ZERO,u=e.BASE;const l=BigInt(2**o-1),d=2**o,h=BigInt(o);for(let p=0;p<c;p++){const g=p*a;let y=Number(s&l);s>>=h,y>a&&(y-=d,s+=Go);const m=g,I=g+Math.abs(y)-1,$=p%2!==0,M=y<0;y===0?u=u.add(n($,i[m])):f=f.add(n(M,i[I]))}return{p:f,f:u}},wNAFCached(o,i,s,c){const a=o._WINDOW_SIZE||1;let f=i.get(o);return f||(f=this.precomputeWindow(o,a),a!==1&&i.set(o,c(f))),this.wNAF(a,f,s)}}}function Qa(e){return Eh(e.Fp),Lr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ya(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ih(e){const t=Qa(e);Lr(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:$h,hexToBytes:Lh}=ph,ln={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=ln;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:$h(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=ln,n=typeof e=="string"?Lh(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:i}=ln._parseInt(n.subarray(2)),{d:s,l:c}=ln._parseInt(i);if(c.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s}},hexFromSig(e){const t=f=>Number.parseInt(f[0],16)&8?"00"+f:f,n=f=>{const u=f.toString(16);return u.length&1?`0${u}`:u},r=t(n(e.s)),o=t(n(e.r)),i=r.length/2,s=o.length/2,c=n(i),a=n(s);return`30${n(s+i+4)}02${a}${o}02${c}${r}`}},bt=BigInt(0),je=BigInt(1);BigInt(2);const dc=BigInt(3);BigInt(4);function kh(e){const t=Ih(e),{Fp:n}=t,r=t.toBytes||((p,g,y)=>{const m=g.toAffine();return $n(Uint8Array.from([4]),n.toBytes(m.x),n.toBytes(m.y))}),o=t.fromBytes||(p=>{const g=p.subarray(1),y=n.fromBytes(g.subarray(0,n.BYTES)),m=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:y,y:m}});function i(p){const{a:g,b:y}=t,m=n.sqr(p),I=n.mul(m,p);return n.add(n.add(I,n.mul(p,g)),y)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function s(p){return typeof p=="bigint"&&bt<p&&p<t.n}function c(p){if(!s(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function a(p){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:m,n:I}=t;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=Xn(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let $;try{$=typeof p=="bigint"?p:$e(we("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return m&&($=he($,I)),c($),$}const f=new Map;function u(p){if(!(p instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(g,y,m){if(this.px=g,this.py=y,this.pz=m,g==null||!n.isValid(g))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(m==null||!n.isValid(m))throw new Error("z required")}static fromAffine(g){const{x:y,y:m}=g||{};if(!g||!n.isValid(y)||!n.isValid(m))throw new Error("invalid affine point");if(g instanceof l)throw new Error("projective point not allowed");const I=$=>n.eql($,n.ZERO);return I(y)&&I(m)?l.ZERO:new l(y,m,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=n.invertBatch(g.map(m=>m.pz));return g.map((m,I)=>m.toAffine(y[I])).map(l.fromAffine)}static fromHex(g){const y=l.fromAffine(o(we("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return l.BASE.multiply(a(g))}_setWindowSize(g){this._WINDOW_SIZE=g,f.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!n.isValid(g)||!n.isValid(y))throw new Error("bad point: x or y not FE");const m=n.sqr(y),I=i(g);if(!n.eql(m,I))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:y,py:m,pz:I}=this,{px:$,py:M,pz:P}=g,N=n.eql(n.mul(y,P),n.mul($,I)),O=n.eql(n.mul(m,P),n.mul(M,I));return N&&O}negate(){return new l(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:y}=t,m=n.mul(y,dc),{px:I,py:$,pz:M}=this;let P=n.ZERO,N=n.ZERO,O=n.ZERO,C=n.mul(I,I),H=n.mul($,$),q=n.mul(M,M),_=n.mul(I,$);return _=n.add(_,_),O=n.mul(I,M),O=n.add(O,O),P=n.mul(g,O),N=n.mul(m,q),N=n.add(P,N),P=n.sub(H,N),N=n.add(H,N),N=n.mul(P,N),P=n.mul(_,P),O=n.mul(m,O),q=n.mul(g,q),_=n.sub(C,q),_=n.mul(g,_),_=n.add(_,O),O=n.add(C,C),C=n.add(O,C),C=n.add(C,q),C=n.mul(C,_),N=n.add(N,C),q=n.mul($,M),q=n.add(q,q),C=n.mul(q,_),P=n.sub(P,C),O=n.mul(q,H),O=n.add(O,O),O=n.add(O,O),new l(P,N,O)}add(g){u(g);const{px:y,py:m,pz:I}=this,{px:$,py:M,pz:P}=g;let N=n.ZERO,O=n.ZERO,C=n.ZERO;const H=t.a,q=n.mul(t.b,dc);let _=n.mul(y,$),x=n.mul(m,M),b=n.mul(I,P),E=n.add(y,m),w=n.add($,M);E=n.mul(E,w),w=n.add(_,x),E=n.sub(E,w),w=n.add(y,I);let v=n.add($,P);return w=n.mul(w,v),v=n.add(_,b),w=n.sub(w,v),v=n.add(m,I),N=n.add(M,P),v=n.mul(v,N),N=n.add(x,b),v=n.sub(v,N),C=n.mul(H,w),N=n.mul(q,b),C=n.add(N,C),N=n.sub(x,C),C=n.add(x,C),O=n.mul(N,C),x=n.add(_,_),x=n.add(x,_),b=n.mul(H,b),w=n.mul(q,w),x=n.add(x,b),b=n.sub(_,b),b=n.mul(H,b),w=n.add(w,b),_=n.mul(x,w),O=n.add(O,_),_=n.mul(v,w),N=n.mul(E,N),N=n.sub(N,_),_=n.mul(E,x),C=n.mul(v,C),C=n.add(C,_),new l(N,O,C)}subtract(g){return this.add(g.negate())}is0(){return this.equals(l.ZERO)}wNAF(g){return h.wNAFCached(this,f,g,y=>{const m=n.invertBatch(y.map(I=>I.pz));return y.map((I,$)=>I.toAffine(m[$])).map(l.fromAffine)})}multiplyUnsafe(g){const y=l.ZERO;if(g===bt)return y;if(c(g),g===je)return this;const{endo:m}=t;if(!m)return h.unsafeLadder(this,g);let{k1neg:I,k1:$,k2neg:M,k2:P}=m.splitScalar(g),N=y,O=y,C=this;for(;$>bt||P>bt;)$&je&&(N=N.add(C)),P&je&&(O=O.add(C)),C=C.double(),$>>=je,P>>=je;return I&&(N=N.negate()),M&&(O=O.negate()),O=new l(n.mul(O.px,m.beta),O.py,O.pz),N.add(O)}multiply(g){c(g);let y=g,m,I;const{endo:$}=t;if($){const{k1neg:M,k1:P,k2neg:N,k2:O}=$.splitScalar(y);let{p:C,f:H}=this.wNAF(P),{p:q,f:_}=this.wNAF(O);C=h.constTimeNegate(M,C),q=h.constTimeNegate(N,q),q=new l(n.mul(q.px,$.beta),q.py,q.pz),m=C.add(q),I=H.add(_)}else{const{p:M,f:P}=this.wNAF(y);m=M,I=P}return l.normalizeZ([m,I])[0]}multiplyAndAddUnsafe(g,y,m){const I=l.BASE,$=(P,N)=>N===bt||N===je||!P.equals(I)?P.multiplyUnsafe(N):P.multiply(N),M=$(this,y).add($(g,m));return M.is0()?void 0:M}toAffine(g){const{px:y,py:m,pz:I}=this,$=this.is0();g==null&&(g=$?n.ONE:n.inv(I));const M=n.mul(y,g),P=n.mul(m,g),N=n.mul(I,g);if($)return{x:n.ZERO,y:n.ZERO};if(!n.eql(N,n.ONE))throw new Error("invZ was invalid");return{x:M,y:P}}isTorsionFree(){const{h:g,isTorsionFree:y}=t;if(g===je)return!0;if(y)return y(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=t;return g===je?this:y?y(l,this):this.multiplyUnsafe(t.h)}toRawBytes(g=!0){return this.assertValidity(),r(l,this,g)}toHex(g=!0){return Xn(this.toRawBytes(g))}}l.BASE=new l(t.Gx,t.Gy,n.ONE),l.ZERO=new l(n.ZERO,n.ONE,n.ZERO);const d=t.nBitLength,h=Th(l,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:a,weierstrassEquation:i,isWithinCurveOrder:s}}function Uh(e){const t=Qa(e);return Lr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Nh(e){const t=Uh(e),{Fp:n,n:r}=t,o=n.BYTES+1,i=2*n.BYTES+1;function s(w){return bt<w&&w<n.ORDER}function c(w){return he(w,r)}function a(w){return $i(w,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:d}=kh({...t,toBytes(w,v,A){const S=v.toAffine(),B=n.toBytes(S.x),k=$n;return A?k(Uint8Array.from([v.hasEvenY()?2:3]),B):k(Uint8Array.from([4]),B,n.toBytes(S.y))},fromBytes(w){const v=w.length,A=w[0],S=w.subarray(1);if(v===o&&(A===2||A===3)){const B=$e(S);if(!s(B))throw new Error("Point is not on curve");const k=l(B);let T=n.sqrt(k);const R=(T&je)===je;return(A&1)===1!==R&&(T=n.neg(T)),{x:B,y:T}}else if(v===i&&A===4){const B=n.fromBytes(S.subarray(0,n.BYTES)),k=n.fromBytes(S.subarray(n.BYTES,2*n.BYTES));return{x:B,y:k}}else throw new Error(`Point of length ${v} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}}),h=w=>Xn(en(w,t.nByteLength));function p(w){const v=r>>je;return w>v}function g(w){return p(w)?c(-w):w}const y=(w,v,A)=>$e(w.slice(v,A));class m{constructor(v,A,S){this.r=v,this.s=A,this.recovery=S,this.assertValidity()}static fromCompact(v){const A=t.nByteLength;return v=we("compactSignature",v,A*2),new m(y(v,0,A),y(v,A,2*A))}static fromDER(v){const{r:A,s:S}=ln.toSig(we("DER",v));return new m(A,S)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(v){return new m(this.r,this.s,v)}recoverPublicKey(v){const{r:A,s:S,recovery:B}=this,k=O(we("msgHash",v));if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");const T=B===2||B===3?A+t.n:A;if(T>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const R=(B&1)===0?"02":"03",z=f.fromHex(R+h(T)),D=a(T),j=c(-k*D),K=c(S*D),Z=f.BASE.multiplyAndAddUnsafe(z,j,K);if(!Z)throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Jn(this.toDERHex())}toDERHex(){return ln.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Jn(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const I={isValidPrivateKey(w){try{return u(w),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const w=Ja(t.n);return Bh(t.randomBytes(w),t.n)},precompute(w=8,v=f.BASE){return v._setWindowSize(w),v.multiply(BigInt(3)),v}};function $(w,v=!0){return f.fromPrivateKey(w).toRawBytes(v)}function M(w){const v=w instanceof Uint8Array,A=typeof w=="string",S=(v||A)&&w.length;return v?S===o||S===i:A?S===2*o||S===2*i:w instanceof f}function P(w,v,A=!0){if(M(w))throw new Error("first arg must be private key");if(!M(v))throw new Error("second arg must be public key");return f.fromHex(v).multiply(u(w)).toRawBytes(A)}const N=t.bits2int||function(w){const v=$e(w),A=w.length*8-t.nBitLength;return A>0?v>>BigInt(A):v},O=t.bits2int_modN||function(w){return c(N(w))},C=us(t.nBitLength);function H(w){if(typeof w!="bigint")throw new Error("bigint expected");if(!(bt<=w&&w<C))throw new Error(`bigint expected < 2^${t.nBitLength}`);return en(w,t.nByteLength)}function q(w,v,A=_){if(["recovered","canonical"].some(W=>W in A))throw new Error("sign() legacy options not supported");const{hash:S,randomBytes:B}=t;let{lowS:k,prehash:T,extraEntropy:R}=A;k==null&&(k=!0),w=we("msgHash",w),T&&(w=we("prehashed msgHash",S(w)));const z=O(w),D=u(v),j=[H(D),H(z)];if(R!=null){const W=R===!0?B(n.BYTES):R;j.push(we("extraEntropy",W))}const K=$n(...j),Z=z;function Q(W){const ne=N(W);if(!d(ne))return;const nn=a(ne),ut=f.BASE.multiply(ne).toAffine(),Ae=c(ut.x);if(Ae===bt)return;const Rn=c(nn*c(Z+Ae*D));if(Rn===bt)return;let Ws=(ut.x===Ae?0:2)|Number(ut.y&je),Gs=Rn;return k&&p(Rn)&&(Gs=g(Rn),Ws^=1),new m(Ae,Gs,Ws)}return{seed:K,k2sig:Q}}const _={lowS:t.lowS,prehash:!1},x={lowS:t.lowS,prehash:!1};function b(w,v,A=_){const{seed:S,k2sig:B}=q(w,v,A),k=t;return Ga(k.hash.outputLen,k.nByteLength,k.hmac)(S,B)}f.BASE._setWindowSize(8);function E(w,v,A,S=x){var ut;const B=w;if(v=we("msgHash",v),A=we("publicKey",A),"strict"in S)throw new Error("options.strict was renamed to lowS");const{lowS:k,prehash:T}=S;let R,z;try{if(typeof B=="string"||B instanceof Uint8Array)try{R=m.fromDER(B)}catch(Ae){if(!(Ae instanceof ln.Err))throw Ae;R=m.fromCompact(B)}else if(typeof B=="object"&&typeof B.r=="bigint"&&typeof B.s=="bigint"){const{r:Ae,s:Rn}=B;R=new m(Ae,Rn)}else throw new Error("PARSE");z=f.fromHex(A)}catch(Ae){if(Ae.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(k&&R.hasHighS())return!1;T&&(v=t.hash(v));const{r:D,s:j}=R,K=O(v),Z=a(j),Q=c(K*Z),W=c(D*Z),ne=(ut=f.BASE.multiplyAndAddUnsafe(z,Q,W))==null?void 0:ut.toAffine();return ne?c(ne.x)===D:!1}return{CURVE:t,getPublicKey:$,getSharedSecret:P,sign:b,verify:E,ProjectivePoint:f,Signature:m,utils:I}}let ef=class extends Fa{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Wd(t);const r=cs(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(t){return Jr(this),this.iHash.update(t),this}digestInto(t){Jr(this),ja(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:i,blockLen:s,outputLen:c}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const tf=(e,t,n)=>new ef(e,t).update(n).digest();tf.create=(e,t)=>new ef(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Rh(e){return{hash:e,hmac:(t,...n)=>tf(e,t,Jd(...n)),randomBytes:Ka}}function Oh(e,t){const n=r=>Nh({...e,...Rh(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const To=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Qr=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),nf=BigInt(1),eo=BigInt(2),hc=(e,t)=>(e+t/eo)/t;function rf(e){const t=To,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),c=BigInt(44),a=BigInt(88),f=e*e*e%t,u=f*f*e%t,l=He(u,n,t)*u%t,d=He(l,n,t)*u%t,h=He(d,eo,t)*f%t,p=He(h,o,t)*h%t,g=He(p,i,t)*p%t,y=He(g,c,t)*g%t,m=He(y,a,t)*y%t,I=He(m,c,t)*g%t,$=He(I,n,t)*u%t,M=He($,s,t)*p%t,P=He(M,r,t)*f%t,N=He(P,eo,t);if(!Li.eql(Li.sqr(N),e))throw new Error("Cannot find square root");return N}const Li=Ah(To,void 0,void 0,{sqrt:rf}),or=Oh({a:BigInt(0),b:BigInt(7),Fp:Li,n:Qr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Qr,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-nf*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,s=BigInt("0x100000000000000000000000000000000"),c=hc(i*e,t),a=hc(-r*e,t);let f=he(e-c*n-a*o,t),u=he(-c*r-a*i,t);const l=f>s,d=u>s;if(l&&(f=t-f),d&&(u=t-u),f>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:f,k2neg:d,k2:u}}}},Ti),Io=BigInt(0),of=e=>typeof e=="bigint"&&Io<e&&e<To,Ch=e=>typeof e=="bigint"&&Io<e&&e<Qr,gc={};function to(e,...t){let n=gc[e];if(n===void 0){const r=Ti(Uint8Array.from(e,o=>o.charCodeAt(0)));n=$n(r,r),gc[e]=n}return Ti($n(n,...t))}const ds=e=>e.toRawBytes(!0).slice(1),ki=e=>en(e,32),Yo=e=>he(e,To),_r=e=>he(e,Qr),hs=or.ProjectivePoint,Hh=(e,t,n)=>hs.BASE.multiplyAndAddUnsafe(e,t,n);function Ui(e){let t=or.utils.normPrivateKeyToScalar(e),n=hs.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:_r(-t),bytes:ds(n)}}function sf(e){if(!of(e))throw new Error("bad x: need 0 < x < p");const t=Yo(e*e),n=Yo(t*e+BigInt(7));let r=rf(n);r%eo!==Io&&(r=Yo(-r));const o=new hs(e,r,nf);return o.assertValidity(),o}function cf(...e){return _r($e(to("BIP0340/challenge",...e)))}function Mh(e){return Ui(e).bytes}function Ph(e,t,n=Ka(32)){const r=we("message",e),{bytes:o,scalar:i}=Ui(t),s=we("auxRand",n,32),c=ki(i^$e(to("BIP0340/aux",s))),a=to("BIP0340/nonce",c,o,r),f=_r($e(a));if(f===Io)throw new Error("sign failed: k is zero");const{bytes:u,scalar:l}=Ui(f),d=cf(u,o,r),h=new Uint8Array(64);if(h.set(u,0),h.set(ki(_r(l+d*i)),32),!af(h,r,o))throw new Error("sign: Invalid signature produced");return h}function af(e,t,n){const r=we("signature",e,64),o=we("message",t),i=we("publicKey",n,32);try{const s=sf($e(i)),c=$e(r.subarray(0,32));if(!of(c))return!1;const a=$e(r.subarray(32,64));if(!Ch(a))return!1;const f=cf(ki(c),ds(s),o),u=Hh(s,a,_r(-f));return!(!u||!u.hasEvenY()||u.toAffine().x!==c)}catch{return!1}}const lr={getPublicKey:Mh,sign:Ph,verify:af,utils:{randomPrivateKey:or.utils.randomPrivateKey,lift_x:sf,pointToBytes:ds,numberToBytesBE:en,bytesToNumberBE:$e,taggedHash:to,mod:he}},Xo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gs=e=>e instanceof Uint8Array,Jo=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),jr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Je=(e,t)=>e<<32-t|e>>>t,qh=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!qh)throw new Error("Non little-endian hardware is not supported");const Vh=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function oe(e){if(!gs(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Vh[e[n]];return t}function Ce(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,i=e.slice(o,o+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function Dh(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Ln(e){if(typeof e=="string"&&(e=Dh(e)),!gs(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function ir(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!gs(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}let ff=class{clone(){return this._cloneInto()}};const jh=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function lf(e,t){if(t!==void 0&&(typeof t!="object"||!jh(t)))throw new Error("Options should be object or undefined");return Object.assign(e,t)}function uf(e){const t=r=>e().update(Ln(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function no(e=32){if(Xo&&typeof Xo.getRandomValues=="function")return Xo.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Ni(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function zh(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function df(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Fh(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ni(e.outputLen),Ni(e.blockLen)}function Kh(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Zh(e,t){df(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const ce={number:Ni,bool:zh,bytes:df,hash:Fh,exists:Kh,output:Zh};function Wh(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),c=Number(n&i),a=r?4:0,f=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+f,c,r)}class Gh extends ff{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=jr(this.buffer)}update(t){ce.exists(this);const{view:n,buffer:r,blockLen:o}=this;t=Ln(t);const i=t.length;for(let s=0;s<i;){const c=Math.min(o-this.pos,i-s);if(c===o){const a=jr(t);for(;o<=i-s;s+=o)this.process(a,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ce.exists(this),ce.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:i}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(r,0),s=0);for(let l=s;l<o;l++)n[l]=0;Wh(r,o-8,BigInt(this.length*8),i),this.process(r,0);const c=jr(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=a/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<f;l++)c.setUint32(4*l,u[l],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:i,destroyed:s,pos:c}=this;return t.length=o,t.pos=c,t.finished=i,t.destroyed=s,o%n&&t.buffer.set(r),t}}const Yh=(e,t,n)=>e&t^~e&n,Xh=(e,t,n)=>e&t^e&n^t&n,Jh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Mt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Pt=new Uint32Array(64);let hf=class extends Gh{constructor(){super(64,32,8,!1),this.A=Mt[0]|0,this.B=Mt[1]|0,this.C=Mt[2]|0,this.D=Mt[3]|0,this.E=Mt[4]|0,this.F=Mt[5]|0,this.G=Mt[6]|0,this.H=Mt[7]|0}get(){const{A:t,B:n,C:r,D:o,E:i,F:s,G:c,H:a}=this;return[t,n,r,o,i,s,c,a]}set(t,n,r,o,i,s,c,a){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=c|0,this.H=a|0}process(t,n){for(let l=0;l<16;l++,n+=4)Pt[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const d=Pt[l-15],h=Pt[l-2],p=Je(d,7)^Je(d,18)^d>>>3,g=Je(h,17)^Je(h,19)^h>>>10;Pt[l]=g+Pt[l-7]+p+Pt[l-16]|0}let{A:r,B:o,C:i,D:s,E:c,F:a,G:f,H:u}=this;for(let l=0;l<64;l++){const d=Je(c,6)^Je(c,11)^Je(c,25),h=u+d+Yh(c,a,f)+Jh[l]+Pt[l]|0,g=(Je(r,2)^Je(r,13)^Je(r,22))+Xh(r,o,i)|0;u=f,f=a,a=c,c=s+h|0,s=i,i=o,o=r,r=h+g|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,c=c+this.E|0,a=a+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(r,o,i,s,c,a,f,u)}roundClean(){Pt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};class Qh extends hf{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Lt=uf(()=>new hf);uf(()=>new Qh);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function sr(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function kt(...e){const t=(o,i)=>s=>o(i(s)),n=Array.from(e).reverse().reduce((o,i)=>o?t(o,i.encode):i.encode,void 0),r=e.reduce((o,i)=>o?t(o,i.decode):i.decode,void 0);return{encode:n,decode:r}}function Ut(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(sr(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function Nt(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function $o(e,t="="){if(sr(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of n)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function gf(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function pc(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],i=Array.from(e);for(i.forEach(s=>{if(sr(s),s<0||s>=t)throw new Error(`Wrong integer: ${s}`)});;){let s=0,c=!0;for(let a=r;a<i.length;a++){const f=i[a],u=t*s+f;if(!Number.isSafeInteger(u)||t*s/t!==s||u-f!==t*s)throw new Error("convertRadix: carry overflow");if(s=u%n,i[a]=Math.floor(u/n),!Number.isSafeInteger(i[a])||i[a]*n+s!==u)throw new Error("convertRadix: carry overflow");if(c)i[a]?c=!1:r=a;else continue}if(o.push(s),c)break}for(let s=0;s<e.length-1&&e[s]===0;s++)o.push(0);return o.reverse()}const pf=(e,t)=>t?pf(t,e%t):e,ro=(e,t)=>e+(t-pf(e,t));function Ri(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(ro(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${ro(t,n)}`);let o=0,i=0;const s=2**n-1,c=[];for(const a of e){if(sr(a),a>=2**t)throw new Error(`convertRadix2: invalid data word=${a} from=${t}`);if(o=o<<t|a,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)c.push((o>>i-n&s)>>>0);o&=2**i-1}if(o=o<<n-i&s,!r&&i>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&c.push(o>>>0),c}function e0(e){return sr(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return pc(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(pc(t,e,2**8))}}}function tn(e,t=!1){if(sr(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(ro(8,e)>32||ro(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Ri(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Ri(n,e,8,t))}}}function wc(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}const t0=kt(tn(4),Ut("0123456789ABCDEF"),Nt("")),n0=kt(tn(5),Ut("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),$o(5),Nt(""));kt(tn(5),Ut("0123456789ABCDEFGHIJKLMNOPQRSTUV"),$o(5),Nt(""));kt(tn(5),Ut("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Nt(""),gf(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const Bt=kt(tn(6),Ut("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),$o(6),Nt("")),r0=kt(tn(6),Ut("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),$o(6),Nt("")),ps=e=>kt(e0(58),Ut(e),Nt("")),Oi=ps("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");ps("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");ps("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const yc=[0,2,3,5,6,7,9,10,11],o0={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=Oi.encode(r).padStart(yc[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),o=yc.indexOf(r.length),i=Oi.decode(r);for(let s=0;s<i.length-o;s++)if(i[s]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-o)))}return Uint8Array.from(t)}},Ci=kt(Ut("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Nt("")),bc=[996825010,642813549,513874426,1027748829,705979059];function ur(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<bc.length;r++)(t>>r&1)===1&&(n^=bc[r]);return n}function vc(e,t,n=1){const r=e.length;let o=1;for(let i=0;i<r;i++){const s=e.charCodeAt(i);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);o=ur(o)^s>>5}o=ur(o);for(let i=0;i<r;i++)o=ur(o)^e.charCodeAt(i)&31;for(let i of t)o=ur(o)^i;for(let i=0;i<6;i++)o=ur(o);return o^=n,Ci.encode(Ri([o%2**30],30,5,!1))}function wf(e){const t=e==="bech32"?1:734539939,n=tn(5),r=n.decode,o=n.encode,i=wc(r);function s(u,l,d=90){if(typeof u!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof u}`);if(!Array.isArray(l)||l.length&&typeof l[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof l}`);const h=u.length+7+l.length;if(d!==!1&&h>d)throw new TypeError(`Length ${h} exceeds limit ${d}`);return u=u.toLowerCase(),`${u}1${Ci.encode(l)}${vc(u,l,t)}`}function c(u,l=90){if(typeof u!="string")throw new Error(`bech32.decode input should be string, not ${typeof u}`);if(u.length<8||l!==!1&&u.length>l)throw new TypeError(`Wrong string length: ${u.length} (${u}). Expected (8..${l})`);const d=u.toLowerCase();if(u!==d&&u!==u.toUpperCase())throw new Error("String must be lowercase or uppercase");u=d;const h=u.lastIndexOf("1");if(h===0||h===-1)throw new Error('Letter "1" must be present between prefix and data only');const p=u.slice(0,h),g=u.slice(h+1);if(g.length<6)throw new Error("Data must be at least 6 characters long");const y=Ci.decode(g).slice(0,-6),m=vc(p,y,t);if(!g.endsWith(m))throw new Error(`Invalid checksum in ${u}: expected "${m}"`);return{prefix:p,words:y}}const a=wc(c);function f(u){const{prefix:l,words:d}=c(u,!1);return{prefix:l,words:d,bytes:r(d)}}return{encode:s,decode:c,decodeToBytes:f,decodeUnsafe:a,fromWords:r,fromWordsUnsafe:i,toWords:o}}const Ue=wf("bech32");wf("bech32m");const i0={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},s0=kt(tn(4),Ut("0123456789abcdef"),Nt(""),gf(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),c0={utf8:i0,hex:s0,base16:t0,base32:n0,base64:Bt,base64url:r0,base58:Oi,base58xmr:o0};`${Object.keys(c0).join(", ")}`;function Qo(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function mc(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function yf(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function be(e,...t){if(!yf(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Ec(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a0(e,t){be(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const ve=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),f0=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),l0=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!l0)throw new Error("Non little-endian hardware is not supported");const u0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Hn(e){be(e);let t="";for(let n=0;n<e.length;n++)t+=u0[e[n]];return t}const dt={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function xc(e){if(e>=dt._0&&e<=dt._9)return e-dt._0;if(e>=dt._A&&e<=dt._F)return e-(dt._A-10);if(e>=dt._a&&e<=dt._f)return e-(dt._a-10)}function bf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){const s=xc(e.charCodeAt(i)),c=xc(e.charCodeAt(i+1));if(s===void 0||c===void 0){const a=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+i)}r[o]=s*16+c}return r}function d0(e){if(typeof e!="string")throw new Error(`string expected, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Hi(e){if(typeof e=="string")e=d0(e);else if(yf(e))e=e.slice();else throw new Error(`Uint8Array expected, got ${typeof e}`);return e}function h0(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function vf(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const mf=(e,t)=>(Object.assign(t,e),t);function _c(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),c=Number(n&i),a=4,f=0;e.setUint32(t+a,s,r),e.setUint32(t+f,c,r)}const Qt=16,g0=283;function ws(e){return e<<1^g0&-(e>>7)}function qn(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(t&1),e=ws(e);return n}const Mi=(()=>{let e=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=ws(r))e[n]=r;const t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=(r^r>>4^r>>5^r>>6^r>>7^99)&255}return t})(),p0=Mi.map((e,t)=>Mi.indexOf(t)),w0=e=>e<<24|e>>>8,ei=e=>e<<8|e>>>24;function Ef(e,t){if(e.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((f,u)=>t(e[u])),r=n.map(ei),o=r.map(ei),i=o.map(ei),s=new Uint32Array(256*256),c=new Uint32Array(256*256),a=new Uint16Array(256*256);for(let f=0;f<256;f++)for(let u=0;u<256;u++){const l=f*256+u;s[l]=n[f]^r[u],c[l]=o[f]^i[u],a[l]=e[f]<<8|e[u]}return{sbox:e,sbox2:a,T0:n,T1:r,T2:o,T3:i,T01:s,T23:c}}const ys=Ef(Mi,e=>qn(e,3)<<24|e<<16|e<<8|qn(e,2)),xf=Ef(p0,e=>qn(e,11)<<24|qn(e,13)<<16|qn(e,9)<<8|qn(e,14)),y0=(()=>{const e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=ws(n))e[t]=n;return e})();function _f(e){be(e);const t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);const{sbox2:n}=ys,r=ve(e),o=r.length,i=c=>at(n,c,c,c,c),s=new Uint32Array(t+28);s.set(r);for(let c=o;c<s.length;c++){let a=s[c-1];c%o===0?a=i(w0(a))^y0[c/o-1]:o>6&&c%o===4&&(a=i(a)),s[c]=s[c-o]^a}return s}function b0(e){const t=_f(e),n=t.slice(),r=t.length,{sbox2:o}=ys,{T0:i,T1:s,T2:c,T3:a}=xf;for(let f=0;f<r;f+=4)for(let u=0;u<4;u++)n[f+u]=t[r-f-4+u];t.fill(0);for(let f=4;f<r-4;f++){const u=n[f],l=at(o,u,u,u,u);n[f]=i[l&255]^s[l>>>8&255]^c[l>>>16&255]^a[l>>>24]}return n}function Wt(e,t,n,r,o,i){return e[n<<8&65280|r>>>8&255]^t[o>>>8&65280|i>>>24&255]}function at(e,t,n,r,o){return e[t&255|n&65280]|e[r>>>16&255|o>>>16&65280]<<16}function Ac(e,t,n,r,o){const{sbox2:i,T01:s,T23:c}=ys;let a=0;t^=e[a++],n^=e[a++],r^=e[a++],o^=e[a++];const f=e.length/4-2;for(let p=0;p<f;p++){const g=e[a++]^Wt(s,c,t,n,r,o),y=e[a++]^Wt(s,c,n,r,o,t),m=e[a++]^Wt(s,c,r,o,t,n),I=e[a++]^Wt(s,c,o,t,n,r);t=g,n=y,r=m,o=I}const u=e[a++]^at(i,t,n,r,o),l=e[a++]^at(i,n,r,o,t),d=e[a++]^at(i,r,o,t,n),h=e[a++]^at(i,o,t,n,r);return{s0:u,s1:l,s2:d,s3:h}}function v0(e,t,n,r,o){const{sbox2:i,T01:s,T23:c}=xf;let a=0;t^=e[a++],n^=e[a++],r^=e[a++],o^=e[a++];const f=e.length/4-2;for(let p=0;p<f;p++){const g=e[a++]^Wt(s,c,t,o,r,n),y=e[a++]^Wt(s,c,n,t,o,r),m=e[a++]^Wt(s,c,r,n,t,o),I=e[a++]^Wt(s,c,o,r,n,t);t=g,n=y,r=m,o=I}const u=e[a++]^at(i,t,o,r,n),l=e[a++]^at(i,n,t,o,r),d=e[a++]^at(i,r,n,t,o),h=e[a++]^at(i,o,r,n,t);return{s0:u,s1:l,s2:d,s3:h}}function Af(e,t){if(!t)return new Uint8Array(e);if(be(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}function m0(e){if(be(e),e.length%Qt!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${Qt}`)}function E0(e,t,n){let r=e.length;const o=r%Qt;if(!t&&o!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const i=ve(e);if(t){let a=Qt-o;a||(a=Qt),r=r+a}const s=Af(r,n),c=ve(s);return{b:i,o:c,out:s}}function x0(e,t){if(!t)return e;const n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=e[n-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const o=e.subarray(0,-r);for(let i=0;i<r;i++)if(e[n-i-1]!==r)throw new Error("aes/pcks5: wrong padding");return o}function _0(e){const t=new Uint8Array(16),n=ve(t);t.set(e);const r=Qt-e.length;for(let o=Qt-r;o<Qt;o++)t[o]=r;return n}const Bf=mf({blockSize:16,nonceLength:16},function(t,n,r={}){be(t),be(n,16);const o=!r.disablePadding;return{encrypt:(i,s)=>{const c=_f(t),{b:a,o:f,out:u}=E0(i,o,s),l=ve(n);let d=l[0],h=l[1],p=l[2],g=l[3],y=0;for(;y+4<=a.length;)d^=a[y+0],h^=a[y+1],p^=a[y+2],g^=a[y+3],{s0:d,s1:h,s2:p,s3:g}=Ac(c,d,h,p,g),f[y++]=d,f[y++]=h,f[y++]=p,f[y++]=g;if(o){const m=_0(i.subarray(y*4));d^=m[0],h^=m[1],p^=m[2],g^=m[3],{s0:d,s1:h,s2:p,s3:g}=Ac(c,d,h,p,g),f[y++]=d,f[y++]=h,f[y++]=p,f[y++]=g}return c.fill(0),u},decrypt:(i,s)=>{m0(i);const c=b0(t),a=ve(n),f=Af(i.length,s),u=ve(i),l=ve(f);let d=a[0],h=a[1],p=a[2],g=a[3];for(let y=0;y+4<=u.length;){const m=d,I=h,$=p,M=g;d=u[y+0],h=u[y+1],p=u[y+2],g=u[y+3];const{s0:P,s1:N,s2:O,s3:C}=v0(c,d,h,p,g);l[y++]=P^m,l[y++]=N^I,l[y++]=O^$,l[y++]=C^M}return c.fill(0),x0(f,o)}}}),de=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class A0{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=Hi(t),be(t,32);const n=de(t,0),r=de(t,2),o=de(t,4),i=de(t,6),s=de(t,8),c=de(t,10),a=de(t,12),f=de(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|o<<6)&7939,this.r[3]=(o>>>7|i<<9)&8191,this.r[4]=(i>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|c<<2)&8191,this.r[7]=(c>>>11|a<<5)&8065,this.r[8]=(a>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let u=0;u<8;u++)this.pad[u]=de(t,16+2*u)}process(t,n,r=!1){const o=r?0:2048,{h:i,r:s}=this,c=s[0],a=s[1],f=s[2],u=s[3],l=s[4],d=s[5],h=s[6],p=s[7],g=s[8],y=s[9],m=de(t,n+0),I=de(t,n+2),$=de(t,n+4),M=de(t,n+6),P=de(t,n+8),N=de(t,n+10),O=de(t,n+12),C=de(t,n+14);let H=i[0]+(m&8191),q=i[1]+((m>>>13|I<<3)&8191),_=i[2]+((I>>>10|$<<6)&8191),x=i[3]+(($>>>7|M<<9)&8191),b=i[4]+((M>>>4|P<<12)&8191),E=i[5]+(P>>>1&8191),w=i[6]+((P>>>14|N<<2)&8191),v=i[7]+((N>>>11|O<<5)&8191),A=i[8]+((O>>>8|C<<8)&8191),S=i[9]+(C>>>5|o),B=0,k=B+H*c+q*(5*y)+_*(5*g)+x*(5*p)+b*(5*h);B=k>>>13,k&=8191,k+=E*(5*d)+w*(5*l)+v*(5*u)+A*(5*f)+S*(5*a),B+=k>>>13,k&=8191;let T=B+H*a+q*c+_*(5*y)+x*(5*g)+b*(5*p);B=T>>>13,T&=8191,T+=E*(5*h)+w*(5*d)+v*(5*l)+A*(5*u)+S*(5*f),B+=T>>>13,T&=8191;let R=B+H*f+q*a+_*c+x*(5*y)+b*(5*g);B=R>>>13,R&=8191,R+=E*(5*p)+w*(5*h)+v*(5*d)+A*(5*l)+S*(5*u),B+=R>>>13,R&=8191;let z=B+H*u+q*f+_*a+x*c+b*(5*y);B=z>>>13,z&=8191,z+=E*(5*g)+w*(5*p)+v*(5*h)+A*(5*d)+S*(5*l),B+=z>>>13,z&=8191;let D=B+H*l+q*u+_*f+x*a+b*c;B=D>>>13,D&=8191,D+=E*(5*y)+w*(5*g)+v*(5*p)+A*(5*h)+S*(5*d),B+=D>>>13,D&=8191;let j=B+H*d+q*l+_*u+x*f+b*a;B=j>>>13,j&=8191,j+=E*c+w*(5*y)+v*(5*g)+A*(5*p)+S*(5*h),B+=j>>>13,j&=8191;let K=B+H*h+q*d+_*l+x*u+b*f;B=K>>>13,K&=8191,K+=E*a+w*c+v*(5*y)+A*(5*g)+S*(5*p),B+=K>>>13,K&=8191;let Z=B+H*p+q*h+_*d+x*l+b*u;B=Z>>>13,Z&=8191,Z+=E*f+w*a+v*c+A*(5*y)+S*(5*g),B+=Z>>>13,Z&=8191;let Q=B+H*g+q*p+_*h+x*d+b*l;B=Q>>>13,Q&=8191,Q+=E*u+w*f+v*a+A*c+S*(5*y),B+=Q>>>13,Q&=8191;let W=B+H*y+q*g+_*p+x*h+b*d;B=W>>>13,W&=8191,W+=E*l+w*u+v*f+A*a+S*c,B+=W>>>13,W&=8191,B=(B<<2)+B|0,B=B+k|0,k=B&8191,B=B>>>13,T+=B,i[0]=k,i[1]=T,i[2]=R,i[3]=z,i[4]=D,i[5]=j,i[6]=K,i[7]=Z,i[8]=Q,i[9]=W}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let o=t[1]>>>13;t[1]&=8191;for(let c=2;c<10;c++)t[c]+=o,o=t[c]>>>13,t[c]&=8191;t[0]+=o*5,o=t[0]>>>13,t[0]&=8191,t[1]+=o,o=t[1]>>>13,t[1]&=8191,t[2]+=o,r[0]=t[0]+5,o=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=t[c]+o,o=r[c]>>>13,r[c]&=8191;r[9]-=8192;let i=(o^1)-1;for(let c=0;c<10;c++)r[c]&=i;i=~i;for(let c=0;c<10;c++)t[c]=t[c]&i|r[c];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let s=t[0]+n[0];t[0]=s&65535;for(let c=1;c<8;c++)s=(t[c]+n[c]|0)+(s>>>16)|0,t[c]=s&65535}update(t){Ec(this);const{buffer:n,blockLen:r}=this;t=Hi(t);const o=t.length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s===r){for(;r<=o-i;i+=r)this.process(t,i);continue}n.set(t.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(t){Ec(this),a0(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:o}=this;if(o){for(n[o++]=1;o<16;o++)n[o]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let s=0;s<8;s++)t[i++]=r[s]>>>0,t[i++]=r[s]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function B0(e){const t=(r,o)=>e(o).update(Hi(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const S0=B0(e=>new A0(e)),Sf=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),T0=Sf("expand 16-byte k"),I0=Sf("expand 32-byte k"),$0=ve(T0),Tf=ve(I0);Tf.slice();function V(e,t){return e<<t|e>>>32-t}function Pi(e){return e.byteOffset%4===0}const Or=64,L0=16,If=2**32-1,Bc=new Uint32Array;function k0(e,t,n,r,o,i,s,c){const a=o.length,f=new Uint8Array(Or),u=ve(f),l=Pi(o)&&Pi(i),d=l?ve(o):Bc,h=l?ve(i):Bc;for(let p=0;p<a;s++){if(e(t,n,r,u,s,c),s>=If)throw new Error("arx: counter overflow");const g=Math.min(Or,a-p);if(l&&g===Or){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let m=0,I;m<L0;m++)I=y+m,h[I]=d[I]^u[m];p+=Or;continue}for(let y=0,m;y<g;y++)m=p+y,i[m]=o[m]^f[y];p+=g}}function $f(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:o,counterRight:i,rounds:s}=h0({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return Qo(o),Qo(s),mc(i),mc(n),(c,a,f,u,l=0)=>{be(c),be(a),be(f);const d=f.length;if(u||(u=new Uint8Array(d)),be(u),Qo(l),l<0||l>=If)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const h=[];let p=c.length,g,y;if(p===32)g=c.slice(),h.push(g),y=Tf;else if(p===16&&n)g=new Uint8Array(32),g.set(c),g.set(c,16),y=$0,h.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);Pi(a)||(a=a.slice(),h.push(a));const m=ve(g);if(r){if(a.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,m,ve(a.subarray(0,16)),m),a=a.subarray(16)}const I=16-o;if(I!==a.length)throw new Error(`arx: nonce must be ${I} or 16 bytes`);if(I!==12){const M=new Uint8Array(12);M.set(a,i?0:12-a.length),a=M,h.push(a)}const $=ve(a);for(k0(e,y,m,$,f,u,l,s);h.length>0;)h.pop().fill(0);return u}}function Lf(e,t,n,r,o,i=20){let s=e[0],c=e[1],a=e[2],f=e[3],u=t[0],l=t[1],d=t[2],h=t[3],p=t[4],g=t[5],y=t[6],m=t[7],I=o,$=n[0],M=n[1],P=n[2],N=s,O=c,C=a,H=f,q=u,_=l,x=d,b=h,E=p,w=g,v=y,A=m,S=I,B=$,k=M,T=P;for(let z=0;z<i;z+=2)N=N+q|0,S=V(S^N,16),E=E+S|0,q=V(q^E,12),N=N+q|0,S=V(S^N,8),E=E+S|0,q=V(q^E,7),O=O+_|0,B=V(B^O,16),w=w+B|0,_=V(_^w,12),O=O+_|0,B=V(B^O,8),w=w+B|0,_=V(_^w,7),C=C+x|0,k=V(k^C,16),v=v+k|0,x=V(x^v,12),C=C+x|0,k=V(k^C,8),v=v+k|0,x=V(x^v,7),H=H+b|0,T=V(T^H,16),A=A+T|0,b=V(b^A,12),H=H+b|0,T=V(T^H,8),A=A+T|0,b=V(b^A,7),N=N+_|0,T=V(T^N,16),v=v+T|0,_=V(_^v,12),N=N+_|0,T=V(T^N,8),v=v+T|0,_=V(_^v,7),O=O+x|0,S=V(S^O,16),A=A+S|0,x=V(x^A,12),O=O+x|0,S=V(S^O,8),A=A+S|0,x=V(x^A,7),C=C+b|0,B=V(B^C,16),E=E+B|0,b=V(b^E,12),C=C+b|0,B=V(B^C,8),E=E+B|0,b=V(b^E,7),H=H+q|0,k=V(k^H,16),w=w+k|0,q=V(q^w,12),H=H+q|0,k=V(k^H,8),w=w+k|0,q=V(q^w,7);let R=0;r[R++]=s+N|0,r[R++]=c+O|0,r[R++]=a+C|0,r[R++]=f+H|0,r[R++]=u+q|0,r[R++]=l+_|0,r[R++]=d+x|0,r[R++]=h+b|0,r[R++]=p+E|0,r[R++]=g+w|0,r[R++]=y+v|0,r[R++]=m+A|0,r[R++]=I+S|0,r[R++]=$+B|0,r[R++]=M+k|0,r[R++]=P+T|0}function U0(e,t,n,r){let o=e[0],i=e[1],s=e[2],c=e[3],a=t[0],f=t[1],u=t[2],l=t[3],d=t[4],h=t[5],p=t[6],g=t[7],y=n[0],m=n[1],I=n[2],$=n[3];for(let P=0;P<20;P+=2)o=o+a|0,y=V(y^o,16),d=d+y|0,a=V(a^d,12),o=o+a|0,y=V(y^o,8),d=d+y|0,a=V(a^d,7),i=i+f|0,m=V(m^i,16),h=h+m|0,f=V(f^h,12),i=i+f|0,m=V(m^i,8),h=h+m|0,f=V(f^h,7),s=s+u|0,I=V(I^s,16),p=p+I|0,u=V(u^p,12),s=s+u|0,I=V(I^s,8),p=p+I|0,u=V(u^p,7),c=c+l|0,$=V($^c,16),g=g+$|0,l=V(l^g,12),c=c+l|0,$=V($^c,8),g=g+$|0,l=V(l^g,7),o=o+f|0,$=V($^o,16),p=p+$|0,f=V(f^p,12),o=o+f|0,$=V($^o,8),p=p+$|0,f=V(f^p,7),i=i+u|0,y=V(y^i,16),g=g+y|0,u=V(u^g,12),i=i+u|0,y=V(y^i,8),g=g+y|0,u=V(u^g,7),s=s+l|0,m=V(m^s,16),d=d+m|0,l=V(l^d,12),s=s+l|0,m=V(m^s,8),d=d+m|0,l=V(l^d,7),c=c+a|0,I=V(I^c,16),h=h+I|0,a=V(a^h,12),c=c+a|0,I=V(I^c,8),h=h+I|0,a=V(a^h,7);let M=0;r[M++]=o,r[M++]=i,r[M++]=s,r[M++]=c,r[M++]=y,r[M++]=m,r[M++]=I,r[M++]=$}const kf=$f(Lf,{counterRight:!1,counterLength:4,allowShortKeys:!1}),N0=$f(Lf,{counterRight:!1,counterLength:8,extendNonceFn:U0,allowShortKeys:!1}),R0=new Uint8Array(16),Sc=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(R0.subarray(n))},O0=new Uint8Array(32);function Tc(e,t,n,r,o){const i=e(t,n,O0),s=S0.create(i);o&&Sc(s,o),Sc(s,r);const c=new Uint8Array(16),a=f0(c);_c(a,0,BigInt(o?o.length:0),!0),_c(a,8,BigInt(r.length),!0),s.update(c);const f=s.digest();return i.fill(0),f}const C0=e=>(t,n,r)=>(be(t,32),be(n),{encrypt:(i,s)=>{const c=i.length,a=c+16;s?be(s,a):s=new Uint8Array(a),e(t,n,i,s,1);const f=Tc(e,t,n,s.subarray(0,-16),r);return s.set(f,c),s},decrypt:(i,s)=>{const c=i.length,a=c-16;if(c<16)throw new Error("encrypted data must be at least 16 bytes");s?be(s,a):s=new Uint8Array(a);const f=i.subarray(0,-16),u=i.subarray(-16),l=Tc(e,t,n,f,r);if(!vf(u,l))throw new Error("invalid tag");return e(t,n,f,s,1),s}}),Uf=mf({blockSize:64,nonceLength:24,tagLength:16},C0(N0));let Nf=class extends ff{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,ce.hash(t);const r=Ln(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(t){return ce.exists(this),this.iHash.update(t),this}digestInto(t){ce.exists(this),ce.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:i,blockLen:s,outputLen:c}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const kr=(e,t,n)=>new Nf(e,t).update(n).digest();kr.create=(e,t)=>new Nf(e,t);function H0(e,t,n){return ce.hash(e),kr(e,Ln(n),Ln(t))}const ti=new Uint8Array([0]),Ic=new Uint8Array;function M0(e,t,n,r=32){if(ce.hash(e),ce.number(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/e.outputLen);n===void 0&&(n=Ic);const i=new Uint8Array(o*e.outputLen),s=kr.create(e,t),c=s._cloneInto(),a=new Uint8Array(s.outputLen);for(let f=0;f<o;f++)ti[0]=f+1,c.update(f===0?Ic:a).update(n).update(ti).digestInto(a),i.set(a,e.outputLen*f),s._cloneInto(c);return s.destroy(),c.destroy(),a.fill(0),ti.fill(0),i.slice(0,r)}var P0=Object.defineProperty,te=(e,t)=>{for(var n in t)P0(e,n,{get:t[n],enumerable:!0})},sn=Symbol("verified"),q0=e=>e instanceof Object;function bs(e){if(!q0(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]!="string")return!1}return!0}var V0={};te(V0,{Queue:()=>Of,QueueNode:()=>Rf,binarySearch:()=>vs,bytesToHex:()=>oe,hexToBytes:()=>Ce,insertEventIntoAscendingList:()=>j0,insertEventIntoDescendingList:()=>D0,normalizeURL:()=>an,utf8Decoder:()=>xt,utf8Encoder:()=>Ye});var xt=new TextDecoder("utf-8"),Ye=new TextEncoder;function an(e){try{e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.protocol==="http:"?t.protocol="ws:":t.protocol==="https:"&&(t.protocol="wss:"),t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}catch{throw new Error(`Invalid URL: ${e}`)}}function D0(e,t){const[n,r]=vs(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:o.created_at-t.created_at);return r||e.splice(n,0,t),e}function j0(e,t){const[n,r]=vs(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:t.created_at-o.created_at);return r||e.splice(n,0,t),e}function vs(e,t){let n=0,r=e.length-1;for(;n<=r;){const o=Math.floor((n+r)/2),i=t(e[o]);if(i===0)return[o,!0];i<0?r=o-1:n=o+1}return[n,!1]}var Rf=class{constructor(e){U(this,"value");U(this,"next",null);U(this,"prev",null);this.value=e}},Of=class{constructor(){U(this,"first");U(this,"last");this.first=null,this.last=null}enqueue(e){const t=new Rf(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const t=this.first;return this.first=null,this.last=null,t.value}const e=this.first;return this.first=e.next,this.first&&(this.first.prev=null),e.value}},z0=class{generateSecretKey(){return lr.utils.randomPrivateKey()}getPublicKey(e){return oe(lr.getPublicKey(e))}finalizeEvent(e,t){const n=e;return n.pubkey=oe(lr.getPublicKey(t)),n.id=zr(n),n.sig=oe(lr.sign(zr(n),t)),n[sn]=!0,n}verifyEvent(e){if(typeof e[sn]=="boolean")return e[sn];const t=zr(e);if(t!==e.id)return e[sn]=!1,!1;try{const n=lr.verify(e.sig,t,e.pubkey);return e[sn]=n,n}catch{return e[sn]=!1,!1}}};function F0(e){if(!bs(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function zr(e){let t=Lt(Ye.encode(F0(e)));return oe(t)}var Lo=new z0,K0=Lo.generateSecretKey,ms=Lo.getPublicKey,lt=Lo.finalizeEvent,ko=Lo.verifyEvent,Z0={};te(Z0,{Application:()=>Kg,BadgeAward:()=>tg,BadgeDefinition:()=>Pg,BlockedRelaysList:()=>_g,BookmarkList:()=>mg,Bookmarksets:()=>Cg,Calendar:()=>Qg,CalendarEventRSVP:()=>ep,ChannelCreation:()=>Vf,ChannelHideMessage:()=>zf,ChannelMessage:()=>jf,ChannelMetadata:()=>Df,ChannelMuteUser:()=>Ff,ClassifiedListing:()=>Gg,ClientAuth:()=>Zf,CommunitiesList:()=>Eg,CommunityDefinition:()=>rp,CommunityPostApproval:()=>fg,Contacts:()=>J0,CreateOrUpdateProduct:()=>Dg,CreateOrUpdateStall:()=>Vg,Curationsets:()=>Hg,Date:()=>Xg,DirectMessageRelaysList:()=>Tg,DraftClassifiedListing:()=>Yg,DraftLong:()=>zg,Emojisets:()=>Fg,EncryptedDirectMessage:()=>Q0,EventDeletion:()=>eg,FileMetadata:()=>rg,FileServerPreference:()=>Ig,Followsets:()=>Ng,GenericRepost:()=>Bs,Genericlists:()=>Rg,GiftWrap:()=>Kf,HTTPAuth:()=>Ss,Handlerinformation:()=>np,Handlerrecommendation:()=>tp,Highlights:()=>wg,InterestsList:()=>Bg,Interestsets:()=>qg,JobFeedback:()=>dg,JobRequest:()=>lg,JobResult:()=>ug,Label:()=>ag,LightningPubRPC:()=>Lg,LiveChatMessage:()=>og,LiveEvent:()=>Zg,LongFormArticle:()=>jg,Metadata:()=>Y0,Mutelist:()=>yg,NWCWalletInfo:()=>$g,NWCWalletRequest:()=>Wf,NWCWalletResponse:()=>kg,NostrConnect:()=>Ug,OpenTimestamps:()=>ng,Pinlist:()=>bg,PrivateDirectMessage:()=>qf,ProblemTracker:()=>ig,ProfileBadges:()=>Mg,PublicChatsList:()=>xg,Reaction:()=>As,RecommendRelay:()=>X0,RelayList:()=>vg,Relaysets:()=>Og,Report:()=>sg,Reporting:()=>cg,Repost:()=>_s,Seal:()=>Pf,SearchRelaysList:()=>Ag,ShortTextNote:()=>Mf,Time:()=>Jg,UserEmojiList:()=>Sg,UserStatuses:()=>Wg,Zap:()=>pg,ZapGoal:()=>hg,ZapRequest:()=>gg,classifyKind:()=>W0,isAddressableKind:()=>xs,isEphemeralKind:()=>Hf,isKind:()=>G0,isRegularKind:()=>Cf,isReplaceableKind:()=>Es});function Cf(e){return e<1e4&&e!==0&&e!==3}function Es(e){return e===0||e===3||1e4<=e&&e<2e4}function Hf(e){return 2e4<=e&&e<3e4}function xs(e){return 3e4<=e&&e<4e4}function W0(e){return Cf(e)?"regular":Es(e)?"replaceable":Hf(e)?"ephemeral":xs(e)?"parameterized":"unknown"}function G0(e,t){const n=t instanceof Array?t:[t];return bs(e)&&n.includes(e.kind)||!1}var Y0=0,Mf=1,X0=2,J0=3,Q0=4,eg=5,_s=6,As=7,tg=8,Pf=13,qf=14,Bs=16,Vf=40,Df=41,jf=42,zf=43,Ff=44,ng=1040,Kf=1059,rg=1063,og=1311,ig=1971,sg=1984,cg=1984,ag=1985,fg=4550,lg=5999,ug=6999,dg=7e3,hg=9041,gg=9734,pg=9735,wg=9802,yg=1e4,bg=10001,vg=10002,mg=10003,Eg=10004,xg=10005,_g=10006,Ag=10007,Bg=10015,Sg=10030,Tg=10050,Ig=10096,$g=13194,Lg=21e3,Zf=22242,Wf=23194,kg=23195,Ug=24133,Ss=27235,Ng=3e4,Rg=30001,Og=30002,Cg=30003,Hg=30004,Mg=30008,Pg=30009,qg=30015,Vg=30017,Dg=30018,jg=30023,zg=30024,Fg=30030,Kg=30078,Zg=30311,Wg=30315,Gg=30402,Yg=30403,Xg=31922,Jg=31923,Qg=31924,ep=31925,tp=31989,np=31990,rp=34550;function op(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1)return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),o=e[`#${r}`];if(o&&!t.tags.find(([i,s])=>i===n.slice(1)&&o.indexOf(s)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function ip(e,t){for(let n=0;n<e.length;n++)if(op(e[n],t))return!0;return!1}var sp={};te(sp,{getHex64:()=>Uo,getInt:()=>Gf,getSubscriptionId:()=>Yf,matchEventId:()=>cp,matchEventKind:()=>fp,matchEventPubkey:()=>ap});function Uo(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function Gf(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,o=e.slice(r),i=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,i),10)}function Yf(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let i=r+1+o;return e.slice(r+1,i)}function cp(e,t){return t===Uo(e,"id")}function ap(e,t){return t===Uo(e,"pubkey")}function fp(e,t){return t===Gf(e,"kind")}var lp={};te(lp,{makeAuthEvent:()=>Xf});function Xf(e,t){return{kind:Zf,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function up(){return new Promise((e,t)=>{try{if(typeof MessageChannel<"u"){const n=new MessageChannel,r=()=>{n.port1.removeEventListener("message",r),e()};n.port1.addEventListener("message",r),n.port2.postMessage(0),n.port1.start()}else typeof setImmediate<"u"?setImmediate(e):typeof setTimeout<"u"?setTimeout(e,0):e()}catch(n){console.error("during yield: ",n),t(n)}})}var dp=e=>(e[sn]=!0,!0),Jf=class extends Error{constructor(e,t){super(`Tried to send message '${e} on a closed connection to ${t}.`),this.name="SendingOnClosedConnection"}},Qf=class{constructor(e,t){U(this,"url");U(this,"_connected",!1);U(this,"onclose",null);U(this,"onnotice",e=>console.debug(`NOTICE from ${this.url}: ${e}`));U(this,"baseEoseTimeout",4400);U(this,"connectionTimeout",4400);U(this,"publishTimeout",4400);U(this,"pingFrequency",2e4);U(this,"pingTimeout",2e4);U(this,"resubscribeBackoff",[1e4,1e4,1e4,2e4,2e4,3e4,6e4]);U(this,"openSubs",new Map);U(this,"enablePing");U(this,"enableReconnect");U(this,"connectionTimeoutHandle");U(this,"reconnectTimeoutHandle");U(this,"pingTimeoutHandle");U(this,"reconnectAttempts",0);U(this,"closedIntentionally",!1);U(this,"connectionPromise");U(this,"openCountRequests",new Map);U(this,"openEventPublishes",new Map);U(this,"ws");U(this,"incomingMessageQueue",new Of);U(this,"queueRunning",!1);U(this,"challenge");U(this,"authPromise");U(this,"serial",0);U(this,"verifyEvent");U(this,"_WebSocket");this.url=an(e),this.verifyEvent=t.verifyEvent,this._WebSocket=t.websocketImplementation||WebSocket,this.enablePing=t.enablePing,this.enableReconnect=t.enableReconnect||!1}static async connect(e,t){const n=new Qf(e,t);return await n.connect(),n}closeAllSubscriptions(e){for(let[t,n]of this.openSubs)n.close(e);this.openSubs.clear();for(let[t,n]of this.openEventPublishes)n.reject(new Error(e));this.openEventPublishes.clear();for(let[t,n]of this.openCountRequests)n.reject(new Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async reconnect(){const e=this.resubscribeBackoff[Math.min(this.reconnectAttempts,this.resubscribeBackoff.length-1)];this.reconnectAttempts++,this.reconnectTimeoutHandle=setTimeout(async()=>{try{await this.connect()}catch{}},e)}handleHardClose(e){var n;this.pingTimeoutHandle&&(clearTimeout(this.pingTimeoutHandle),this.pingTimeoutHandle=void 0),this._connected=!1,this.connectionPromise=void 0;const t=this.closedIntentionally;this.closedIntentionally=!1,(n=this.onclose)==null||n.call(this),this.enableReconnect&&!t?this.reconnect():this.closeAllSubscriptions(e)}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.authPromise=void 0,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeoutHandle=setTimeout(()=>{var n;t("connection timed out"),this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(n){clearTimeout(this.connectionTimeoutHandle),t(n);return}this.ws.onopen=()=>{this.reconnectTimeoutHandle&&(clearTimeout(this.reconnectTimeoutHandle),this.reconnectTimeoutHandle=void 0),clearTimeout(this.connectionTimeoutHandle),this._connected=!0,this.reconnectAttempts=0;for(const n of this.openSubs.values())n.eosed=!1,typeof this.enableReconnect=="function"&&(n.filters=this.enableReconnect(n.filters)),n.fire();this.enablePing&&this.pingpong(),e()},this.ws.onerror=n=>{clearTimeout(this.connectionTimeoutHandle),t(n.message||"websocket error"),this.handleHardClose("relay connection errored")},this.ws.onclose=n=>{clearTimeout(this.connectionTimeoutHandle),t(n.message||"websocket closed"),this.handleHardClose("relay connection closed")},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}waitForPingPong(){return new Promise(e=>{this.ws.once("pong",()=>e(!0)),this.ws.ping()})}async waitForDummyReq(){return new Promise((e,t)=>{const n=this.subscribe([{ids:["a".repeat(64)]}],{oneose:()=>{n.close(),e(!0)},eoseTimeout:this.pingTimeout+1e3})})}async pingpong(){var e,t,n;((e=this.ws)==null?void 0:e.readyState)===1&&(await Promise.any([this.ws&&this.ws.ping&&this.ws.once?this.waitForPingPong():this.waitForDummyReq(),new Promise(o=>setTimeout(()=>o(!1),this.pingTimeout))])?this.pingTimeoutHandle=setTimeout(()=>this.pingpong(),this.pingFrequency):((t=this.ws)==null?void 0:t.readyState)===this._WebSocket.OPEN&&((n=this.ws)==null||n.close()))}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await up();this.queueRunning=!1}handleNext(){var n,r,o;const e=this.incomingMessageQueue.dequeue();if(!e)return!1;const t=Yf(e);if(t){const i=this.openSubs.get(t);if(!i)return;const s=Uo(e,"id"),c=(n=i.alreadyHaveEvent)==null?void 0:n.call(i,s);if((r=i.receivedEvent)==null||r.call(i,this,s),c)return}try{let i=JSON.parse(e);switch(i[0]){case"EVENT":{const s=this.openSubs.get(i[1]),c=i[2];this.verifyEvent(c)&&ip(s.filters,c)&&s.onevent(c);return}case"COUNT":{const s=i[1],c=i[2],a=this.openCountRequests.get(s);a&&(a.resolve(c.count),this.openCountRequests.delete(s));return}case"EOSE":{const s=this.openSubs.get(i[1]);if(!s)return;s.receivedEose();return}case"OK":{const s=i[1],c=i[2],a=i[3],f=this.openEventPublishes.get(s);f&&(clearTimeout(f.timeout),c?f.resolve(a):f.reject(new Error(a)),this.openEventPublishes.delete(s));return}case"CLOSED":{const s=i[1],c=this.openSubs.get(s);if(!c)return;c.closed=!0,c.close(i[2]);return}case"NOTICE":{this.onnotice(i[1]);return}case"AUTH":{this.challenge=i[1];return}default:{const s=this.openSubs.get(i[1]);(o=s==null?void 0:s.oncustom)==null||o.call(s,i);return}}}catch{return}}async send(e){if(!this.connectionPromise)throw new Jf(e,this.url);this.connectionPromise.then(()=>{var t;(t=this.ws)==null||t.send(e)})}async auth(e){const t=this.challenge;if(!t)throw new Error("can't perform auth, no challenge was received");return this.authPromise?this.authPromise:(this.authPromise=new Promise(async(n,r)=>{try{let o=await e(Xf(this.url,t)),i=setTimeout(()=>{let s=this.openEventPublishes.get(o.id);s&&(s.reject(new Error("auth timed out")),this.openEventPublishes.delete(o.id))},this.publishTimeout);this.openEventPublishes.set(o.id,{resolve:n,reject:r,timeout:i}),this.send('["AUTH",'+JSON.stringify(o)+"]")}catch(o){console.warn("subscribe auth function failed:",o)}}),this.authPromise)}async publish(e){const t=new Promise((n,r)=>{const o=setTimeout(()=>{const i=this.openEventPublishes.get(e.id);i&&(i.reject(new Error("publish timed out")),this.openEventPublishes.delete(e.id))},this.publishTimeout);this.openEventPublishes.set(e.id,{resolve:n,reject:r,timeout:o})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),t}async count(e,t){this.serial++;const n=(t==null?void 0:t.id)||"count:"+this.serial,r=new Promise((o,i)=>{this.openCountRequests.set(n,{resolve:o,reject:i})});return this.send('["COUNT","'+n+'",'+JSON.stringify(e).substring(1)),r}subscribe(e,t){const n=this.prepareSubscription(e,t);return n.fire(),n}prepareSubscription(e,t){this.serial++;const n=t.id||(t.label?t.label+":":"sub:")+this.serial,r=new hp(this,n,e,t);return this.openSubs.set(n,r),r}close(){var e,t,n;this.closedIntentionally=!0,this.reconnectTimeoutHandle&&(clearTimeout(this.reconnectTimeoutHandle),this.reconnectTimeoutHandle=void 0),this.pingTimeoutHandle&&(clearTimeout(this.pingTimeoutHandle),this.pingTimeoutHandle=void 0),this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(e=this.onclose)==null||e.call(this),((t=this.ws)==null?void 0:t.readyState)===this._WebSocket.OPEN&&((n=this.ws)==null||n.close())}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},hp=class{constructor(e,t,n,r){U(this,"relay");U(this,"id");U(this,"closed",!1);U(this,"eosed",!1);U(this,"filters");U(this,"alreadyHaveEvent");U(this,"receivedEvent");U(this,"onevent");U(this,"oneose");U(this,"onclose");U(this,"oncustom");U(this,"eoseTimeout");U(this,"eoseTimeoutHandle");if(n.length===0)throw new Error("subscription can't be created with zero filters");this.relay=e,this.filters=n,this.id=t,this.alreadyHaveEvent=r.alreadyHaveEvent,this.receivedEvent=r.receivedEvent,this.eoseTimeout=r.eoseTimeout||e.baseEoseTimeout,this.oneose=r.oneose,this.onclose=r.onclose,this.onevent=r.onevent||(o=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,o)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var e;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(e=this.oneose)==null||e.call(this))}close(e="closed by caller"){var t;if(!this.closed&&this.relay.connected){try{this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]")}catch(n){if(!(n instanceof Jf))throw n}this.closed=!0}this.relay.openSubs.delete(this.id),(t=this.onclose)==null||t.call(this,e)}},gp;try{gp=WebSocket}catch{}var pp=class{constructor(e){U(this,"relays",new Map);U(this,"seenOn",new Map);U(this,"trackRelays",!1);U(this,"verifyEvent");U(this,"enablePing");U(this,"enableReconnect");U(this,"trustedRelayURLs",new Set);U(this,"_WebSocket");this.verifyEvent=e.verifyEvent,this._WebSocket=e.websocketImplementation,this.enablePing=e.enablePing,this.enableReconnect=e.enableReconnect}async ensureRelay(e,t){e=an(e);let n=this.relays.get(e);return n||(n=new Qf(e,{verifyEvent:this.trustedRelayURLs.has(e)?dp:this.verifyEvent,websocketImplementation:this._WebSocket,enablePing:this.enablePing,enableReconnect:this.enableReconnect}),n.onclose=()=>{n&&!n.enableReconnect&&this.relays.delete(e)},t!=null&&t.connectionTimeout&&(n.connectionTimeout=t.connectionTimeout),this.relays.set(e,n)),await n.connect(),n}close(e){e.map(an).forEach(t=>{var n;(n=this.relays.get(t))==null||n.close(),this.relays.delete(t)})}subscribe(e,t,n){n.onauth=n.onauth||n.doauth;const r=[];for(let o=0;o<e.length;o++){const i=an(e[o]);r.find(s=>s.url===i)||r.push({url:i,filter:t})}return this.subscribeMap(r,n)}subscribeMany(e,t,n){n.onauth=n.onauth||n.doauth;const r=[],o=[];for(let i=0;i<e.length;i++){const s=an(e[i]);o.indexOf(s)===-1&&(o.push(s),r.push({url:s,filter:t}))}return this.subscribeMap(r,n)}subscribeMap(e,t){t.onauth=t.onauth||t.doauth;const n=new Map;for(const d of e){const{url:h,filter:p}=d;n.has(h)||n.set(h,[]),n.get(h).push(p)}const r=Array.from(n.entries()).map(([d,h])=>({url:d,filters:h}));this.trackRelays&&(t.receivedEvent=(d,h)=>{let p=this.seenOn.get(h);p||(p=new Set,this.seenOn.set(h,p)),p.add(d)});const o=new Set,i=[],s=[];let c=d=>{var h;s[d]||(s[d]=!0,s.filter(p=>p).length===r.length&&((h=t.oneose)==null||h.call(t),c=()=>{}))};const a=[];let f=(d,h)=>{var p;a[d]||(c(d),a[d]=h,a.filter(g=>g).length===r.length&&((p=t.onclose)==null||p.call(t,a),f=()=>{}))};const u=d=>{var p;if((p=t.alreadyHaveEvent)!=null&&p.call(t,d))return!0;const h=o.has(d);return o.add(d),h},l=Promise.all(r.map(async({url:d,filters:h},p)=>{let g;try{g=await this.ensureRelay(d,{connectionTimeout:t.maxWait?Math.max(t.maxWait*.8,t.maxWait-1e3):void 0})}catch(m){f(p,(m==null?void 0:m.message)||String(m));return}let y=g.subscribe(h,{...t,oneose:()=>c(p),onclose:m=>{m.startsWith("auth-required: ")&&t.onauth?g.auth(t.onauth).then(()=>{g.subscribe(h,{...t,oneose:()=>c(p),onclose:I=>{f(p,I)},alreadyHaveEvent:u,eoseTimeout:t.maxWait})}).catch(I=>{f(p,`auth was required and attempted, but failed with: ${I}`)}):f(p,m)},alreadyHaveEvent:u,eoseTimeout:t.maxWait});i.push(y)}));return{async close(d){await l,i.forEach(h=>{h.close(d)})}}}subscribeEose(e,t,n){n.onauth=n.onauth||n.doauth;const r=this.subscribe(e,t,{...n,oneose(){r.close("closed automatically on eose")}});return r}subscribeManyEose(e,t,n){n.onauth=n.onauth||n.doauth;const r=this.subscribeMany(e,t,{...n,oneose(){r.close("closed automatically on eose")}});return r}async querySync(e,t,n){return new Promise(async r=>{const o=[];this.subscribeEose(e,t,{...n,onevent(i){o.push(i)},onclose(i){r(o)}})})}async get(e,t,n){t.limit=1;const r=await this.querySync(e,t,n);return r.sort((o,i)=>i.created_at-o.created_at),r[0]||null}publish(e,t,n){return e.map(an).map(async(r,o,i)=>{if(i.indexOf(r)!==o)return Promise.reject("duplicate url");let s=await this.ensureRelay(r);return s.publish(t).catch(async c=>{if(c instanceof Error&&c.message.startsWith("auth-required: ")&&(n!=null&&n.onauth))return await s.auth(n.onauth),s.publish(t);throw c}).then(c=>{if(this.trackRelays){let a=this.seenOn.get(t.id);a||(a=new Set,this.seenOn.set(t.id,a)),a.add(s)}return c})})}listConnectionStatus(){const e=new Map;return this.relays.forEach((t,n)=>e.set(n,t.connected)),e}destroy(){this.relays.forEach(e=>e.close()),this.relays=new Map}},el;try{el=WebSocket}catch{}var Qb=class extends pp{constructor(e){super({verifyEvent:ko,websocketImplementation:el,...e})}},wp={};te(wp,{BECH32_REGEX:()=>tl,Bech32MaxSize:()=>Ts,NostrTypeGuard:()=>yp,decode:()=>No,decodeNostrURI:()=>vp,encodeBytes:()=>Oo,naddrEncode:()=>Bp,neventEncode:()=>Ap,noteEncode:()=>xp,nprofileEncode:()=>_p,npubEncode:()=>Ep,nsecEncode:()=>mp});var yp={isNProfile:e=>/^nprofile1[a-z\d]+$/.test(e||""),isNEvent:e=>/^nevent1[a-z\d]+$/.test(e||""),isNAddr:e=>/^naddr1[a-z\d]+$/.test(e||""),isNSec:e=>/^nsec1[a-z\d]{58}$/.test(e||""),isNPub:e=>/^npub1[a-z\d]{58}$/.test(e||""),isNote:e=>/^note1[a-z\d]+$/.test(e||""),isNcryptsec:e=>/^ncryptsec1[a-z\d]+$/.test(e||"")},Ts=5e3,tl=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function bp(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=e&255,t}function vp(e){try{return e.startsWith("nostr:")&&(e=e.substring(6)),No(e)}catch{return{type:"invalid",data:null}}}function No(e){var o,i,s,c,a,f,u;let{prefix:t,words:n}=Ue.decode(e,Ts),r=new Uint8Array(Ue.fromWords(n));switch(t){case"nprofile":{let l=ni(r);if(!((o=l[0])!=null&&o[0]))throw new Error("missing TLV 0 for nprofile");if(l[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:oe(l[0][0]),relays:l[1]?l[1].map(d=>xt.decode(d)):[]}}}case"nevent":{let l=ni(r);if(!((i=l[0])!=null&&i[0]))throw new Error("missing TLV 0 for nevent");if(l[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(l[2]&&l[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(l[3]&&l[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:oe(l[0][0]),relays:l[1]?l[1].map(d=>xt.decode(d)):[],author:(s=l[2])!=null&&s[0]?oe(l[2][0]):void 0,kind:(c=l[3])!=null&&c[0]?parseInt(oe(l[3][0]),16):void 0}}}case"naddr":{let l=ni(r);if(!((a=l[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((f=l[2])!=null&&f[0]))throw new Error("missing TLV 2 for naddr");if(l[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=l[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(l[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:xt.decode(l[0][0]),pubkey:oe(l[2][0]),kind:parseInt(oe(l[3][0]),16),relays:l[1]?l[1].map(d=>xt.decode(d)):[]}}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:oe(r)};default:throw new Error(`unknown prefix ${t}`)}}function ni(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],i=n.slice(2,2+o);if(n=n.slice(2+o),i.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(i)}return t}function mp(e){return Oo("nsec",e)}function Ep(e){return Oo("npub",Ce(e))}function xp(e){return Oo("note",Ce(e))}function Ro(e,t){let n=Ue.toWords(t);return Ue.encode(e,n,Ts)}function Oo(e,t){return Ro(e,t)}function _p(e){let t=Is({0:[Ce(e.pubkey)],1:(e.relays||[]).map(n=>Ye.encode(n))});return Ro("nprofile",t)}function Ap(e){let t;e.kind!==void 0&&(t=bp(e.kind));let n=Is({0:[Ce(e.id)],1:(e.relays||[]).map(r=>Ye.encode(r)),2:e.author?[Ce(e.author)]:[],3:t?[new Uint8Array(t)]:[]});return Ro("nevent",n)}function Bp(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let n=Is({0:[Ye.encode(e.identifier)],1:(e.relays||[]).map(r=>Ye.encode(r)),2:[Ce(e.pubkey)],3:[new Uint8Array(t)]});return Ro("naddr",n)}function Is(e){let t=[];return Object.entries(e).reverse().forEach(([n,r])=>{r.forEach(o=>{let i=new Uint8Array(o.length+2);i.set([parseInt(n)],0),i.set([o.length],1),i.set(o,2),t.push(i)})}),ir(...t)}var Sp={};te(Sp,{decrypt:()=>Tp,encrypt:()=>nl});function nl(e,t,n){const r=e instanceof Uint8Array?oe(e):e,o=or.getSharedSecret(r,"02"+t),i=rl(o);let s=Uint8Array.from(no(16)),c=Ye.encode(n),a=Bf(i,s).encrypt(c),f=Bt.encode(new Uint8Array(a)),u=Bt.encode(new Uint8Array(s.buffer));return`${f}?iv=${u}`}function Tp(e,t,n){const r=e instanceof Uint8Array?oe(e):e;let[o,i]=n.split("?iv="),s=or.getSharedSecret(r,"02"+t),c=rl(s),a=Bt.decode(i),f=Bt.decode(o),u=Bf(c,a).decrypt(f);return xt.decode(u)}function rl(e){return e.slice(1,33)}var Ip={};te(Ip,{NIP05_REGEX:()=>$s,isNip05:()=>$p,isValid:()=>Up,queryProfile:()=>ol,searchDomain:()=>kp,useFetchImplementation:()=>Lp});var $s=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,$p=e=>$s.test(e||""),Co;try{Co=fetch}catch{}function Lp(e){Co=e}async function kp(e,t=""){try{const n=`https://${e}/.well-known/nostr.json?name=${t}`,r=await Co(n,{redirect:"manual"});if(r.status!==200)throw Error("Wrong response code");return(await r.json()).names}catch{return{}}}async function ol(e){var o;const t=e.match($s);if(!t)return null;const[,n="_",r]=t;try{const i=`https://${r}/.well-known/nostr.json?name=${n}`,s=await Co(i,{redirect:"manual"});if(s.status!==200)throw Error("Wrong response code");const c=await s.json(),a=c.names[n];return a?{pubkey:a,relays:(o=c.relays)==null?void 0:o[a]}:null}catch{return null}}async function Up(e,t){const n=await ol(t);return n?n.pubkey===e:!1}var Np={};te(Np,{parse:()=>Rp});function Rp(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[],quotes:[]};let n,r;for(let o=e.tags.length-1;o>=0;o--){const i=e.tags[o];if(i[0]==="e"&&i[1]){const[s,c,a,f,u]=i,l={id:c,relays:a?[a]:[],author:u};if(f==="root"){t.root=l;continue}if(f==="reply"){t.reply=l;continue}if(f==="mention"){t.mentions.push(l);continue}n?r=l:n=l,t.mentions.push(l);continue}if(i[0]==="q"&&i[1]){const[s,c,a]=i;t.quotes.push({id:c,relays:a?[a]:[]})}if(i[0]==="p"&&i[1]){t.profiles.push({pubkey:i[1],relays:i[2]?[i[2]]:[]});continue}}return t.root||(t.root=r||n||t.reply),t.reply||(t.reply=n||t.root),[t.reply,t.root].forEach(o=>{if(!o)return;let i=t.mentions.indexOf(o);if(i!==-1&&t.mentions.splice(i,1),o.author){let s=t.profiles.find(c=>c.pubkey===o.author);s&&s.relays&&(o.relays||(o.relays=[]),s.relays.forEach(c=>{var a;((a=o.relays)==null?void 0:a.indexOf(c))===-1&&o.relays.push(c)}),s.relays=o.relays)}}),t.mentions.forEach(o=>{if(o.author){let i=t.profiles.find(s=>s.pubkey===o.author);i&&i.relays&&(o.relays||(o.relays=[]),i.relays.forEach(s=>{o.relays.indexOf(s)===-1&&o.relays.push(s)}),i.relays=o.relays)}}),t}var Op={};te(Op,{fetchRelayInformation:()=>Hp,useFetchImplementation:()=>Cp});var il;try{il=fetch}catch{}function Cp(e){il=e}async function Hp(e){return await(await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var Mp={};te(Mp,{fastEventHash:()=>cl,getPow:()=>sl,minePow:()=>Pp});function sl(e){let t=0;for(let n=0;n<64;n+=8){const r=parseInt(e.substring(n,n+8),16);if(r===0)t+=32;else{t+=Math.clz32(r);break}}return t}function Pp(e,t){let n=0;const r=e,o=["nonce",n.toString(),t.toString()];for(r.tags.push(o);;){const i=Math.floor(new Date().getTime()/1e3);if(i!==r.created_at&&(n=0,r.created_at=i),o[1]=(++n).toString(),r.id=cl(r),sl(r.id)>=t)break}return r}function cl(e){return oe(Lt(Ye.encode(JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content]))))}var qp={};te(qp,{unwrapEvent:()=>Jp,unwrapManyEvents:()=>Qp,wrapEvent:()=>ml,wrapManyEvents:()=>Xp});var Vp={};te(Vp,{createRumor:()=>wl,createSeal:()=>yl,createWrap:()=>bl,unwrapEvent:()=>Rs,unwrapManyEvents:()=>vl,wrapEvent:()=>oo,wrapManyEvents:()=>Gp});var Dp={};te(Dp,{decrypt:()=>Ns,encrypt:()=>Us,getConversationKey:()=>Ls,v2:()=>Zp});var al=1,fl=65535;function Ls(e,t){const n=or.getSharedSecret(e,"02"+t).subarray(1,33);return H0(Lt,n,"nip44-v2")}function ll(e,t){const n=M0(Lt,e,t,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}}function ks(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)}function jp(e){if(!Number.isSafeInteger(e)||e<al||e>fl)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t}function zp(e){const t=Ye.encode(e),n=t.length,r=jp(n),o=new Uint8Array(ks(n)-n);return ir(r,t,o)}function Fp(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(t<al||t>fl||n.length!==t||e.length!==2+ks(t))throw new Error("invalid padding");return xt.decode(n)}function ul(e,t,n){if(n.length!==32)throw new Error("AAD associated data must be 32 bytes");const r=ir(n,t);return kr(Lt,e,r)}function Kp(e){if(typeof e!="string")throw new Error("payload must be a valid string");const t=e.length;if(t<132||t>87472)throw new Error("invalid payload length: "+t);if(e[0]==="#")throw new Error("unknown encryption version");let n;try{n=Bt.decode(e)}catch(i){throw new Error("invalid base64: "+i.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const o=n[0];if(o!==2)throw new Error("unknown encryption version "+o);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}function Us(e,t,n=no(32)){const{chacha_key:r,chacha_nonce:o,hmac_key:i}=ll(t,n),s=zp(e),c=kf(r,o,s),a=ul(i,c,n);return Bt.encode(ir(new Uint8Array([2]),n,c,a))}function Ns(e,t){const{nonce:n,ciphertext:r,mac:o}=Kp(e),{chacha_key:i,chacha_nonce:s,hmac_key:c}=ll(t,n),a=ul(c,r,n);if(!vf(a,o))throw new Error("invalid MAC");const f=kf(i,s,r);return Fp(f)}var Zp={utils:{getConversationKey:Ls,calcPaddedLen:ks},encrypt:Us,decrypt:Ns},Wp=2880*60,dl=()=>Math.round(Date.now()/1e3),hl=()=>Math.round(dl()-Math.random()*Wp),gl=(e,t)=>Ls(e,t),pl=(e,t,n)=>Us(JSON.stringify(e),gl(t,n)),$c=(e,t)=>JSON.parse(Ns(e.content,gl(t,e.pubkey)));function wl(e,t){const n={created_at:dl(),content:"",tags:[],...e,pubkey:ms(t)};return n.id=zr(n),n}function yl(e,t,n){return lt({kind:Pf,content:pl(e,t,n),created_at:hl(),tags:[]},t)}function bl(e,t){const n=K0();return lt({kind:Kf,content:pl(e,n,t),created_at:hl(),tags:[["p",t]]},n)}function oo(e,t,n){const r=wl(e,t),o=yl(r,t,n);return bl(o,n)}function Gp(e,t,n){if(!n||n.length===0)throw new Error("At least one recipient is required.");const r=ms(t),o=[oo(e,t,r)];return n.forEach(i=>{o.push(oo(e,t,i))}),o}function Rs(e,t){const n=$c(e,t);return $c(n,t)}function vl(e,t){let n=[];return e.forEach(r=>{n.push(Rs(r,t))}),n.sort((r,o)=>r.created_at-o.created_at),n}function Yp(e,t,n,r){const o={created_at:Math.ceil(Date.now()/1e3),kind:qf,tags:[],content:t};return(Array.isArray(e)?e:[e]).forEach(({publicKey:s,relayUrl:c})=>{o.tags.push(c?["p",s,c]:["p",s])}),r&&o.tags.push(["e",r.eventId,r.relayUrl||"","reply"]),n&&o.tags.push(["subject",n]),o}function ml(e,t,n,r,o){const i=Yp(t,n,r,o);return oo(i,e,t.publicKey)}function Xp(e,t,n,r,o){if(!t||t.length===0)throw new Error("At least one recipient is required.");return[{publicKey:ms(e)},...t].map(s=>ml(e,s,n,r,o))}var Jp=Rs,Qp=vl,ew={};te(ew,{finishRepostEvent:()=>tw,getRepostedEvent:()=>nw,getRepostedEventPointer:()=>El});function tw(e,t,n,r){var s;let o;const i=[...e.tags??[],["e",t.id,n],["p",t.pubkey]];return t.kind===Mf?o=_s:(o=Bs,i.push(["k",String(t.kind)])),lt({kind:o,tags:i,content:e.content===""||(s=t.tags)!=null&&s.find(c=>c[0]==="-")?"":JSON.stringify(t),created_at:e.created_at},r)}function El(e){if(![_s,Bs].includes(e.kind))return;let t,n;for(let r=e.tags.length-1;r>=0&&(t===void 0||n===void 0);r--){const o=e.tags[r];o.length>=2&&(o[0]==="e"&&t===void 0?t=o:o[0]==="p"&&n===void 0&&(n=o))}if(t!==void 0)return{id:t[1],relays:[t[2],n==null?void 0:n[2]].filter(r=>typeof r=="string"),author:n==null?void 0:n[1]}}function nw(e,{skipVerification:t}={}){const n=El(e);if(n===void 0||e.content==="")return;let r;try{r=JSON.parse(e.content)}catch{return}if(r.id===n.id&&!(!t&&!ko(r)))return r}var rw={};te(rw,{NOSTR_URI_REGEX:()=>Os,parse:()=>iw,test:()=>ow});var Os=new RegExp(`nostr:(${tl.source})`);function ow(e){return typeof e=="string"&&new RegExp(`^${Os.source}$`).test(e)}function iw(e){const t=e.match(new RegExp(`^${Os.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:No(t[1])}}var sw={};te(sw,{finishReactionEvent:()=>cw,getReactedEventPointer:()=>aw});function cw(e,t,n){const r=t.tags.filter(o=>o.length>=2&&(o[0]==="e"||o[0]==="p"));return lt({...e,kind:As,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function aw(e){if(e.kind!==As)return;let t,n;for(let r=e.tags.length-1;r>=0&&(t===void 0||n===void 0);r--){const o=e.tags[r];o.length>=2&&(o[0]==="e"&&t===void 0?t=o:o[0]==="p"&&n===void 0&&(n=o))}if(!(t===void 0||n===void 0))return{id:t[1],relays:[t[2],n[2]].filter(r=>r!==void 0),author:n[1]}}var fw={};te(fw,{parse:()=>uw});var Lc=/\W/m,kc=/\W |\W$|$|,| /m,lw=42;function*uw(e){let t=[];if(typeof e!="string"){for(let i=0;i<e.tags.length;i++){const s=e.tags[i];s[0]==="emoji"&&s.length>=3&&t.push({type:"emoji",shortcode:s[1],url:s[2]})}e=e.content}const n=e.length;let r=0,o=0;e:for(;o<n;){const i=e.indexOf(":",o),s=e.indexOf("#",o);if(i===-1&&s===-1)break e;if(i===-1||s>=0&&s<i){if(s===0||e[s-1]===" "){const c=e.slice(s+1,s+lw).match(Lc),a=c?s+1+c.index:n;yield{type:"text",text:e.slice(r,s)},yield{type:"hashtag",value:e.slice(s+1,a)},o=a,r=o;continue e}o=s+1;continue e}if(e.slice(i-5,i)==="nostr"){const c=e.slice(i+60).match(Lc),a=c?i+60+c.index:n;try{let f,{data:u,type:l}=No(e.slice(i+1,a));switch(l){case"npub":f={pubkey:u};break;case"nsec":case"note":o=a+1;continue;default:f=u}r!==i-5&&(yield{type:"text",text:e.slice(r,i-5)}),yield{type:"reference",pointer:f},o=a,r=o;continue e}catch{o=i+1;continue e}}else if(e.slice(i-5,i)==="https"||e.slice(i-4,i)==="http"){const c=e.slice(i+4).match(kc),a=c?i+4+c.index:n,f=e[i-1]==="s"?5:4;try{let u=new URL(e.slice(i-f,a));if(u.hostname.indexOf(".")===-1)throw new Error("invalid url");if(r!==i-f&&(yield{type:"text",text:e.slice(r,i-f)}),/\.(png|jpe?g|gif|webp|heic|svg)$/i.test(u.pathname)){yield{type:"image",url:u.toString()},o=a,r=o;continue e}if(/\.(mp4|avi|webm|mkv|mov)$/i.test(u.pathname)){yield{type:"video",url:u.toString()},o=a,r=o;continue e}if(/\.(mp3|aac|ogg|opus|wav|flac)$/i.test(u.pathname)){yield{type:"audio",url:u.toString()},o=a,r=o;continue e}yield{type:"url",url:u.toString()},o=a,r=o;continue e}catch{o=a+1;continue e}}else if(e.slice(i-3,i)==="wss"||e.slice(i-2,i)==="ws"){const c=e.slice(i+4).match(kc),a=c?i+4+c.index:n,f=e[i-1]==="s"?3:2;try{let u=new URL(e.slice(i-f,a));if(u.hostname.indexOf(".")===-1)throw new Error("invalid ws url");r!==i-f&&(yield{type:"text",text:e.slice(r,i-f)}),yield{type:"relay",url:u.toString()},o=a,r=o;continue e}catch{o=a+1;continue e}}else{for(let c=0;c<t.length;c++){const a=t[c];if(e[i+a.shortcode.length+1]===":"&&e.slice(i+1,i+a.shortcode.length+1)===a.shortcode){r!==i&&(yield{type:"text",text:e.slice(r,i)}),yield a,o=i+a.shortcode.length+2,r=o;continue e}}o=i+1;continue e}}r!==n&&(yield{type:"text",text:e.slice(r)})}var dw={};te(dw,{channelCreateEvent:()=>hw,channelHideMessageEvent:()=>ww,channelMessageEvent:()=>pw,channelMetadataEvent:()=>gw,channelMuteUserEvent:()=>yw});var hw=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return lt({kind:Vf,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},gw=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return lt({kind:Df,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},pw=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),lt({kind:jf,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},ww=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return lt({kind:zf,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},yw=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return lt({kind:Ff,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)},bw={};te(bw,{EMOJI_SHORTCODE_REGEX:()=>xl,matchAll:()=>vw,regex:()=>Cs,replaceAll:()=>mw});var xl=/:(\w+):/,Cs=()=>new RegExp(`\\B${xl.source}\\B`,"g");function*vw(e){const t=e.matchAll(Cs());for(const n of t)try{const[r,o]=n;yield{shortcode:r,name:o,start:n.index,end:n.index+r.length}}catch{}}function mw(e,t){return e.replaceAll(Cs(),(n,r)=>t({shortcode:n,name:r}))}var Ew={};te(Ew,{useFetchImplementation:()=>xw,validateGithub:()=>_w});var Hs;try{Hs=fetch}catch{}function xw(e){Hs=e}async function _w(e,t,n){try{return await(await Hs(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var Aw={};te(Aw,{makeNwcRequestEvent:()=>Sw,parseConnectionString:()=>Bw});function Bw(e){const{host:t,pathname:n,searchParams:r}=new URL(e),o=n||t,i=r.get("relay"),s=r.get("secret");if(!o||!i||!s)throw new Error("invalid connection string");return{pubkey:o,relay:i,secret:s}}async function Sw(e,t,n){const o=nl(t,e,JSON.stringify({method:"pay_invoice",params:{invoice:n}})),i={kind:Wf,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e]]};return lt(i,t)}var Tw={};te(Tw,{normalizeIdentifier:()=>Iw});function Iw(e){return e=e.trim().toLowerCase(),e=e.normalize("NFKC"),Array.from(e).map(t=>new RegExp("\\p{Letter}","u").test(t)||new RegExp("\\p{Number}","u").test(t)?t:"-").join("")}var $w={};te($w,{getSatoshisAmountFromBolt11:()=>Ow,getZapEndpoint:()=>kw,makeZapReceipt:()=>Rw,makeZapRequest:()=>Uw,useFetchImplementation:()=>Lw,validateZapRequest:()=>Nw});var Ms;try{Ms=fetch}catch{}function Lw(e){Ms=e}async function kw(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(r){let[s,c]=r.split("@");t=new URL(`/.well-known/lnurlp/${s}`,`https://${c}`).toString()}else if(n){let{words:s}=Ue.decode(n,1e3),c=Ue.fromWords(s);t=xt.decode(c)}else return null;let i=await(await Ms(t)).json();if(i.allowsNostr&&i.nostrPubkey)return i.callback}catch{}return null}function Uw(e){let t={kind:9734,created_at:Math.round(Date.now()/1e3),content:e.comment||"",tags:[["p","pubkey"in e?e.pubkey:e.event.pubkey],["amount",e.amount.toString()],["relays",...e.relays]]};if("event"in e){if(t.tags.push(["e",e.event.id]),Es(e.event.kind)){const n=["a",`${e.event.kind}:${e.event.pubkey}:`];t.tags.push(n)}else if(xs(e.event.kind)){let n=e.event.tags.find(([o,i])=>o==="d"&&i);if(!n)throw new Error("d tag not found or is empty");const r=["a",`${e.event.kind}:${e.event.pubkey}:${n[1]}`];t.tags.push(r)}t.tags.push(["k",e.event.kind.toString()])}return t}function Nw(e){let t;try{t=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!bs(t))return"Zap request is not a valid Nostr event.";if(!ko(t))return"Invalid signature on zap request.";let n=t.tags.find(([i,s])=>i==="p"&&s);if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find(([i,s])=>i==="e"&&s);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find(([i,s])=>i==="relays"&&s)?null:"Zap request doesn't have a 'relays' tag."}function Rw({zapRequest:e,preimage:t,bolt11:n,paidAt:r}){let o=JSON.parse(e),i=o.tags.filter(([c])=>c==="e"||c==="p"||c==="a"),s={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...i,["P",o.pubkey],["bolt11",n],["description",e]]};return t&&s.tags.push(["preimage",t]),s}function Ow(e){if(e.length<50)return 0;e=e.substring(0,50);const t=e.lastIndexOf("1");if(t===-1)return 0;const n=e.substring(0,t);if(!n.startsWith("lnbc"))return 0;const r=n.substring(4);if(r.length<1)return 0;const o=r[r.length-1],i=o.charCodeAt(0)-48,s=i>=0&&i<=9;let c=r.length-1;if(s&&c++,c<1)return 0;const a=parseInt(r.substring(0,c));switch(o){case"m":return a*1e5;case"u":return a*100;case"n":return a/10;case"p":return a/1e4;default:return a*1e8}}var Cw={};te(Cw,{Negentropy:()=>Al,NegentropyStorageVector:()=>Pw,NegentropySync:()=>qw});var ri=97,Vn=32,_l=16,rn={Skip:0,Fingerprint:1,IdList:2},vt=class{constructor(e){U(this,"_raw");U(this,"length");typeof e=="number"?(this._raw=new Uint8Array(e),this.length=0):e instanceof Uint8Array?(this._raw=new Uint8Array(e),this.length=e.length):(this._raw=new Uint8Array(512),this.length=0)}unwrap(){return this._raw.subarray(0,this.length)}get capacity(){return this._raw.byteLength}extend(e){if(e instanceof vt&&(e=e.unwrap()),typeof e.length!="number")throw Error("bad length");const t=e.length+this.length;if(this.capacity<t){const n=this._raw,r=Math.max(this.capacity*2,t);this._raw=new Uint8Array(r),this._raw.set(n)}this._raw.set(e,this.length),this.length+=e.length}shift(){const e=this._raw[0];return this._raw=this._raw.subarray(1),this.length--,e}shiftN(e=1){const t=this._raw.subarray(0,e);return this._raw=this._raw.subarray(e),this.length-=e,t}};function Cr(e){let t=0;for(;;){if(e.length===0)throw Error("parse ends prematurely");let n=e.shift();if(t=t<<7|n&127,(n&128)===0)break}return t}function pt(e){if(e===0)return new vt(new Uint8Array([0]));let t=[];for(;e!==0;)t.push(e&127),e>>>=7;t.reverse();for(let n=0;n<t.length-1;n++)t[n]|=128;return new vt(new Uint8Array(t))}function Hw(e){return Fr(e,1)[0]}function Fr(e,t){if(e.length<t)throw Error("parse ends prematurely");return e.shiftN(t)}var Mw=class{constructor(){U(this,"buf");this.setToZero()}setToZero(){this.buf=new Uint8Array(Vn)}add(e){let t=0,n=0,r=new DataView(this.buf.buffer),o=new DataView(e.buffer);for(let i=0;i<8;i++){let s=i*4,c=r.getUint32(s,!0),a=o.getUint32(s,!0),f=c;f+=t,f+=a,f>4294967295&&(n=1),r.setUint32(s,f&4294967295,!0),t=n,n=0}}negate(){let e=new DataView(this.buf.buffer);for(let n=0;n<8;n++){let r=n*4;e.setUint32(r,~e.getUint32(r,!0))}let t=new Uint8Array(Vn);t[0]=1,this.add(t)}getFingerprint(e){let t=new vt;return t.extend(this.buf),t.extend(pt(e)),Lt(t.unwrap()).subarray(0,_l)}},Pw=class{constructor(){U(this,"items");U(this,"sealed");this.items=[],this.sealed=!1}insert(e,t){if(this.sealed)throw Error("already sealed");const n=bf(t);if(n.byteLength!==Vn)throw Error("bad id size for added item");this.items.push({timestamp:e,id:n})}seal(){if(this.sealed)throw Error("already sealed");this.sealed=!0,this.items.sort(oi);for(let e=1;e<this.items.length;e++)if(oi(this.items[e-1],this.items[e])===0)throw Error("duplicate item inserted")}unseal(){this.sealed=!1}size(){return this._checkSealed(),this.items.length}getItem(e){if(this._checkSealed(),e>=this.items.length)throw Error("out of range");return this.items[e]}iterate(e,t,n){this._checkSealed(),this._checkBounds(e,t);for(let r=e;r<t&&n(this.items[r],r);++r);}findLowerBound(e,t,n){return this._checkSealed(),this._checkBounds(e,t),this._binarySearch(this.items,e,t,r=>oi(r,n)<0)}fingerprint(e,t){let n=new Mw;return n.setToZero(),this.iterate(e,t,r=>(n.add(r.id),!0)),n.getFingerprint(t-e)}_checkSealed(){if(!this.sealed)throw Error("not sealed")}_checkBounds(e,t){if(e>t||t>this.items.length)throw Error("bad range")}_binarySearch(e,t,n,r){let o=n-t;for(;o>0;){let i=t,s=Math.floor(o/2);i+=s,r(e[i])?(t=++i,o-=s+1):o=s}return t}},Al=class{constructor(e,t=6e4){U(this,"storage");U(this,"frameSizeLimit");U(this,"lastTimestampIn");U(this,"lastTimestampOut");if(t<4096)throw Error("frameSizeLimit too small");this.storage=e,this.frameSizeLimit=t,this.lastTimestampIn=0,this.lastTimestampOut=0}_bound(e,t){return{timestamp:e,id:t||new Uint8Array(0)}}initiate(){let e=new vt;return e.extend(new Uint8Array([ri])),this.splitRange(0,this.storage.size(),this._bound(Number.MAX_VALUE),e),Hn(e.unwrap())}reconcile(e,t,n){const r=new vt(bf(e));this.lastTimestampIn=this.lastTimestampOut=0;let o=new vt;o.extend(new Uint8Array([ri]));let i=Hw(r);if(i<96||i>111)throw Error("invalid negentropy protocol version byte");if(i!==ri)throw Error("unsupported negentropy protocol version requested: "+(i-96));let s=this.storage.size(),c=this._bound(0),a=0,f=!1;for(;r.length!==0;){let u=new vt,l=()=>{f&&(f=!1,u.extend(this.encodeBound(c)),u.extend(pt(rn.Skip)))},d=this.decodeBound(r),h=Cr(r),p=a,g=this.storage.findLowerBound(a,s,d);if(h===rn.Skip)f=!0;else if(h===rn.Fingerprint){let y=Fr(r,_l),m=this.storage.fingerprint(p,g);Bl(y,m)!==0?(l(),this.splitRange(p,g,d,u)):f=!0}else if(h===rn.IdList){let y=Cr(r),m={};for(let I=0;I<y;I++){let $=Fr(r,Vn);m[Hn($)]=$}if(f=!0,this.storage.iterate(p,g,I=>{let $=I.id;const M=Hn($);return m[M]?delete m[Hn($)]:t==null||t(M),!0}),n)for(let I of Object.values(m))n(Hn(I))}else throw Error("unexpected mode");if(this.exceededFrameSizeLimit(o.length+u.length)){let y=this.storage.fingerprint(g,s);o.extend(this.encodeBound(this._bound(Number.MAX_VALUE))),o.extend(pt(rn.Fingerprint)),o.extend(y);break}else o.extend(u);a=g,c=d}return o.length===1?null:Hn(o.unwrap())}splitRange(e,t,n,r){let o=t-e,i=16;if(o<i*2)r.extend(this.encodeBound(n)),r.extend(pt(rn.IdList)),r.extend(pt(o)),this.storage.iterate(e,t,s=>(r.extend(s.id),!0));else{let s=Math.floor(o/i),c=o%i,a=e;for(let f=0;f<i;f++){let u=s+(f<c?1:0),l=this.storage.fingerprint(a,a+u);a+=u;let d;if(a===t)d=n;else{let h,p;this.storage.iterate(a-1,a+1,(g,y)=>(y===a-1?h=g:p=g,!0)),d=this.getMinimalBound(h,p)}r.extend(this.encodeBound(d)),r.extend(pt(rn.Fingerprint)),r.extend(l)}}}exceededFrameSizeLimit(e){return e>this.frameSizeLimit-200}decodeTimestampIn(e){let t=Cr(e);return t=t===0?Number.MAX_VALUE:t-1,this.lastTimestampIn===Number.MAX_VALUE||t===Number.MAX_VALUE?(this.lastTimestampIn=Number.MAX_VALUE,Number.MAX_VALUE):(t+=this.lastTimestampIn,this.lastTimestampIn=t,t)}decodeBound(e){let t=this.decodeTimestampIn(e),n=Cr(e);if(n>Vn)throw Error("bound key too long");let r=Fr(e,n);return{timestamp:t,id:r}}encodeTimestampOut(e){if(e===Number.MAX_VALUE)return this.lastTimestampOut=Number.MAX_VALUE,pt(0);let t=e;return e-=this.lastTimestampOut,this.lastTimestampOut=t,pt(e+1)}encodeBound(e){let t=new vt;return t.extend(this.encodeTimestampOut(e.timestamp)),t.extend(pt(e.id.length)),t.extend(e.id),t}getMinimalBound(e,t){if(t.timestamp!==e.timestamp)return this._bound(t.timestamp);{let n=0,r=t.id,o=e.id;for(let i=0;i<Vn&&r[i]===o[i];i++)n++;return this._bound(t.timestamp,t.id.subarray(0,n+1))}}};function Bl(e,t){for(let n=0;n<e.byteLength;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}function oi(e,t){return e.timestamp===t.timestamp?Bl(e.id,t.id):e.timestamp-t.timestamp}var qw=class{constructor(e,t,n,r={}){U(this,"relay");U(this,"storage");U(this,"neg");U(this,"filter");U(this,"subscription");U(this,"onhave");U(this,"onneed");this.relay=e,this.storage=t,this.neg=new Al(t),this.onhave=r.onhave,this.onneed=r.onneed,this.filter=n,this.subscription=this.relay.prepareSubscription([{}],{label:r.label||"negentropy"}),this.subscription.oncustom=o=>{var i,s,c,a;switch(o[0]){case"NEG-MSG":{o.length<3&&console.warn(`got invalid NEG-MSG from ${this.relay.url}: ${o}`);try{const f=this.neg.reconcile(o[2],this.onhave,this.onneed);f?this.relay.send(`["NEG-MSG", "${this.subscription.id}", "${f}"]`):(this.close(),(i=r.onclose)==null||i.call(r))}catch(f){console.error("negentropy reconcile error:",f),(s=r==null?void 0:r.onclose)==null||s.call(r,`reconcile error: ${f}`)}break}case"NEG-CLOSE":{const f=o[2];console.warn("negentropy error:",f),(c=r.onclose)==null||c.call(r,f);break}case"NEG-ERR":(a=r.onclose)==null||a.call(r)}}}async start(){const e=this.neg.initiate();this.relay.send(`["NEG-OPEN","${this.subscription.id}",${JSON.stringify(this.filter)},"${e}"]`)}close(){this.relay.send(`["NEG-CLOSE","${this.subscription.id}"]`),this.subscription.close()}},Vw={};te(Vw,{getToken:()=>Dw,hashPayload:()=>Ps,unpackEventFromToken:()=>Tl,validateEvent:()=>Nl,validateEventKind:()=>$l,validateEventMethodTag:()=>kl,validateEventPayloadTag:()=>Ul,validateEventTimestamp:()=>Il,validateEventUrlTag:()=>Ll,validateToken:()=>jw});var Sl="Nostr ";async function Dw(e,t,n,r=!1,o){const i={kind:Ss,tags:[["u",e],["method",t]],created_at:Math.round(new Date().getTime()/1e3),content:""};o&&i.tags.push(["payload",Ps(o)]);const s=await n(i);return(r?Sl:"")+Bt.encode(Ye.encode(JSON.stringify(s)))}async function jw(e,t,n){const r=await Tl(e).catch(i=>{throw i});return await Nl(r,t,n).catch(i=>{throw i})}async function Tl(e){if(!e)throw new Error("Missing token");e=e.replace(Sl,"");const t=xt.decode(Bt.decode(e));if(!t||t.length===0||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}function Il(e){return e.created_at?Math.round(new Date().getTime()/1e3)-e.created_at<60:!1}function $l(e){return e.kind===Ss}function Ll(e,t){const n=e.tags.find(r=>r[0]==="u");return n?n.length>0&&n[1]===t:!1}function kl(e,t){const n=e.tags.find(r=>r[0]==="method");return n?n.length>0&&n[1].toLowerCase()===t.toLowerCase():!1}function Ps(e){const t=Lt(Ye.encode(JSON.stringify(e)));return oe(t)}function Ul(e,t){const n=e.tags.find(o=>o[0]==="payload");if(!n)return!1;const r=Ps(t);return n.length>0&&n[1]===r}async function Nl(e,t,n,r){if(!ko(e))throw new Error("Invalid nostr event, signature invalid");if(!$l(e))throw new Error("Invalid nostr event, kind invalid");if(!Il(e))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!Ll(e,t))throw new Error("Invalid nostr event, url tag invalid");if(!kl(e,n))throw new Error("Invalid nostr event, method tag invalid");if(r&&typeof r=="object"&&Object.keys(r).length>0&&!Ul(e,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}const Mn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ho(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function qi(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Nn(e,...t){if(!Ho(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Rl(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");qi(e.outputLen),qi(e.blockLen)}function io(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function zw(e,t){Nn(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function so(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function ii(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Qe(e,t){return e<<32-t|e>>>t}const Ol=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Fw=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Dn(e){if(Nn(e),Ol)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=Fw[e[n]];return t}const ht={_0:48,_9:57,A:65,F:70,a:97,f:102};function Uc(e){if(e>=ht._0&&e<=ht._9)return e-ht._0;if(e>=ht.A&&e<=ht.F)return e-(ht.A-10);if(e>=ht.a&&e<=ht.f)return e-(ht.a-10)}function co(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Ol)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){const s=Uc(e.charCodeAt(i)),c=Uc(e.charCodeAt(i+1));if(s===void 0||c===void 0){const a=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+i)}r[o]=s*16+c}return r}function Cl(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function qs(e){return typeof e=="string"&&(e=Cl(e)),Nn(e),e}function it(...e){let t=0;for(let r=0;r<e.length;r++){const o=e[r];Nn(o),t+=o.length}const n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){const i=e[r];n.set(i,o),o+=i.length}return n}class Hl{}function Kw(e){const t=r=>e().update(qs(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Mo(e=32){if(Mn&&typeof Mn.getRandomValues=="function")return Mn.getRandomValues(new Uint8Array(e));if(Mn&&typeof Mn.randomBytes=="function")return Uint8Array.from(Mn.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function Zw(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),c=Number(n&i),a=r?4:0,f=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+f,c,r)}function Ww(e,t,n){return e&t^~e&n}function Gw(e,t,n){return e&t^e&n^t&n}let Yw=class extends Hl{constructor(t,n,r,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.buffer=new Uint8Array(t),this.view=ii(this.buffer)}update(t){io(this),t=qs(t),Nn(t);const{view:n,buffer:r,blockLen:o}=this,i=t.length;for(let s=0;s<i;){const c=Math.min(o-this.pos,i-s);if(c===o){const a=ii(t);for(;o<=i-s;s+=o)this.process(a,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){io(this),zw(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:i}=this;let{pos:s}=this;n[s++]=128,so(this.buffer.subarray(s)),this.padOffset>o-s&&(this.process(r,0),s=0);for(let l=s;l<o;l++)n[l]=0;Zw(r,o-8,BigInt(this.length*8),i),this.process(r,0);const c=ii(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=a/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<f;l++)c.setUint32(4*l,u[l],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:i,destroyed:s,pos:c}=this;return t.destroyed=s,t.finished=i,t.length=o,t.pos=c,o%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}};const qt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Xw=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Vt=new Uint32Array(64);class Jw extends Yw{constructor(t=32){super(64,t,8,!1),this.A=qt[0]|0,this.B=qt[1]|0,this.C=qt[2]|0,this.D=qt[3]|0,this.E=qt[4]|0,this.F=qt[5]|0,this.G=qt[6]|0,this.H=qt[7]|0}get(){const{A:t,B:n,C:r,D:o,E:i,F:s,G:c,H:a}=this;return[t,n,r,o,i,s,c,a]}set(t,n,r,o,i,s,c,a){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=c|0,this.H=a|0}process(t,n){for(let l=0;l<16;l++,n+=4)Vt[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const d=Vt[l-15],h=Vt[l-2],p=Qe(d,7)^Qe(d,18)^d>>>3,g=Qe(h,17)^Qe(h,19)^h>>>10;Vt[l]=g+Vt[l-7]+p+Vt[l-16]|0}let{A:r,B:o,C:i,D:s,E:c,F:a,G:f,H:u}=this;for(let l=0;l<64;l++){const d=Qe(c,6)^Qe(c,11)^Qe(c,25),h=u+d+Ww(c,a,f)+Xw[l]+Vt[l]|0,g=(Qe(r,2)^Qe(r,13)^Qe(r,22))+Gw(r,o,i)|0;u=f,f=a,a=c,c=s+h|0,s=i,i=o,o=r,r=h+g|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,c=c+this.E|0,a=a+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(r,o,i,s,c,a,f,u)}roundClean(){so(Vt)}destroy(){this.set(0,0,0,0,0,0,0,0),so(this.buffer)}}const ao=Kw(()=>new Jw);class Ml extends Hl{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Rl(t);const r=qs(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),so(i)}update(t){return io(this),this.iHash.update(t),this}digestInto(t){io(this),Nn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:i,blockLen:s,outputLen:c}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Pl=(e,t,n)=>new Ml(e,t).update(n).digest();Pl.create=(e,t)=>new Ml(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vs=BigInt(0),Vi=BigInt(1);function fo(e,t=""){if(typeof e!="boolean"){const n=t&&`"${t}"`;throw new Error(n+"expected boolean, got type="+typeof e)}return e}function un(e,t,n=""){const r=Ho(e),o=e==null?void 0:e.length,i=t!==void 0;if(!r||i&&o!==t){const s=n&&`"${n}" `,c=i?` of length ${t}`:"",a=r?`length=${o}`:`type=${typeof e}`;throw new Error(s+"expected Uint8Array"+c+", got "+a)}return e}function Hr(e){const t=e.toString(16);return t.length&1?"0"+t:t}function ql(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Vs:BigInt("0x"+e)}function cr(e){return ql(Dn(e))}function Vl(e){return Nn(e),ql(Dn(Uint8Array.from(e).reverse()))}function Po(e,t){return co(e.toString(16).padStart(t*2,"0"))}function Dl(e,t){return Po(e,t).reverse()}function ae(e,t,n){let r;if(typeof t=="string")try{r=co(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if(Ho(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(e+" of length "+n+" expected, got "+o);return r}const si=e=>typeof e=="bigint"&&Vs<=e;function Di(e,t,n){return si(e)&&si(t)&&si(n)&&t<=e&&e<n}function Qw(e,t,n,r){if(!Di(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function jl(e){let t;for(t=0;e>Vs;e>>=Vi,t+=1);return t}const Ur=e=>(Vi<<BigInt(e))-Vi;function ey(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),o=h=>Uint8Array.of(h);let i=r(e),s=r(e),c=0;const a=()=>{i.fill(1),s.fill(0),c=0},f=(...h)=>n(s,i,...h),u=(h=r(0))=>{s=f(o(0),h),i=f(),h.length!==0&&(s=f(o(1),h),i=f())},l=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const p=[];for(;h<t;){i=f();const g=i.slice();p.push(g),h+=i.length}return it(...p)};return(h,p)=>{a(),u(h);let g;for(;!(g=p(l()));)u();return a(),g}}function Ds(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(o,i,s){const c=e[o];if(s&&c===void 0)return;const a=typeof c;if(a!==i||c===null)throw new Error(`param "${o}" is invalid: expected ${i}, got ${a}`)}Object.entries(t).forEach(([o,i])=>r(o,i,!1)),Object.entries(n).forEach(([o,i])=>r(o,i,!0))}function Nc(e){const t=new WeakMap;return(n,...r)=>{const o=t.get(n);if(o!==void 0)return o;const i=e(n,...r);return t.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Te=BigInt(0),_e=BigInt(1),dn=BigInt(2),zl=BigInt(3),Fl=BigInt(4),Kl=BigInt(5),ty=BigInt(7),Zl=BigInt(8),ny=BigInt(9),Wl=BigInt(16);function ze(e,t){const n=e%t;return n>=Te?n:t+n}function Me(e,t,n){let r=e;for(;t-- >Te;)r*=r,r%=n;return r}function Rc(e,t){if(e===Te)throw new Error("invert: expected non-zero number");if(t<=Te)throw new Error("invert: expected positive modulus, got "+t);let n=ze(e,t),r=t,o=Te,i=_e;for(;n!==Te;){const c=r/n,a=r%n,f=o-i*c;r=n,n=a,o=i,i=f}if(r!==_e)throw new Error("invert: does not exist");return ze(o,t)}function js(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function Gl(e,t){const n=(e.ORDER+_e)/Fl,r=e.pow(t,n);return js(e,r,t),r}function ry(e,t){const n=(e.ORDER-Kl)/Zl,r=e.mul(t,dn),o=e.pow(r,n),i=e.mul(t,o),s=e.mul(e.mul(i,dn),o),c=e.mul(i,e.sub(s,e.ONE));return js(e,c,t),c}function oy(e){const t=Nr(e),n=Yl(e),r=n(t,t.neg(t.ONE)),o=n(t,r),i=n(t,t.neg(r)),s=(e+ty)/Wl;return(c,a)=>{let f=c.pow(a,s),u=c.mul(f,r);const l=c.mul(f,o),d=c.mul(f,i),h=c.eql(c.sqr(u),a),p=c.eql(c.sqr(l),a);f=c.cmov(f,u,h),u=c.cmov(d,l,p);const g=c.eql(c.sqr(u),a),y=c.cmov(f,u,g);return js(c,y,a),y}}function Yl(e){if(e<zl)throw new Error("sqrt is not defined for small field");let t=e-_e,n=0;for(;t%dn===Te;)t/=dn,n++;let r=dn;const o=Nr(e);for(;Oc(o,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Gl;let i=o.pow(r,t);const s=(t+_e)/dn;return function(a,f){if(a.is0(f))return f;if(Oc(a,f)!==1)throw new Error("Cannot find square root");let u=n,l=a.mul(a.ONE,i),d=a.pow(f,t),h=a.pow(f,s);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let p=1,g=a.sqr(d);for(;!a.eql(g,a.ONE);)if(p++,g=a.sqr(g),p===u)throw new Error("Cannot find square root");const y=_e<<BigInt(u-p-1),m=a.pow(l,y);u=p,l=a.sqr(m),d=a.mul(d,l),h=a.mul(h,m)}return h}}function iy(e){return e%Fl===zl?Gl:e%Zl===Kl?ry:e%Wl===ny?oy(e):Yl(e)}const sy=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function cy(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=sy.reduce((r,o)=>(r[o]="function",r),t);return Ds(e,n),e}function ay(e,t,n){if(n<Te)throw new Error("invalid exponent, negatives unsupported");if(n===Te)return e.ONE;if(n===_e)return t;let r=e.ONE,o=t;for(;n>Te;)n&_e&&(r=e.mul(r,o)),o=e.sqr(o),n>>=_e;return r}function Xl(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),o=t.reduce((s,c,a)=>e.is0(c)?s:(r[a]=s,e.mul(s,c)),e.ONE),i=e.inv(o);return t.reduceRight((s,c,a)=>e.is0(c)?s:(r[a]=e.mul(s,r[a]),e.mul(s,c)),i),r}function Oc(e,t){const n=(e.ORDER-_e)/dn,r=e.pow(t,n),o=e.eql(r,e.ONE),i=e.eql(r,e.ZERO),s=e.eql(r,e.neg(e.ONE));if(!o&&!i&&!s)throw new Error("invalid Legendre symbol result");return o?1:i?0:-1}function Jl(e,t){t!==void 0&&qi(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Nr(e,t,n=!1,r={}){if(e<=Te)throw new Error("invalid field: expected ORDER > 0, got "+e);let o,i,s=!1,c;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const d=t;d.BITS&&(o=d.BITS),d.sqrt&&(i=d.sqrt),typeof d.isLE=="boolean"&&(n=d.isLE),typeof d.modFromBytes=="boolean"&&(s=d.modFromBytes),c=d.allowedLengths}else typeof t=="number"&&(o=t),r.sqrt&&(i=r.sqrt);const{nBitLength:a,nByteLength:f}=Jl(e,o);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const l=Object.freeze({ORDER:e,isLE:n,BITS:a,BYTES:f,MASK:Ur(a),ZERO:Te,ONE:_e,allowedLengths:c,create:d=>ze(d,e),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return Te<=d&&d<e},is0:d=>d===Te,isValidNot0:d=>!l.is0(d)&&l.isValid(d),isOdd:d=>(d&_e)===_e,neg:d=>ze(-d,e),eql:(d,h)=>d===h,sqr:d=>ze(d*d,e),add:(d,h)=>ze(d+h,e),sub:(d,h)=>ze(d-h,e),mul:(d,h)=>ze(d*h,e),pow:(d,h)=>ay(l,d,h),div:(d,h)=>ze(d*Rc(h,e),e),sqrN:d=>d*d,addN:(d,h)=>d+h,subN:(d,h)=>d-h,mulN:(d,h)=>d*h,inv:d=>Rc(d,e),sqrt:i||(d=>(u||(u=iy(e)),u(l,d))),toBytes:d=>n?Dl(d,f):Po(d,f),fromBytes:(d,h=!0)=>{if(c){if(!c.includes(d.length)||d.length>f)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+d.length);const g=new Uint8Array(f);g.set(d,n?0:g.length-d.length),d=g}if(d.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+d.length);let p=n?Vl(d):cr(d);if(s&&(p=ze(p,e)),!h&&!l.isValid(p))throw new Error("invalid field element: outside of range 0..ORDER");return p},invertBatch:d=>Xl(l,d),cmov:(d,h,p)=>p?h:d});return Object.freeze(l)}function Ql(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function eu(e){const t=Ql(e);return t+Math.ceil(t/2)}function tu(e,t,n=!1){const r=e.length,o=Ql(t),i=eu(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const s=n?Vl(e):cr(e),c=ze(s,t-_e)+_e;return n?Dl(c,o):Po(c,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qn=BigInt(0),hn=BigInt(1);function lo(e,t){const n=t.negate();return e?n:t}function ci(e,t){const n=Xl(e.Fp,t.map(r=>r.Z));return t.map((r,o)=>e.fromAffine(r.toAffine(n[o])))}function nu(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function ai(e,t){nu(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),o=2**e,i=Ur(e),s=BigInt(e);return{windows:n,windowSize:r,mask:i,maxNumber:o,shiftBy:s}}function Cc(e,t,n){const{windowSize:r,mask:o,maxNumber:i,shiftBy:s}=n;let c=Number(e&o),a=e>>s;c>r&&(c-=i,a+=hn);const f=t*r,u=f+Math.abs(c)-1,l=c===0,d=c<0,h=t%2!==0;return{nextN:a,offset:u,isZero:l,isNeg:d,isNegF:h,offsetF:f}}function fy(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function ly(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const fi=new WeakMap,ru=new WeakMap;function li(e){return ru.get(e)||1}function Hc(e){if(e!==Qn)throw new Error("invalid wNAF")}class uy{constructor(t,n){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=n}_unsafeLadder(t,n,r=this.ZERO){let o=t;for(;n>Qn;)n&hn&&(r=r.add(o)),o=o.double(),n>>=hn;return r}precomputeWindow(t,n){const{windows:r,windowSize:o}=ai(n,this.bits),i=[];let s=t,c=s;for(let a=0;a<r;a++){c=s,i.push(c);for(let f=1;f<o;f++)c=c.add(s),i.push(c);s=c.double()}return i}wNAF(t,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let o=this.ZERO,i=this.BASE;const s=ai(t,this.bits);for(let c=0;c<s.windows;c++){const{nextN:a,offset:f,isZero:u,isNeg:l,isNegF:d,offsetF:h}=Cc(r,c,s);r=a,u?i=i.add(lo(d,n[h])):o=o.add(lo(l,n[f]))}return Hc(r),{p:o,f:i}}wNAFUnsafe(t,n,r,o=this.ZERO){const i=ai(t,this.bits);for(let s=0;s<i.windows&&r!==Qn;s++){const{nextN:c,offset:a,isZero:f,isNeg:u}=Cc(r,s,i);if(r=c,!f){const l=n[a];o=o.add(u?l.negate():l)}}return Hc(r),o}getPrecomputes(t,n,r){let o=fi.get(n);return o||(o=this.precomputeWindow(n,t),t!==1&&(typeof r=="function"&&(o=r(o)),fi.set(n,o))),o}cached(t,n,r){const o=li(t);return this.wNAF(o,this.getPrecomputes(o,t,r),n)}unsafe(t,n,r,o){const i=li(t);return i===1?this._unsafeLadder(t,n,o):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),n,o)}createCache(t,n){nu(n,this.bits),ru.set(t,n),fi.delete(t)}hasCache(t){return li(t)!==1}}function dy(e,t,n,r){let o=t,i=e.ZERO,s=e.ZERO;for(;n>Qn||r>Qn;)n&hn&&(i=i.add(o)),r&hn&&(s=s.add(o)),o=o.double(),n>>=hn,r>>=hn;return{p1:i,p2:s}}function hy(e,t,n,r){fy(n,e),ly(r,t);const o=n.length,i=r.length;if(o!==i)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,c=jl(BigInt(o));let a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);const f=Ur(a),u=new Array(Number(f)+1).fill(s),l=Math.floor((t.BITS-1)/a)*a;let d=s;for(let h=l;h>=0;h-=a){u.fill(s);for(let g=0;g<i;g++){const y=r[g],m=Number(y>>BigInt(h)&f);u[m]=u[m].add(n[g])}let p=s;for(let g=u.length-1,y=s;g>0;g--)y=y.add(u[g]),p=p.add(y);if(d=d.add(p),h!==0)for(let g=0;g<a;g++)d=d.double()}return d}function Mc(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return cy(t),t}else return Nr(e,{isLE:n})}function gy(e,t,n={},r){if(r===void 0&&(r=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const a of["p","n","h"]){const f=t[a];if(!(typeof f=="bigint"&&f>Qn))throw new Error(`CURVE.${a} must be positive bigint`)}const o=Mc(t.p,n.Fp,r),i=Mc(t.n,n.Fn,r),c=["Gx","Gy","a","b"];for(const a of c)if(!o.isValid(t[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:o,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pc=(e,t)=>(e+(e>=0?t:-t)/ou)/t;function py(e,t,n){const[[r,o],[i,s]]=t,c=Pc(s*e,n),a=Pc(-o*e,n);let f=e-c*r-a*i,u=-c*o-a*s;const l=f<_t,d=u<_t;l&&(f=-f),d&&(u=-u);const h=Ur(Math.ceil(jl(n)/2))+jn;if(f<_t||f>=h||u<_t||u>=h)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:l,k1:f,k2neg:d,k2:u}}function ji(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function ui(e,t){const n={};for(let r of Object.keys(t))n[r]=e[r]===void 0?t[r]:e[r];return fo(n.lowS,"lowS"),fo(n.prehash,"prehash"),n.format!==void 0&&ji(n.format),n}class wy extends Error{constructor(t=""){super(t)}}const wt={Err:wy,_tlv:{encode:(e,t)=>{const{Err:n}=wt;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,o=Hr(r);if(o.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Hr(o.length/2|128):"";return Hr(e)+i+o+t},decode(e,t){const{Err:n}=wt;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const o=t[r++],i=!!(o&128);let s=0;if(!i)s=o;else{const a=o&127;if(!a)throw new n("tlv.decode(long): indefinite length not supported");if(a>4)throw new n("tlv.decode(long): byte length is too big");const f=t.subarray(r,r+a);if(f.length!==a)throw new n("tlv.decode: length bytes not complete");if(f[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of f)s=s<<8|u;if(r+=a,s<128)throw new n("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+s);if(c.length!==s)throw new n("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+s)}}},_int:{encode(e){const{Err:t}=wt;if(e<_t)throw new t("integer: negative integers are not allowed");let n=Hr(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=wt;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return cr(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=wt,o=ae("signature",e),{v:i,l:s}=r.decode(48,o);if(s.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:a}=r.decode(2,i),{v:f,l:u}=r.decode(2,a);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(f)}},hexFromSig(e){const{_tlv:t,_int:n}=wt,r=t.encode(2,n.encode(e.r)),o=t.encode(2,n.encode(e.s)),i=r+o;return t.encode(48,i)}},_t=BigInt(0),jn=BigInt(1),ou=BigInt(2),Mr=BigInt(3),yy=BigInt(4);function gn(e,t){const{BYTES:n}=e;let r;if(typeof t=="bigint")r=t;else{let o=ae("private key",t);try{r=e.fromBytes(o)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function by(e,t={}){const n=gy("weierstrass",e,t),{Fp:r,Fn:o}=n;let i=n.CURVE;const{h:s,n:c}=i;Ds(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:a}=t;if(a&&(!r.is0(i.a)||typeof a.beta!="bigint"||!Array.isArray(a.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=su(r,o);function u(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function l(x,b,E){const{x:w,y:v}=b.toAffine(),A=r.toBytes(w);if(fo(E,"isCompressed"),E){u();const S=!r.isOdd(v);return it(iu(S),A)}else return it(Uint8Array.of(4),A,r.toBytes(v))}function d(x){un(x,void 0,"Point");const{publicKey:b,publicKeyUncompressed:E}=f,w=x.length,v=x[0],A=x.subarray(1);if(w===b&&(v===2||v===3)){const S=r.fromBytes(A);if(!r.isValid(S))throw new Error("bad point: is not on curve, wrong x");const B=g(S);let k;try{k=r.sqrt(B)}catch(z){const D=z instanceof Error?": "+z.message:"";throw new Error("bad point: is not on curve, sqrt error"+D)}u();const T=r.isOdd(k);return(v&1)===1!==T&&(k=r.neg(k)),{x:S,y:k}}else if(w===E&&v===4){const S=r.BYTES,B=r.fromBytes(A.subarray(0,S)),k=r.fromBytes(A.subarray(S,S*2));if(!y(B,k))throw new Error("bad point: is not on curve");return{x:B,y:k}}else throw new Error(`bad point: got length ${w}, expected compressed=${b} or uncompressed=${E}`)}const h=t.toBytes||l,p=t.fromBytes||d;function g(x){const b=r.sqr(x),E=r.mul(b,x);return r.add(r.add(E,r.mul(x,i.a)),i.b)}function y(x,b){const E=r.sqr(b),w=g(x);return r.eql(E,w)}if(!y(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const m=r.mul(r.pow(i.a,Mr),yy),I=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(m,I)))throw new Error("bad curve params: a or b");function $(x,b,E=!1){if(!r.isValid(b)||E&&r.is0(b))throw new Error(`bad point coordinate ${x}`);return b}function M(x){if(!(x instanceof H))throw new Error("ProjectivePoint expected")}function P(x){if(!a||!a.basises)throw new Error("no endo");return py(x,a.basises,o.ORDER)}const N=Nc((x,b)=>{const{X:E,Y:w,Z:v}=x;if(r.eql(v,r.ONE))return{x:E,y:w};const A=x.is0();b==null&&(b=A?r.ONE:r.inv(v));const S=r.mul(E,b),B=r.mul(w,b),k=r.mul(v,b);if(A)return{x:r.ZERO,y:r.ZERO};if(!r.eql(k,r.ONE))throw new Error("invZ was invalid");return{x:S,y:B}}),O=Nc(x=>{if(x.is0()){if(t.allowInfinityPoint&&!r.is0(x.Y))return;throw new Error("bad point: ZERO")}const{x:b,y:E}=x.toAffine();if(!r.isValid(b)||!r.isValid(E))throw new Error("bad point: x or y not field elements");if(!y(b,E))throw new Error("bad point: equation left != right");if(!x.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function C(x,b,E,w,v){return E=new H(r.mul(E.X,x),E.Y,E.Z),b=lo(w,b),E=lo(v,E),b.add(E)}class H{constructor(b,E,w){this.X=$("x",b),this.Y=$("y",E,!0),this.Z=$("z",w),Object.freeze(this)}static CURVE(){return i}static fromAffine(b){const{x:E,y:w}=b||{};if(!b||!r.isValid(E)||!r.isValid(w))throw new Error("invalid affine point");if(b instanceof H)throw new Error("projective point not allowed");return r.is0(E)&&r.is0(w)?H.ZERO:new H(E,w,r.ONE)}static fromBytes(b){const E=H.fromAffine(p(un(b,void 0,"point")));return E.assertValidity(),E}static fromHex(b){return H.fromBytes(ae("pointHex",b))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(b=8,E=!0){return _.createCache(this,b),E||this.multiply(Mr),this}assertValidity(){O(this)}hasEvenY(){const{y:b}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(b)}equals(b){M(b);const{X:E,Y:w,Z:v}=this,{X:A,Y:S,Z:B}=b,k=r.eql(r.mul(E,B),r.mul(A,v)),T=r.eql(r.mul(w,B),r.mul(S,v));return k&&T}negate(){return new H(this.X,r.neg(this.Y),this.Z)}double(){const{a:b,b:E}=i,w=r.mul(E,Mr),{X:v,Y:A,Z:S}=this;let B=r.ZERO,k=r.ZERO,T=r.ZERO,R=r.mul(v,v),z=r.mul(A,A),D=r.mul(S,S),j=r.mul(v,A);return j=r.add(j,j),T=r.mul(v,S),T=r.add(T,T),B=r.mul(b,T),k=r.mul(w,D),k=r.add(B,k),B=r.sub(z,k),k=r.add(z,k),k=r.mul(B,k),B=r.mul(j,B),T=r.mul(w,T),D=r.mul(b,D),j=r.sub(R,D),j=r.mul(b,j),j=r.add(j,T),T=r.add(R,R),R=r.add(T,R),R=r.add(R,D),R=r.mul(R,j),k=r.add(k,R),D=r.mul(A,S),D=r.add(D,D),R=r.mul(D,j),B=r.sub(B,R),T=r.mul(D,z),T=r.add(T,T),T=r.add(T,T),new H(B,k,T)}add(b){M(b);const{X:E,Y:w,Z:v}=this,{X:A,Y:S,Z:B}=b;let k=r.ZERO,T=r.ZERO,R=r.ZERO;const z=i.a,D=r.mul(i.b,Mr);let j=r.mul(E,A),K=r.mul(w,S),Z=r.mul(v,B),Q=r.add(E,w),W=r.add(A,S);Q=r.mul(Q,W),W=r.add(j,K),Q=r.sub(Q,W),W=r.add(E,v);let ne=r.add(A,B);return W=r.mul(W,ne),ne=r.add(j,Z),W=r.sub(W,ne),ne=r.add(w,v),k=r.add(S,B),ne=r.mul(ne,k),k=r.add(K,Z),ne=r.sub(ne,k),R=r.mul(z,W),k=r.mul(D,Z),R=r.add(k,R),k=r.sub(K,R),R=r.add(K,R),T=r.mul(k,R),K=r.add(j,j),K=r.add(K,j),Z=r.mul(z,Z),W=r.mul(D,W),K=r.add(K,Z),Z=r.sub(j,Z),Z=r.mul(z,Z),W=r.add(W,Z),j=r.mul(K,W),T=r.add(T,j),j=r.mul(ne,W),k=r.mul(Q,k),k=r.sub(k,j),j=r.mul(Q,K),R=r.mul(ne,R),R=r.add(R,j),new H(k,T,R)}subtract(b){return this.add(b.negate())}is0(){return this.equals(H.ZERO)}multiply(b){const{endo:E}=t;if(!o.isValidNot0(b))throw new Error("invalid scalar: out of range");let w,v;const A=S=>_.cached(this,S,B=>ci(H,B));if(E){const{k1neg:S,k1:B,k2neg:k,k2:T}=P(b),{p:R,f:z}=A(B),{p:D,f:j}=A(T);v=z.add(j),w=C(E.beta,R,D,S,k)}else{const{p:S,f:B}=A(b);w=S,v=B}return ci(H,[w,v])[0]}multiplyUnsafe(b){const{endo:E}=t,w=this;if(!o.isValid(b))throw new Error("invalid scalar: out of range");if(b===_t||w.is0())return H.ZERO;if(b===jn)return w;if(_.hasCache(this))return this.multiply(b);if(E){const{k1neg:v,k1:A,k2neg:S,k2:B}=P(b),{p1:k,p2:T}=dy(H,w,A,B);return C(E.beta,k,T,v,S)}else return _.unsafe(w,b)}multiplyAndAddUnsafe(b,E,w){const v=this.multiplyUnsafe(E).add(b.multiplyUnsafe(w));return v.is0()?void 0:v}toAffine(b){return N(this,b)}isTorsionFree(){const{isTorsionFree:b}=t;return s===jn?!0:b?b(H,this):_.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:b}=t;return s===jn?this:b?b(H,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(b=!0){return fo(b,"isCompressed"),this.assertValidity(),h(H,this,b)}toHex(b=!0){return Dn(this.toBytes(b))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(b=!0){return this.toBytes(b)}_setWindowSize(b){this.precompute(b)}static normalizeZ(b){return ci(H,b)}static msm(b,E){return hy(H,o,b,E)}static fromPrivateKey(b){return H.BASE.multiply(gn(o,b))}}H.BASE=new H(i.Gx,i.Gy,r.ONE),H.ZERO=new H(r.ZERO,r.ONE,r.ZERO),H.Fp=r,H.Fn=o;const q=o.BITS,_=new uy(H,t.endo?Math.ceil(q/2):q);return H.BASE.precompute(8),H}function iu(e){return Uint8Array.of(e?2:3)}function su(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function vy(e,t={}){const{Fn:n}=e,r=t.randomBytes||Mo,o=Object.assign(su(e.Fp,n),{seed:eu(n.ORDER)});function i(h){try{return!!gn(n,h)}catch{return!1}}function s(h,p){const{publicKey:g,publicKeyUncompressed:y}=o;try{const m=h.length;return p===!0&&m!==g||p===!1&&m!==y?!1:!!e.fromBytes(h)}catch{return!1}}function c(h=r(o.seed)){return tu(un(h,o.seed,"seed"),n.ORDER)}function a(h,p=!0){return e.BASE.multiply(gn(n,h)).toBytes(p)}function f(h){const p=c(h);return{secretKey:p,publicKey:a(p)}}function u(h){if(typeof h=="bigint")return!1;if(h instanceof e)return!0;const{secretKey:p,publicKey:g,publicKeyUncompressed:y}=o;if(n.allowedLengths||p===g)return;const m=ae("key",h).length;return m===g||m===y}function l(h,p,g=!0){if(u(h)===!0)throw new Error("first arg must be private key");if(u(p)===!1)throw new Error("second arg must be public key");const y=gn(n,h);return e.fromHex(p).multiply(y).toBytes(g)}return Object.freeze({getPublicKey:a,getSharedSecret:l,keygen:f,Point:e,utils:{isValidSecretKey:i,isValidPublicKey:s,randomSecretKey:c,isValidPrivateKey:i,randomPrivateKey:c,normPrivateKeyToScalar:h=>gn(n,h),precompute(h=8,p=e.BASE){return p.precompute(h,!1)}},lengths:o})}function my(e,t,n={}){Rl(t),Ds(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||Mo,o=n.hmac||((E,...w)=>Pl(t,E,it(...w))),{Fp:i,Fn:s}=e,{ORDER:c,BITS:a}=s,{keygen:f,getPublicKey:u,getSharedSecret:l,utils:d,lengths:h}=vy(e,n),p={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},g="compact";function y(E){const w=c>>jn;return E>w}function m(E,w){if(!s.isValidNot0(w))throw new Error(`invalid signature ${E}: out of range 1..Point.Fn.ORDER`);return w}function I(E,w){ji(w);const v=h.signature,A=w==="compact"?v:w==="recovered"?v+1:void 0;return un(E,A,`${w} signature`)}class ${constructor(w,v,A){this.r=m("r",w),this.s=m("s",v),A!=null&&(this.recovery=A),Object.freeze(this)}static fromBytes(w,v=g){I(w,v);let A;if(v==="der"){const{r:T,s:R}=wt.toSig(un(w));return new $(T,R)}v==="recovered"&&(A=w[0],v="compact",w=w.subarray(1));const S=s.BYTES,B=w.subarray(0,S),k=w.subarray(S,S*2);return new $(s.fromBytes(B),s.fromBytes(k),A)}static fromHex(w,v){return this.fromBytes(co(w),v)}addRecoveryBit(w){return new $(this.r,this.s,w)}recoverPublicKey(w){const v=i.ORDER,{r:A,s:S,recovery:B}=this;if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");if(c*ou<v&&B>1)throw new Error("recovery id is ambiguous for h>1 curve");const T=B===2||B===3?A+c:A;if(!i.isValid(T))throw new Error("recovery id 2 or 3 invalid");const R=i.toBytes(T),z=e.fromBytes(it(iu((B&1)===0),R)),D=s.inv(T),j=P(ae("msgHash",w)),K=s.create(-j*D),Z=s.create(S*D),Q=e.BASE.multiplyUnsafe(K).add(z.multiplyUnsafe(Z));if(Q.is0())throw new Error("point at infinify");return Q.assertValidity(),Q}hasHighS(){return y(this.s)}toBytes(w=g){if(ji(w),w==="der")return co(wt.hexFromSig(this));const v=s.toBytes(this.r),A=s.toBytes(this.s);if(w==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return it(Uint8Array.of(this.recovery),v,A)}return it(v,A)}toHex(w){return Dn(this.toBytes(w))}assertValidity(){}static fromCompact(w){return $.fromBytes(ae("sig",w),"compact")}static fromDER(w){return $.fromBytes(ae("sig",w),"der")}normalizeS(){return this.hasHighS()?new $(this.r,s.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Dn(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Dn(this.toBytes("compact"))}}const M=n.bits2int||function(w){if(w.length>8192)throw new Error("input is too large");const v=cr(w),A=w.length*8-a;return A>0?v>>BigInt(A):v},P=n.bits2int_modN||function(w){return s.create(M(w))},N=Ur(a);function O(E){return Qw("num < 2^"+a,E,_t,N),s.toBytes(E)}function C(E,w){return un(E,void 0,"message"),w?un(t(E),void 0,"prehashed message"):E}function H(E,w,v){if(["recovered","canonical"].some(K=>K in v))throw new Error("sign() legacy options not supported");const{lowS:A,prehash:S,extraEntropy:B}=ui(v,p);E=C(E,S);const k=P(E),T=gn(s,w),R=[O(T),O(k)];if(B!=null&&B!==!1){const K=B===!0?r(h.secretKey):B;R.push(ae("extraEntropy",K))}const z=it(...R),D=k;function j(K){const Z=M(K);if(!s.isValidNot0(Z))return;const Q=s.inv(Z),W=e.BASE.multiply(Z).toAffine(),ne=s.create(W.x);if(ne===_t)return;const nn=s.create(Q*s.create(D+ne*T));if(nn===_t)return;let ut=(W.x===ne?0:2)|Number(W.y&jn),Ae=nn;return A&&y(nn)&&(Ae=s.neg(nn),ut^=1),new $(ne,Ae,ut)}return{seed:z,k2sig:j}}function q(E,w,v={}){E=ae("message",E);const{seed:A,k2sig:S}=H(E,w,v);return ey(t.outputLen,s.BYTES,o)(A,S)}function _(E){let w;const v=typeof E=="string"||Ho(E),A=!v&&E!==null&&typeof E=="object"&&typeof E.r=="bigint"&&typeof E.s=="bigint";if(!v&&!A)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(A)w=new $(E.r,E.s);else if(v){try{w=$.fromBytes(ae("sig",E),"der")}catch(S){if(!(S instanceof wt.Err))throw S}if(!w)try{w=$.fromBytes(ae("sig",E),"compact")}catch{return!1}}return w||!1}function x(E,w,v,A={}){const{lowS:S,prehash:B,format:k}=ui(A,p);if(v=ae("publicKey",v),w=C(ae("message",w),B),"strict"in A)throw new Error("options.strict was renamed to lowS");const T=k===void 0?_(E):$.fromBytes(ae("sig",E),k);if(T===!1)return!1;try{const R=e.fromBytes(v);if(S&&T.hasHighS())return!1;const{r:z,s:D}=T,j=P(w),K=s.inv(D),Z=s.create(j*K),Q=s.create(z*K),W=e.BASE.multiplyUnsafe(Z).add(R.multiplyUnsafe(Q));return W.is0()?!1:s.create(W.x)===z}catch{return!1}}function b(E,w,v={}){const{prehash:A}=ui(v,p);return w=C(w,A),$.fromBytes(E,"recovered").recoverPublicKey(w).toBytes()}return Object.freeze({keygen:f,getPublicKey:u,getSharedSecret:l,utils:d,lengths:h,Point:e,sign:q,verify:x,recoverPublicKey:b,Signature:$,hash:t})}function Ey(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp;let r=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(s=>Math.ceil(s/2)))):void 0;const o=Nr(t.n,{BITS:e.nBitLength,allowedLengths:r,modFromBytes:e.wrapPrivateKey}),i={Fp:n,Fn:o,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:i}}function xy(e){const{CURVE:t,curveOpts:n}=Ey(e),r={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,hash:e.hash,ecdsaOpts:r}}function _y(e,t){const n=t.Point;return Object.assign({},t,{ProjectivePoint:n,CURVE:Object.assign({},e,Jl(n.Fn.ORDER,n.Fn.BITS))})}function Ay(e){const{CURVE:t,curveOpts:n,hash:r,ecdsaOpts:o}=xy(e),i=by(t,n),s=my(i,r,o);return _y(e,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function By(e,t){const n=r=>Ay({...e,hash:r});return{...n(t),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const er={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Sy={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Ty=BigInt(0),qc=BigInt(1),zi=BigInt(2);function Iy(e){const t=er.p,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),c=BigInt(44),a=BigInt(88),f=e*e*e%t,u=f*f*e%t,l=Me(u,n,t)*u%t,d=Me(l,n,t)*u%t,h=Me(d,zi,t)*f%t,p=Me(h,o,t)*h%t,g=Me(p,i,t)*p%t,y=Me(g,c,t)*g%t,m=Me(y,a,t)*y%t,I=Me(m,c,t)*g%t,$=Me(I,n,t)*u%t,M=Me($,s,t)*p%t,P=Me(M,r,t)*f%t,N=Me(P,zi,t);if(!uo.eql(uo.sqr(N),e))throw new Error("Cannot find square root");return N}const uo=Nr(er.p,{sqrt:Iy}),cu=By({...er,Fp:uo,lowS:!0,endo:Sy},ao),Vc={};function ho(e,...t){let n=Vc[e];if(n===void 0){const r=ao(Cl(e));n=it(r,r),Vc[e]=n}return ao(it(n,...t))}const zs=e=>e.toBytes(!0).slice(1),ar=cu.Point,Fs=e=>e%zi===Ty;function Fi(e){const{Fn:t,BASE:n}=ar,r=gn(t,e),o=n.multiply(r);return{scalar:Fs(o.y)?r:t.neg(r),bytes:zs(o)}}function au(e){const t=uo;if(!t.isValidNot0(e))throw new Error("invalid x: Fail if x  p");const n=t.create(e*e),r=t.create(n*e+BigInt(7));let o=t.sqrt(r);Fs(o)||(o=t.neg(o));const i=ar.fromAffine({x:e,y:o});return i.assertValidity(),i}const vr=cr;function fu(...e){return ar.Fn.create(vr(ho("BIP0340/challenge",...e)))}function Dc(e){return Fi(e).bytes}function $y(e,t,n=Mo(32)){const{Fn:r}=ar,o=ae("message",e),{bytes:i,scalar:s}=Fi(t),c=ae("auxRand",n,32),a=r.toBytes(s^vr(ho("BIP0340/aux",c))),f=ho("BIP0340/nonce",a,i,o),{bytes:u,scalar:l}=Fi(f),d=fu(u,i,o),h=new Uint8Array(64);if(h.set(u,0),h.set(r.toBytes(r.create(l+d*s)),32),!lu(h,o,i))throw new Error("sign: Invalid signature produced");return h}function lu(e,t,n){const{Fn:r,BASE:o}=ar,i=ae("signature",e,64),s=ae("message",t),c=ae("publicKey",n,32);try{const a=au(vr(c)),f=vr(i.subarray(0,32));if(!Di(f,qc,er.p))return!1;const u=vr(i.subarray(32,64));if(!Di(u,qc,er.n))return!1;const l=fu(r.toBytes(f),zs(a),s),d=o.multiplyUnsafe(u).add(a.multiplyUnsafe(r.neg(l))),{x:h,y:p}=d.toAffine();return!(d.is0()||!Fs(p)||h!==f)}catch{return!1}}const t1=(()=>{const n=(o=Mo(48))=>tu(o,er.n);cu.utils.randomSecretKey;function r(o){const i=n(o);return{secretKey:i,publicKey:Dc(i)}}return{keygen:r,getPublicKey:Dc,sign:$y,verify:lu,Point:ar,utils:{randomSecretKey:n,randomPrivateKey:n,taggedHash:ho,lift_x:au,pointToBytes:zs,numberToBytesBE:Po,bytesToNumberBE:cr,mod:ze},lengths:{secretKey:32,publicKey:32,publicKeyHasPrefix:!1,signature:64,seed:48}}})(),n1=ao;function Ly(e,t,n,r){ce.hash(e);const o=lf({dkLen:32,asyncTick:10},r),{c:i,dkLen:s,asyncTick:c}=o;if(ce.number(i),ce.number(s),ce.number(c),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const a=Ln(t),f=Ln(n),u=new Uint8Array(s),l=kr.create(e,a),d=l._cloneInto().update(f);return{c:i,dkLen:s,asyncTick:c,DK:u,PRF:l,PRFSalt:d}}function ky(e,t,n,r,o){return e.destroy(),t.destroy(),r&&r.destroy(),o.fill(0),n}function uu(e,t,n,r){const{c:o,dkLen:i,DK:s,PRF:c,PRFSalt:a}=Ly(e,t,n,r);let f;const u=new Uint8Array(4),l=jr(u),d=new Uint8Array(c.outputLen);for(let h=1,p=0;p<i;h++,p+=c.outputLen){const g=s.subarray(p,p+c.outputLen);l.setInt32(0,h,!1),(f=a._cloneInto(f)).update(u).digestInto(d),g.set(d.subarray(0,g.length));for(let y=1;y<o;y++){c._cloneInto(f).update(d).digestInto(d);for(let m=0;m<g.length;m++)g[m]^=d[m]}}return ky(c,a,s,f,d)}const J=(e,t)=>e<<t|e>>>32-t;function jc(e,t,n,r,o,i){let s=e[t++]^n[r++],c=e[t++]^n[r++],a=e[t++]^n[r++],f=e[t++]^n[r++],u=e[t++]^n[r++],l=e[t++]^n[r++],d=e[t++]^n[r++],h=e[t++]^n[r++],p=e[t++]^n[r++],g=e[t++]^n[r++],y=e[t++]^n[r++],m=e[t++]^n[r++],I=e[t++]^n[r++],$=e[t++]^n[r++],M=e[t++]^n[r++],P=e[t++]^n[r++],N=s,O=c,C=a,H=f,q=u,_=l,x=d,b=h,E=p,w=g,v=y,A=m,S=I,B=$,k=M,T=P;for(let R=0;R<8;R+=2)q^=J(N+S|0,7),E^=J(q+N|0,9),S^=J(E+q|0,13),N^=J(S+E|0,18),w^=J(_+O|0,7),B^=J(w+_|0,9),O^=J(B+w|0,13),_^=J(O+B|0,18),k^=J(v+x|0,7),C^=J(k+v|0,9),x^=J(C+k|0,13),v^=J(x+C|0,18),H^=J(T+A|0,7),b^=J(H+T|0,9),A^=J(b+H|0,13),T^=J(A+b|0,18),O^=J(N+H|0,7),C^=J(O+N|0,9),H^=J(C+O|0,13),N^=J(H+C|0,18),x^=J(_+q|0,7),b^=J(x+_|0,9),q^=J(b+x|0,13),_^=J(q+b|0,18),A^=J(v+w|0,7),E^=J(A+v|0,9),w^=J(E+A|0,13),v^=J(w+E|0,18),S^=J(T+k|0,7),B^=J(S+T|0,9),k^=J(B+S|0,13),T^=J(k+B|0,18);o[i++]=s+N|0,o[i++]=c+O|0,o[i++]=a+C|0,o[i++]=f+H|0,o[i++]=u+q|0,o[i++]=l+_|0,o[i++]=d+x|0,o[i++]=h+b|0,o[i++]=p+E|0,o[i++]=g+w|0,o[i++]=y+v|0,o[i++]=m+A|0,o[i++]=I+S|0,o[i++]=$+B|0,o[i++]=M+k|0,o[i++]=P+T|0}function di(e,t,n,r,o){let i=r+0,s=r+16*o;for(let c=0;c<16;c++)n[s+c]=e[t+(2*o-1)*16+c];for(let c=0;c<o;c++,i+=16,t+=16)jc(n,s,e,t,n,i),c>0&&(s+=16),jc(n,i,e,t+=16,n,s)}function Uy(e,t,n){const r=lf({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:o,r:i,p:s,dkLen:c,asyncTick:a,maxmem:f,onProgress:u}=r;if(ce.number(o),ce.number(i),ce.number(s),ce.number(c),ce.number(a),ce.number(f),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const l=128*i,d=l/4;if(o<=1||(o&o-1)!==0||o>=2**(l/8)||o>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(s<0||s>(2**32-1)*32/l)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(c<0||c>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const h=l*(o+s);if(h>f)throw new Error(`Scrypt: parameters too large, ${h} (128 * r * (N + p)) > ${f} (maxmem)`);const p=uu(Lt,e,t,{c:1,dkLen:l*s}),g=Jo(p),y=Jo(new Uint8Array(l*o)),m=Jo(new Uint8Array(l));let I=()=>{};if(u){const $=2*o*s,M=Math.max(Math.floor($/1e4),1);let P=0;I=()=>{P++,u&&(!(P%M)||P===$)&&u(P/$)}}return{N:o,r:i,p:s,dkLen:c,blockSize32:d,V:y,B32:g,B:p,tmp:m,blockMixCb:I,asyncTick:a}}function Ny(e,t,n,r,o){const i=uu(Lt,e,n,{c:1,dkLen:t});return n.fill(0),r.fill(0),o.fill(0),i}function du(e,t,n){const{N:r,r:o,p:i,dkLen:s,blockSize32:c,V:a,B32:f,B:u,tmp:l,blockMixCb:d}=Uy(e,t,n);for(let h=0;h<i;h++){const p=c*h;for(let g=0;g<c;g++)a[g]=f[p+g];for(let g=0,y=0;g<r-1;g++)di(a,y,a,y+=c,o),d();di(a,(r-1)*c,f,p,o),d();for(let g=0;g<r;g++){const y=f[p+c-16]%r;for(let m=0;m<c;m++)l[m]=f[p+m]^a[y*c+m];di(l,0,f,p,o),d()}}return Ny(e,s,u,a,l)}var hu=5e3;function Ry(e,t){let n=Ue.toWords(t);return Ue.encode(e,n,hu)}function Oy(e,t){return Ry(e,t)}function Cy(e,t,n=16,r=2){let o=no(16),i=2**n,s=du(t.normalize("NFKC"),o,{N:i,r:8,p:1,dkLen:32}),c=no(24),a=Uint8Array.from([r]),u=Uf(s,c,a).encrypt(e),l=ir(Uint8Array.from([2]),Uint8Array.from([n]),o,c,a,u);return Oy("ncryptsec",l)}function Hy(e,t){let{prefix:n,words:r}=Ue.decode(e,hu);if(n!=="ncryptsec")throw new Error(`invalid prefix ${n}, expected 'ncryptsec'`);let o=new Uint8Array(Ue.fromWords(r)),i=o[0];if(i!==2)throw new Error(`invalid version ${i}, expected 0x02`);let c=2**o[1],a=o.slice(2,18),f=o.slice(18,42),u=o[42],l=Uint8Array.from([u]),d=o.slice(43),h=du(t.normalize("NFKC"),a,{N:c,r:8,p:1,dkLen:32});return Uf(h,f,l).decrypt(d)}const r1=Object.freeze(Object.defineProperty({__proto__:null,decrypt:Hy,encrypt:Cy},Symbol.toStringTag,{value:"Module"}));var Pr=new TextDecoder("utf-8"),go=new TextEncoder,My={isNProfile:e=>/^nprofile1[a-z\d]+$/.test(e||""),isNEvent:e=>/^nevent1[a-z\d]+$/.test(e||""),isNAddr:e=>/^naddr1[a-z\d]+$/.test(e||""),isNSec:e=>/^nsec1[a-z\d]{58}$/.test(e||""),isNPub:e=>/^npub1[a-z\d]{58}$/.test(e||""),isNote:e=>/^note1[a-z\d]+$/.test(e||""),isNcryptsec:e=>/^ncryptsec1[a-z\d]+$/.test(e||"")},Ks=5e3,Py=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function qy(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=e&255,t}function Vy(e){try{return e.startsWith("nostr:")&&(e=e.substring(6)),gu(e)}catch{return{type:"invalid",data:null}}}function gu(e){var o,i,s,c,a,f,u;let{prefix:t,words:n}=Ue.decode(e,Ks),r=new Uint8Array(Ue.fromWords(n));switch(t){case"nprofile":{let l=hi(r);if(!((o=l[0])!=null&&o[0]))throw new Error("missing TLV 0 for nprofile");if(l[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:oe(l[0][0]),relays:l[1]?l[1].map(d=>Pr.decode(d)):[]}}}case"nevent":{let l=hi(r);if(!((i=l[0])!=null&&i[0]))throw new Error("missing TLV 0 for nevent");if(l[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(l[2]&&l[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(l[3]&&l[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:oe(l[0][0]),relays:l[1]?l[1].map(d=>Pr.decode(d)):[],author:(s=l[2])!=null&&s[0]?oe(l[2][0]):void 0,kind:(c=l[3])!=null&&c[0]?parseInt(oe(l[3][0]),16):void 0}}}case"naddr":{let l=hi(r);if(!((a=l[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((f=l[2])!=null&&f[0]))throw new Error("missing TLV 2 for naddr");if(l[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=l[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(l[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Pr.decode(l[0][0]),pubkey:oe(l[2][0]),kind:parseInt(oe(l[3][0]),16),relays:l[1]?l[1].map(d=>Pr.decode(d)):[]}}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:oe(r)};default:throw new Error(`unknown prefix ${t}`)}}function hi(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],i=n.slice(2,2+o);if(n=n.slice(2+o),i.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(i)}return t}function Dy(e){return Vo("nsec",e)}function jy(e){return Vo("npub",Ce(e))}function zy(e){return Vo("note",Ce(e))}function qo(e,t){let n=Ue.toWords(t);return Ue.encode(e,n,Ks)}function Vo(e,t){return qo(e,t)}function Fy(e){let t=Zs({0:[Ce(e.pubkey)],1:(e.relays||[]).map(n=>go.encode(n))});return qo("nprofile",t)}function Ky(e){let t;e.kind!==void 0&&(t=qy(e.kind));let n=Zs({0:[Ce(e.id)],1:(e.relays||[]).map(r=>go.encode(r)),2:e.author?[Ce(e.author)]:[],3:t?[new Uint8Array(t)]:[]});return qo("nevent",n)}function Zy(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let n=Zs({0:[go.encode(e.identifier)],1:(e.relays||[]).map(r=>go.encode(r)),2:[Ce(e.pubkey)],3:[new Uint8Array(t)]});return qo("naddr",n)}function Zs(e){let t=[];return Object.entries(e).reverse().forEach(([n,r])=>{r.forEach(o=>{let i=new Uint8Array(o.length+2);i.set([parseInt(n)],0),i.set([o.length],1),i.set(o,2),t.push(i)})}),ir(...t)}const o1=Object.freeze(Object.defineProperty({__proto__:null,BECH32_REGEX:Py,Bech32MaxSize:Ks,NostrTypeGuard:My,decode:gu,decodeNostrURI:Vy,encodeBytes:Vo,naddrEncode:Zy,neventEncode:Ky,noteEncode:zy,nprofileEncode:Fy,npubEncode:jy,nsecEncode:Dy},Symbol.toStringTag,{value:"Module"}));var gi={},zc;function i1(){return zc||(zc=1,(function(e){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0;function t(_){if(!Number.isSafeInteger(_))throw new Error(`Wrong integer: ${_}`)}e.assertNumber=t;function n(..._){const x=(w,v)=>A=>w(v(A)),b=Array.from(_).reverse().reduce((w,v)=>w?x(w,v.encode):v.encode,void 0),E=_.reduce((w,v)=>w?x(w,v.decode):v.decode,void 0);return{encode:b,decode:E}}function r(_){return{encode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return x.map(b=>{if(t(b),b<0||b>=_.length)throw new Error(`Digit index outside alphabet: ${b} (alphabet: ${_.length})`);return _[b]})},decode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="string")throw new Error("alphabet.decode input should be array of strings");return x.map(b=>{if(typeof b!="string")throw new Error(`alphabet.decode: not string element=${b}`);const E=_.indexOf(b);if(E===-1)throw new Error(`Unknown letter: "${b}". Allowed: ${_}`);return E})}}}function o(_=""){if(typeof _!="string")throw new Error("join separator should be string");return{encode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="string")throw new Error("join.encode input should be array of strings");for(let b of x)if(typeof b!="string")throw new Error(`join.encode: non-string input=${b}`);return x.join(_)},decode:x=>{if(typeof x!="string")throw new Error("join.decode input should be string");return x.split(_)}}}function i(_,x="="){if(t(_),typeof x!="string")throw new Error("padding chr should be string");return{encode(b){if(!Array.isArray(b)||b.length&&typeof b[0]!="string")throw new Error("padding.encode input should be array of strings");for(let E of b)if(typeof E!="string")throw new Error(`padding.encode: non-string input=${E}`);for(;b.length*_%8;)b.push(x);return b},decode(b){if(!Array.isArray(b)||b.length&&typeof b[0]!="string")throw new Error("padding.encode input should be array of strings");for(let w of b)if(typeof w!="string")throw new Error(`padding.decode: non-string input=${w}`);let E=b.length;if(E*_%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;E>0&&b[E-1]===x;E--)if(!((E-1)*_%8))throw new Error("Invalid padding: string has too much padding");return b.slice(0,E)}}}function s(_){if(typeof _!="function")throw new Error("normalize fn should be function");return{encode:x=>x,decode:x=>_(x)}}function c(_,x,b){if(x<2)throw new Error(`convertRadix: wrong from=${x}, base cannot be less than 2`);if(b<2)throw new Error(`convertRadix: wrong to=${b}, base cannot be less than 2`);if(!Array.isArray(_))throw new Error("convertRadix: data should be array");if(!_.length)return[];let E=0;const w=[],v=Array.from(_);for(v.forEach(A=>{if(t(A),A<0||A>=x)throw new Error(`Wrong integer: ${A}`)});;){let A=0,S=!0;for(let B=E;B<v.length;B++){const k=v[B],T=x*A+k;if(!Number.isSafeInteger(T)||x*A/x!==A||T-k!==x*A)throw new Error("convertRadix: carry overflow");if(A=T%b,v[B]=Math.floor(T/b),!Number.isSafeInteger(v[B])||v[B]*b+A!==T)throw new Error("convertRadix: carry overflow");if(S)v[B]?S=!1:E=B;else continue}if(w.push(A),S)break}for(let A=0;A<_.length-1&&_[A]===0;A++)w.push(0);return w.reverse()}const a=(_,x)=>x?a(x,_%x):_,f=(_,x)=>_+(x-a(_,x));function u(_,x,b,E){if(!Array.isArray(_))throw new Error("convertRadix2: data should be array");if(x<=0||x>32)throw new Error(`convertRadix2: wrong from=${x}`);if(b<=0||b>32)throw new Error(`convertRadix2: wrong to=${b}`);if(f(x,b)>32)throw new Error(`convertRadix2: carry overflow from=${x} to=${b} carryBits=${f(x,b)}`);let w=0,v=0;const A=2**b-1,S=[];for(const B of _){if(t(B),B>=2**x)throw new Error(`convertRadix2: invalid data word=${B} from=${x}`);if(w=w<<x|B,v+x>32)throw new Error(`convertRadix2: carry overflow pos=${v} from=${x}`);for(v+=x;v>=b;v-=b)S.push((w>>v-b&A)>>>0);w&=2**v-1}if(w=w<<b-v&A,!E&&v>=x)throw new Error("Excess padding");if(!E&&w)throw new Error(`Non-zero padding: ${w}`);return E&&v>0&&S.push(w>>>0),S}function l(_){return t(_),{encode:x=>{if(!(x instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return c(Array.from(x),2**8,_)},decode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(c(x,_,2**8))}}}function d(_,x=!1){if(t(_),_<=0||_>32)throw new Error("radix2: bits should be in (0..32]");if(f(8,_)>32||f(_,8)>32)throw new Error("radix2: carry overflow");return{encode:b=>{if(!(b instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return u(Array.from(b),8,_,!x)},decode:b=>{if(!Array.isArray(b)||b.length&&typeof b[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(u(b,_,8,x))}}}function h(_){if(typeof _!="function")throw new Error("unsafeWrapper fn should be function");return function(...x){try{return _.apply(null,x)}catch{}}}function p(_,x){if(t(_),typeof x!="function")throw new Error("checksum fn should be function");return{encode(b){if(!(b instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const E=x(b).slice(0,_),w=new Uint8Array(b.length+_);return w.set(b),w.set(E,b.length),w},decode(b){if(!(b instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const E=b.slice(0,-_),w=x(E).slice(0,_),v=b.slice(-_);for(let A=0;A<_;A++)if(w[A]!==v[A])throw new Error("Invalid checksum");return E}}}e.utils={alphabet:r,chain:n,checksum:p,radix:l,radix2:d,join:o,padding:i},e.base16=n(d(4),r("0123456789ABCDEF"),o("")),e.base32=n(d(5),r("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),i(5),o("")),e.base32hex=n(d(5),r("0123456789ABCDEFGHIJKLMNOPQRSTUV"),i(5),o("")),e.base32crockford=n(d(5),r("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),s(_=>_.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=n(d(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),i(6),o("")),e.base64url=n(d(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),i(6),o(""));const g=_=>n(l(58),r(_),o(""));e.base58=g("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=g("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=g("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const y=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(_){let x="";for(let b=0;b<_.length;b+=8){const E=_.subarray(b,b+8);x+=e.base58.encode(E).padStart(y[E.length],"1")}return x},decode(_){let x=[];for(let b=0;b<_.length;b+=11){const E=_.slice(b,b+11),w=y.indexOf(E.length),v=e.base58.decode(E);for(let A=0;A<v.length-w;A++)if(v[A]!==0)throw new Error("base58xmr: wrong padding");x=x.concat(Array.from(v.slice(v.length-w)))}return Uint8Array.from(x)}};const m=_=>n(p(4,x=>_(_(x))),e.base58);e.base58check=m;const I=n(r("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),$=[996825010,642813549,513874426,1027748829,705979059];function M(_){const x=_>>25;let b=(_&33554431)<<5;for(let E=0;E<$.length;E++)(x>>E&1)===1&&(b^=$[E]);return b}function P(_,x,b=1){const E=_.length;let w=1;for(let v=0;v<E;v++){const A=_.charCodeAt(v);if(A<33||A>126)throw new Error(`Invalid prefix (${_})`);w=M(w)^A>>5}w=M(w);for(let v=0;v<E;v++)w=M(w)^_.charCodeAt(v)&31;for(let v of x)w=M(w)^v;for(let v=0;v<6;v++)w=M(w);return w^=b,I.encode(u([w%2**30],30,5,!1))}function N(_){const x=_==="bech32"?1:734539939,b=d(5),E=b.decode,w=b.encode,v=h(E);function A(T,R,z=90){if(typeof T!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof T}`);if(!Array.isArray(R)||R.length&&typeof R[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof R}`);const D=T.length+7+R.length;if(z!==!1&&D>z)throw new TypeError(`Length ${D} exceeds limit ${z}`);return T=T.toLowerCase(),`${T}1${I.encode(R)}${P(T,R,x)}`}function S(T,R=90){if(typeof T!="string")throw new Error(`bech32.decode input should be string, not ${typeof T}`);if(T.length<8||R!==!1&&T.length>R)throw new TypeError(`Wrong string length: ${T.length} (${T}). Expected (8..${R})`);const z=T.toLowerCase();if(T!==z&&T!==T.toUpperCase())throw new Error("String must be lowercase or uppercase");T=z;const D=T.lastIndexOf("1");if(D===0||D===-1)throw new Error('Letter "1" must be present between prefix and data only');const j=T.slice(0,D),K=T.slice(D+1);if(K.length<6)throw new Error("Data must be at least 6 characters long");const Z=I.decode(K).slice(0,-6),Q=P(j,Z,x);if(!K.endsWith(Q))throw new Error(`Invalid checksum in ${T}: expected "${Q}"`);return{prefix:j,words:Z}}const B=h(S);function k(T){const{prefix:R,words:z}=S(T,!1);return{prefix:R,words:z,bytes:E(z)}}return{encode:A,decode:S,decodeToBytes:k,decodeUnsafe:B,fromWords:E,fromWordsUnsafe:v,toWords:w}}e.bech32=N("bech32"),e.bech32m=N("bech32m"),e.utf8={encode:_=>new TextDecoder().decode(_),decode:_=>new TextEncoder().encode(_)},e.hex=n(d(4),r("0123456789abcdef"),o(""),s(_=>{if(typeof _!="string"||_.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof _} with length ${_.length}`);return _.toLowerCase()}));const O={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},C=`Invalid encoding type. Available types: ${Object.keys(O).join(", ")}`,H=(_,x)=>{if(typeof _!="string"||!O.hasOwnProperty(_))throw new TypeError(C);if(!(x instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return O[_].encode(x)};e.bytesToString=H,e.str=e.bytesToString;const q=(_,x)=>{if(!O.hasOwnProperty(_))throw new TypeError(C);if(typeof x!="string")throw new TypeError("stringToBytes() expects string");return O[_].decode(x)};e.stringToBytes=q,e.bytes=e.stringToBytes})(gi)),gi}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function pu(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function wu(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function Wy(e){if(typeof e!="function")throw new Error("function expected");return!0}function Ar(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function yu(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function Ki(e){if(!Array.isArray(e))throw new Error("array expected")}function bu(e,t){if(!wu(!0,t))throw new Error(`${e}: array of strings expected`)}function vu(e,t){if(!wu(!1,t))throw new Error(`${e}: array of numbers expected`)}function Gy(...e){const t=i=>i,n=(i,s)=>c=>i(s(c)),r=e.map(i=>i.encode).reduceRight(n,t),o=e.map(i=>i.decode).reduce(n,t);return{encode:r,decode:o}}function Yy(e){const t=typeof e=="string"?e.split(""):e,n=t.length;bu("alphabet",t);const r=new Map(t.map((o,i)=>[o,i]));return{encode:o=>(Ki(o),o.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${e}`);return t[i]})),decode:o=>(Ki(o),o.map(i=>{Ar("alphabet.decode",i);const s=r.get(i);if(s===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${e}`);return s}))}}function Xy(e=""){return Ar("join",e),{encode:t=>(bu("join.decode",t),t.join(e)),decode:t=>(Ar("join.decode",t),t.split(e))}}const mu=(e,t)=>t===0?e:mu(t,e%t),po=(e,t)=>e+(t-mu(e,t)),Kr=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function Zi(e,t,n,r){if(Ki(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(po(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${po(t,n)}`);let o=0,i=0;const s=Kr[t],c=Kr[n]-1,a=[];for(const f of e){if(yu(f),f>=s)throw new Error(`convertRadix2: invalid data word=${f} from=${t}`);if(o=o<<t|f,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)a.push((o>>i-n&c)>>>0);const u=Kr[i];if(u===void 0)throw new Error("invalid carry");o&=u-1}if(o=o<<n-i&c,!r&&i>=t)throw new Error("Excess padding");if(!r&&o>0)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&a.push(o>>>0),a}function Jy(e,t=!1){if(yu(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(po(8,e)>32||po(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!pu(n))throw new Error("radix2.encode input should be Uint8Array");return Zi(Array.from(n),8,e,!t)},decode:n=>(vu("radix2.decode",n),Uint8Array.from(Zi(n,e,8,t)))}}function Fc(e){return Wy(e),function(...t){try{return e.apply(null,t)}catch{}}}const Wi=Gy(Yy("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Xy("")),Kc=[996825010,642813549,513874426,1027748829,705979059];function dr(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<Kc.length;r++)(t>>r&1)===1&&(n^=Kc[r]);return n}function Zc(e,t,n=1){const r=e.length;let o=1;for(let i=0;i<r;i++){const s=e.charCodeAt(i);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);o=dr(o)^s>>5}o=dr(o);for(let i=0;i<r;i++)o=dr(o)^e.charCodeAt(i)&31;for(let i of t)o=dr(o)^i;for(let i=0;i<6;i++)o=dr(o);return o^=n,Wi.encode(Zi([o%Kr[30]],30,5,!1))}function Qy(e){const t=e==="bech32"?1:734539939,n=Jy(5),r=n.decode,o=n.encode,i=Fc(r);function s(l,d,h=90){Ar("bech32.encode prefix",l),pu(d)&&(d=Array.from(d)),vu("bech32.encode",d);const p=l.length;if(p===0)throw new TypeError(`Invalid prefix length ${p}`);const g=p+7+d.length;if(h!==!1&&g>h)throw new TypeError(`Length ${g} exceeds limit ${h}`);const y=l.toLowerCase(),m=Zc(y,d,t);return`${y}1${Wi.encode(d)}${m}`}function c(l,d=90){Ar("bech32.decode input",l);const h=l.length;if(h<8||d!==!1&&h>d)throw new TypeError(`invalid string length: ${h} (${l}). Expected (8..${d})`);const p=l.toLowerCase();if(l!==p&&l!==l.toUpperCase())throw new Error("String must be lowercase or uppercase");const g=p.lastIndexOf("1");if(g===0||g===-1)throw new Error('Letter "1" must be present between prefix and data only');const y=p.slice(0,g),m=p.slice(g+1);if(m.length<6)throw new Error("Data must be at least 6 characters long");const I=Wi.decode(m).slice(0,-6),$=Zc(y,I,t);if(!m.endsWith($))throw new Error(`Invalid checksum in ${l}: expected "${$}"`);return{prefix:y,words:I}}const a=Fc(c);function f(l){const{prefix:d,words:h}=c(l,!1);return{prefix:d,words:h,bytes:r(h)}}function u(l,d){return s(l,o(d))}return{encode:s,decode:c,encodeFromBytes:u,decodeToBytes:f,decodeUnsafe:a,fromWords:r,fromWordsUnsafe:i,toWords:o}}const s1=Qy("bech32");/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function eb(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Do(e,t,n=""){const r=eb(e),o=e==null?void 0:e.length;if(!r||t!==void 0){const s=n&&`"${n}" `,c="",a=r?`length=${o}`:`type=${typeof e}`;throw new Error(s+"expected Uint8Array"+c+", got "+a)}return e}function Wc(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function tb(e,t){Do(e,void 0,"digestInto() output");const n=t.outputLen;if(e.length<n)throw new Error('"digestInto() output" expected to be of length >='+n)}function Gi(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function pi(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function et(e,t){return e<<32-t|e>>>t}const Eu=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",nb=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function c1(e){if(Do(e),Eu)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=nb[e[n]];return t}const gt={_0:48,_9:57,A:65,F:70,a:97,f:102};function Gc(e){if(e>=gt._0&&e<=gt._9)return e-gt._0;if(e>=gt.A&&e<=gt.F)return e-(gt.A-10);if(e>=gt.a&&e<=gt.f)return e-(gt.a-10)}function a1(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Eu)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){const s=Gc(e.charCodeAt(i)),c=Gc(e.charCodeAt(i+1));if(s===void 0||c===void 0){const a=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+i)}r[o]=s*16+c}return r}function f1(...e){let t=0;for(let r=0;r<e.length;r++){const o=e[r];Do(o),t+=o.length}const n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){const i=e[r];n.set(i,o),o+=i.length}return n}function rb(e,t={}){const n=(o,i)=>e(i).update(o).digest(),r=e(void 0);return n.outputLen=r.outputLen,n.blockLen=r.blockLen,n.create=o=>e(o),Object.assign(n,t),Object.freeze(n)}const ob=e=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,e])});function ib(e,t,n){return e&t^~e&n}function sb(e,t,n){return e&t^e&n^t&n}class cb{constructor(t,n,r,o){U(this,"blockLen");U(this,"outputLen");U(this,"padOffset");U(this,"isLE");U(this,"buffer");U(this,"view");U(this,"finished",!1);U(this,"length",0);U(this,"pos",0);U(this,"destroyed",!1);this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.buffer=new Uint8Array(t),this.view=pi(this.buffer)}update(t){Wc(this),Do(t);const{view:n,buffer:r,blockLen:o}=this,i=t.length;for(let s=0;s<i;){const c=Math.min(o-this.pos,i-s);if(c===o){const a=pi(t);for(;o<=i-s;s+=o)this.process(a,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Wc(this),tb(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:i}=this;let{pos:s}=this;n[s++]=128,Gi(this.buffer.subarray(s)),this.padOffset>o-s&&(this.process(r,0),s=0);for(let l=s;l<o;l++)n[l]=0;r.setBigUint64(o-8,BigInt(this.length*8),i),this.process(r,0);const c=pi(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen must be aligned to 32bit");const f=a/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<f;l++)c.setUint32(4*l,u[l],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:i,destroyed:s,pos:c}=this;return t.destroyed=s,t.finished=i,t.length=o,t.pos=c,o%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const Dt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ab=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),jt=new Uint32Array(64);class fb extends cb{constructor(t){super(64,t,8,!1)}get(){const{A:t,B:n,C:r,D:o,E:i,F:s,G:c,H:a}=this;return[t,n,r,o,i,s,c,a]}set(t,n,r,o,i,s,c,a){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=c|0,this.H=a|0}process(t,n){for(let l=0;l<16;l++,n+=4)jt[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const d=jt[l-15],h=jt[l-2],p=et(d,7)^et(d,18)^d>>>3,g=et(h,17)^et(h,19)^h>>>10;jt[l]=g+jt[l-7]+p+jt[l-16]|0}let{A:r,B:o,C:i,D:s,E:c,F:a,G:f,H:u}=this;for(let l=0;l<64;l++){const d=et(c,6)^et(c,11)^et(c,25),h=u+d+ib(c,a,f)+ab[l]+jt[l]|0,g=(et(r,2)^et(r,13)^et(r,22))+sb(r,o,i)|0;u=f,f=a,a=c,c=s+h|0,s=i,i=o,o=r,r=h+g|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,c=c+this.E|0,a=a+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(r,o,i,s,c,a,f,u)}roundClean(){Gi(jt)}destroy(){this.set(0,0,0,0,0,0,0,0),Gi(this.buffer)}}class lb extends fb{constructor(){super(32);U(this,"A",Dt[0]|0);U(this,"B",Dt[1]|0);U(this,"C",Dt[2]|0);U(this,"D",Dt[3]|0);U(this,"E",Dt[4]|0);U(this,"F",Dt[5]|0);U(this,"G",Dt[6]|0);U(this,"H",Dt[7]|0)}}const l1=rb(()=>new lb,ob(1));export{Pb as $,zb as A,mb as B,yb as C,Ub as D,Nb as E,Cb as F,ct as G,hb as H,gb as I,_b as J,Xu as K,xb as L,pb as M,Tb as N,Db as O,Vb as P,bd as Q,zt as R,Qb as S,Rt as T,wb as U,bb as V,$b as W,Ab as X,vb as Y,Hb as Z,hr as _,t1 as a,Ib as a0,Rd as a1,Sb as a2,Rb as a3,Ob as a4,kb as a5,Lb as a6,jb as a7,Eb as a8,Mb as a9,Bb as aa,Dn as b,K0 as c,Hy as d,Cy as e,lt as f,ms as g,co as h,Dp as i,Sp as j,o1 as k,r1 as l,ip as m,wp as n,op as o,s1 as p,c1 as q,i1 as r,n1 as s,a1 as t,f1 as u,Kd as v,Fd as w,qb as x,l1 as y,Yu as z};
